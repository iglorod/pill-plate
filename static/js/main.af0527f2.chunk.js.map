{"version":3,"sources":["component/AppSkeleton/DrawerBlock/DrawerItems/DrawerLogo/DrawerLogo.module.css","component/UI/AnimatedSwitch/AnimatedSwitch.module.css","assets/images/logo.png","assets/images/soon.png","assets/images/idea.png","App.module.css","component/AppSkeleton/styles.js","component/AppSkeleton/DrawerBlock/DrawerItems/DrawerLogo/DrawerLogo.js","component/AppSkeleton/DrawerBlock/DrawerItems/DrawerItem/DrawerItem.js","component/UI/Dialog/styles.js","utility/validation.js","utility/axios-instance.js","store/actions/topics.js","store/actions/actionTypes.js","component/UI/Dialog/CreateTopic.js","component/AppSkeleton/DrawerBlock/DrawerItems/DriwerItems.js","component/AppSkeleton/DrawerBlock/DrawerBlock.js","component/UI/Link/Link.js","component/AppSkeleton/AppBarBlock/AppBarLink/AppBarLink.js","component/AppSkeleton/AppBarBlock/MenuButton/MenuButton.js","store/actions/authorization.js","utility/filetype-check.js","store/actions/messages.js","utility/message-types.js","component/AppSkeleton/AppBarBlock/AppBarBlock.js","store/actions/socket.js","component/UI/AnimatedSwitch/AnimatedSwitch.js","component/DrawerPages/FilterType/styles.js","component/DrawerPages/FilterType/FilterMessages/MessageItems/MessageItem/MessageSceleton/MessageSceleton.js","component/DrawerPages/FilterType/FilterMessages/MessageItems/MessageItem/TextItem/TextItem.js","component/DrawerPages/FilterType/FilterMessages/MessageItems/MessageItem/LinkItem/LinkItem.js","component/DrawerPages/FilterType/FilterMessages/MessageItems/MessageItem/FileItem/FileItem.js","component/UI/ImageReview/styles.js","component/UI/ImageReview/ImageReview.js","component/DrawerPages/FilterType/FilterMessages/MessageItems/MessageItem/ImageItem/ImageItem.js","component/DrawerPages/FilterType/FilterMessages/MessageItems/MessageItem/VideoItem/VideoItem.js","component/DrawerPages/FilterType/FilterMessages/MessageItems/MessageItem/MessageItem.js","component/DrawerPages/FilterType/FilterMessages/MessageItems/MessageItems.js","component/DrawerPages/FilterType/FilterMessages/EmptyMessage/EmptyMessage.js","component/DrawerPages/FilterType/FilterMessages/LoadMessages/LoadMessages.js","component/DrawerPages/FilterType/FilterMessages/FilterMessages.js","component/DrawerPages/TopicContent/styles.js","component/DrawerPages/FilterType/Links/Links.js","component/DrawerPages/FilterType/Photos/Photos.js","component/DrawerPages/FilterType/Videos/Videos.js","component/DrawerPages/FilterType/Files/Files.js","component/DrawerPages/FilterType/Notes/Notes.js","component/DrawerPages/TopicContent/InputBlock/ActionSection/DropFile/DropFile.js","component/DrawerPages/TopicContent/InputBlock/ActionSection/ActionSection.js","component/DrawerPages/TopicContent/InputBlock/InputBlock.js","component/DrawerPages/TopicContent/MessageBlock/MessageItems/MessageItem/MessageSceleton/MessageSceleton.js","component/DrawerPages/TopicContent/MessageBlock/MessageItems/MessageItem/TextItem/TextItem.js","component/DrawerPages/TopicContent/MessageBlock/MessageItems/MessageItem/LinkItem/LinkItem.js","component/DrawerPages/TopicContent/MessageBlock/MessageItems/MessageItem/FileItem/FileItem.js","component/DrawerPages/TopicContent/MessageBlock/MessageItems/MessageItem/ImageItem/ImageItem.js","component/DrawerPages/TopicContent/MessageBlock/MessageItems/MessageItem/VideoItem/VideoItem.js","component/DrawerPages/TopicContent/MessageBlock/MessageItems/MessageItem/MessageItem.js","component/DrawerPages/TopicContent/MessageBlock/MessageItems/MessageItems.js","component/DrawerPages/TopicContent/MessageBlock/EmptyMessages/EmptyMessages.js","component/DrawerPages/TopicContent/MessageBlock/LoadMessages/LoadMessages.js","component/DrawerPages/TopicContent/MessageBlock/MessageBlock.js","component/DrawerPages/TopicContent/ActionsBlock/MessageActions/MessageActions.js","component/DrawerPages/TopicContent/ActionsBlock/FilterActions/FilterActions.js","component/DrawerPages/TopicContent/ActionsBlock/ActionsBlock.js","component/DrawerPages/TopicContent/TopicContent.js","component/DrawerPages/Topics/styles.js","component/DrawerPages/Topics/TopicsList/Topic/TopicMenu/TopicMenu.js","component/DrawerPages/Topics/TopicsList/Topic/Topic.js","component/UI/Dialog/EditTopic.js","component/UI/Dialog/ShareTopic.js","component/DrawerPages/Topics/TopicsList/TopicsList.js","component/DrawerPages/Topics/Topics.js","component/DrawerPages/Draft/styles.js","component/DrawerPages/Draft/Draft.js","component/DrawerPages/4O4/styles.js","component/DrawerPages/4O4/NotFound.js","component/AppSkeleton/AppSceleton.js","component/Authorization/styles.js","component/Authorization/SignIn/SignInForm/SignInForm.js","component/UI/Copyright/Copyright.js","component/Authorization/AuthContainer/AuthContainer.js","component/Authorization/SignIn/SignIn.js","component/Authorization/SignUp/SignUpForm/SignUpForm.js","component/Authorization/SignUp/SignUp.js","component/UI/Loading/styles.js","component/UI/Loading/Loading.js","component/Layout/Layout.js","App.js","serviceWorker.js","store/reducers/authorization.js","store/reducers/topics.js","store/reducers/socket.js","store/reducers/messages.js","index.js"],"names":["module","exports","style","makeStyles","theme","root","display","drawer","breakpoints","up","width","flexShrink","appBar","marginLeft","shadows","menuButton","marginRight","spacing","appBarButton","borderRadius","padding","margin","appBarLink","toolbar","mixins","drawerPaper","background","palette","primary","main","border","boxShadow","content","flexGrow","activeLink","fontWeight","transition","nestedLink","paddingLeft","nestedLinkActive","DrawerLogo","classes","useStyles","className","src","Logo","alt","cssClasses","titleBlock","logoTitle","logoSubTitle","DrawerItem","props","RouterLink","React","forwardRef","routeProps","ref","to","activeClassName","isNested","ListItem","button","component","onClick","collapseToggle","ListItemIcon","icon","ListItemText","text","addTopicBtn","topicTitle","textAlign","fontFamily","paddingBottom","dialogColorHat","height","agreeBtn","color","dark","closeBtn","secondary","topicInput","marginTop","changeValidationMessage","isValid","message","currMessage","length","validation","string","validationRules","originalEmail","validationMessage","isRequred","isEmail","test","minLength","maxLength","shoudBeEqual","instance","axios","create","baseURL","setCurrentTopicActionCreator","topicId","type","Transition","Slide","direction","connect","state","userId","auth","id","socket","sckt","dispatch","startCreatingTopic","topic","handleOpenSnackbar","getState","post","then","createTopicActionCreator","data","catch","error","createTopicAction","useState","title","config","name","label","value","notes","stateInputs","setStateInputs","openSnackbar","setOpenSnackbar","clearState","prevState","onInputHandler","inputName","event","newValue","target","currentValid","newValidationMessage","inputs","fieldsIsValid","key","push","TextField","fullWidth","onInput","bind","helperText","Fragment","Dialog","open","TransitionComponent","keepMounted","maxWidth","onClose","handleClose","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogActions","Button","disabled","newTopic","creatorId","note","Snackbar","anchorOrigin","vertical","horizontal","DriwerItems","collapseOpen","setCollapseOpen","addTopicDialogOpen","setTopicDialogOpen","addTopicButton","ListItemSecondaryAction","IconButton","List","Collapse","in","timeout","unmountOnExit","disablePadding","Divider","DrawerBlock","container","aria-label","Hidden","smUp","implementation","Drawer","variant","isMobile","handleDrawerToggle","paper","ModalProps","xsDown","ReactLink","AppBarLink","edge","logout","Link","link","underline","Typography","noWrap","DrawerButton","errorActionCreator","err","signInLocalAction","defaults","headers","common","localStorage","getItem","resetTokenTimer","clearTimeout","refreshTimerId","delay","expirationTime","Math","floor","Date","getTime","timerId","setTimeout","token","refreshTokenAction","console","log","newTimeoutIdActionCreator","newToken","refreshTokenActionCreator","getExtension","filename","parts","split","editRecivedMessageActionCreator","sendFileMessageAction","changeProgress","formData","FormData","file","fileType","toLowerCase","fileTypeCheck","append","sender","tpc","openedTopicId","onUploadProgress","progressEvent","progress","round","loaded","total","emit","clearSocket","clearMessages","clearTopics","AppBar","position","Toolbar","MailOutline","ExitToApp","animatedSwitch","bounce","val","spring","stiffness","damping","bounceTransition","atEnter","opacity","scale","atLeave","atActive","switchClass","pageWrapper","classProp","mapStyles","styles","transform","children","paddingTop","overflow","down","backgroundColor","messagesBlock","justifyContent","flexDirection","textArea","inputProp","fontSize","borderBottomColor","dropSection","dropArea","outline","dragDropArea","verticalAlign","freqEmoji","cursor","addFileBtn","addImageBtn","toggleSmilesBtn","addSmileBlock","sendBth","messageSecondaryAction","top","messagesList","downloadLink","textDecoration","downloadIcon","messageAuthorEmail","capitalizeEmail","textTransform","messageLiItem","paddingRight","messageLiWithAuthor","messageLiSelected","topLiFetching","actionsBlock","zIndex","topicName","membersCount","topicData","alignItems","topicNote","isChecked","left","avatarStyle","deleteButton","editButton","messageActionsBlock","secondaryActions","filterActionsBlock","expansionMenu","filterChip","MessageSceleton","author","emailName","emailEnd","showName","join","disableTypography","TextItem","email","LinkItem","urlMatches","match","LinkPreview","url","forEach","startIndex","indexOf","endIndex","obj","replace","character","index","insertTextAtIndices","dangerouslySetInnerHTML","__html","getFileName","path","pathContains","slice","FILE_PATH","ListItemAvatar","href","Avatar","GetApp","stopPropagation","modal","maxHeight","minHeight","minWidth","image","ImageReview","Modal","toggleView","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","Fade","imageSrc","openImage","setOpenImage","toggleImageReview","IMAGE_PATH","controls","MessageItem","humanDate","date","toLocaleTimeString","dataComponent","FileItem","ImageItem","VideoItem","listClasses","ContainerProps","gutterBottom","MessageItems","loadPrevMessages","isVisible","fetching","fetchPreviousMessages","useEffect","lastMessageDate","onChange","offset","delayedCall","CircularProgress","disableShrink","filterMessages","map","item","currentMessageDate","toLocaleDateString","shownTimeString","toDateString","_id","EmptyMessage","alignSelf","LoadMessages","scrollToTopPosition","topPosition","parent","Promise","resolve","reject","$","animate","scrollTop","getTopPostion","el","FilterMessages","setFilterMessages","setFetching","setAllowToFetch","setSkip","firstFetching","setFirstFetching","fetchFilterMessages","firstFetchingScroll","messages","document","querySelector","lastMessage","limit","queryChunks","fetchType","skip","getSkip","get","idUser","updateFilterMessages","reverse","newMessages","currentMessages","getLastMessages","prevSkip","allow","getLastAllowToFetch","getLastFetching","firstMessage","querySelectorAll","oldFirstMessageTopPosition","newFirstMessageTopPosition","prevFetchingScroll","inputBlock","notReadedDot","newMessagesBlock","DropFile","useDropzone","accept","imageDrop","onDrop","acceptedFiles","dispatchFiles","getRootProps","getInputProps","ActionSection","Note","PhotoCamera","smiles","emoji","set","size","addEmoji","sendOrEditMessage","msg","topics","sendTextMessage","messageType","messageData","sendTextMessageAction","editMessage","editableMessageId","patch","editMessageAction","textAreaValue","setTextAreaValue","showSmiles","setShowSmiles","freqSmiles","setFreqSmiles","inputRef","useRef","freqObj","JSON","parse","freqArr","getFreqSmiles","editingMessage","find","focusInput","current","focus","sendMessage","clearSelectedMessages","Zoom","onSelect","native","idEmoji","filter","splice","addNewSmileToFreq","sheetSize","multiline","autoFocus","rows","rowsMax","placeholder","onKeyDown","e","preventDefault","InputLabelProps","inputLabelProp","InputProps","endAdornment","InputAdornment","onBlur","disableRipple","disableFocusRipple","disableTouchRipple","showAuthor","prevType","prevAuthor","show","selectedMessages","messageId","includes","setListItemClasses","selectedMessagesId","changeSelectedMessage","CheckCircle","wasReadedBy","addToReaded","FiberManualRecord","currTopicId","savingMessages","readMessageAction","firstNotReaded","messageIndex","arrayLength","newMessagesLabelPosition","notReadedElement","messagesCount","photos","links","videos","files","LinearProgress","loadingFileProgress","EmptyMessages","topicIsExist","recivingMessage","fetchMessages","limitations","fetchMessagesActionCreator","fetchMessagesAction","setNewMessagesLabelPosition","count","displayCount","loadMessagesHistory","savingMessageScroll","goBack","scrollIntoView","isFirstLoad","removeMessage","delete","removeMessageAction","setContent","editingMessageStart","selectedsId","buttons","reduce","editable","someIsSelected","FilterActions","handleFile","startFilter","currentFilter","setFilter","handlePhoto","handleVideo","handleLink","Chip","InsertDriveFileRounded","clickable","onDelete","deleteIcon","Done","PhotoSizeSelectActualRounded","MovieRounded","LinkRounded","expanded","setExpanded","setTopicName","setTopicNote","setMembersCount","idTopic","getCurrentTopic","membersId","ExpansionPanel","isExpanded","ExpansionPanelSummary","expandIcon","aria-controls","ExpansionPanelDetails","openLoading","loading","setCurrentTopic","uploadFile","setLoadingFileProgress","setEditingMessage","setSelectedMessageId","editingMessageHandler","newCollection","newProgress","roomName","params","socketRoom","gridConatainer","topicInfo","topicLink","wordBreak","topicCreated","topicHat","borderTopLeftRadius","borderTopRightRadius","topicMenuButton","right","unreadedCount","bottom","leaveTopic","res","leaveTopicActionCreator","leaveTopicAction","anchorEl","setAnchorEl","Boolean","aria-haspopup","currentTarget","MenuItem","shareDialogOpen","edtiDialogOpen","withRouter","setUnreadedCount","newUnreadMessage","unreadMessageTopicId","transitionDelay","Grid","xs","sm","md","lg","ButtonBase","Badge","badgeContent","max","startEditingTopic","updatedData","editTopicAction","finishEditingTopic","editTopicActionCreator","clearTopic","toPropsTopic","updateTopic","ShareTopic","snackbarMessage","setSnackbarMessage","startShareTopic","newMemberData","response","currentMembers","wasFetched","getTopicsList","getTopicsActionCreator","getTopicsAction","reciveMessage","saveMessageActionCreator","saveMessageAction","changeMessage","deleteMessage","removeRecivedMessageActionCreator","editTopicDialogOpen","setEditTopicDialogOpen","shareTopicDialogOpen","setShareTopicDialogOpen","selectedTopicData","setSelectedTopicData","setNewUnreadMessage","on","dialogClose","Links","exact","Photos","Videos","Files","Notes","TopicContent","TopicsList","imageBlock","Draft","SoonMessage","NotFound","IdeaMessage","finishLoading","connectSocket","mobileOpen","setMobileOpen","CssBaseline","AnimatedSwitch","Topics","avatar","form","submit","wrapper","buttonWrapper","redirectLink","errorAlert","buttonProgress","errorMessage","authStart","onSignIn","loginData","rememberMe","user","rememberData","remember","signInActionCreator","setRememberMe","shoudBeUniqe","password","noValidate","Alert","severity","FormControlLabel","control","Checkbox","copyright","align","getFullYear","AuthContainer","Container","pt","Box","mt","pb","Copyright","SignIn","onSignUp","newUser","signUpActionCreator","emailIsCorrect","setEmailIsCorrect","emailTimeoutId","setEmailTimeoutId","emailConfirm","timeoutId","checkEmailIsCorrect","imputName","justify","SignUp","backdrop","isLoading","signInByLocalData","refreshTokenAndSignIn","expiresIn","AppSceleton","render","App","window","location","hostname","initialState","saveToLocalStorage","setItem","clearLocalStorage","clear","reducer","action","decoded","jwt","decode","userData","exp","undefined","io","close","topicMessages","reducers","combineReducers","authReducer","topicReducer","socketReducer","messageReducer","createMuiTheme","light","deepOrange","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.af0527f2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"titleBlock\":\"DrawerLogo_titleBlock__3NOrA\",\"logoTitle\":\"DrawerLogo_logoTitle__dlb8j\",\"logoSubTitle\":\"DrawerLogo_logoSubTitle__3T0xB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pageWrapper\":\"AnimatedSwitch_pageWrapper__3ISJ1\",\"pageComponentWrapper\":\"AnimatedSwitch_pageComponentWrapper__1HjYM\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAACSCAYAAAD/yvfEAAAZI0lEQVR4Xu1dCZAkVZn+XmZ1V9/39DDMDPcwXAsCo9wLAYvigYvL4rChsLsROouyYCwgyrAG4SpeoUYoCwhsBDorK6dcrmIIAwguuxyigEPIAHMwZ0/fR3XXkfk2/syqyuruOvKsycz6X0RHR8zk+9//f3/2F++9/A8hd10lwYMRYAQYgQggIJiwIuAlVpERYAQMBJiw+EVgBBiByCDAhBUZV7GijAAjwITF7wAjwAhEBgEmrMi4ihVlBBgBJix+BxgBRiAyCDBhRcZVrCgjwAgwYfE7wAgwApFBgAkrMq5iRRkBRoAJi98BRoARiAwCTFiRcRUryggwAkxY/A4wAoxAZBBgwoqMq1hRRoARYMLid4ARYAQigwATVmRcxYoyAowAExa/A4wAIxAZBJiwIuMqVpQRYASYsPgdYAQYgcggwIQVGVexoowAI8CExe8AI8AIRAYBJqzIuIoVZQQYASYsfgecIaD2A00HAuogkBgA1F5A6QKUdkBpAUTrfHlyFtDnAH0G0CcBbQzIDQPaEJDdBWgjztbnpxsaASashna/DeObDgaSq4Dmw4CmQwClw8YkB4/o00B2K5B5F0hvBrLbHEzmRxsNASasRvO4HXuTxwAtxwPJYwG1284M/57RJoD0n4C514D0Jv/ksqRYIMCEFQs3+mBEYhnQ+n7zp94kVUl9Iq/Zl8yf3G4fjGQRUUeACSvqHvSqf/JooO0soOU4r5KCnZ9+A5h5Dki/Gew6LD3UCDBhhdo9ASpHx72Oc4HmVQEuEoDozNvAzNPA3OsBCGeRYUeACSvsHvJbP7pE77zAvJ+K8qCd1vQTQGZLlK1g3R0iwITlELDIPi6agc4LgfazI2tCWcVTzwGTjwEyHS+72JqyCDBhNcKL0XIi0HWRGTMVx0GX81MPA7O/j6N1bFMJAkxYsX4dBNB9CdB2ZqytLBqX+h0wcT8A2Rj2NqCVTFhxdXrTSqD7UoB+N9LI7gQmfgZktzeS1Q1jKxNWHF3dugbo+RQANY7W2bBJB8Z/Csy+bONZfiRKCDBhRclbdnTt+Cug8+N2noz/M1OPA9O/ib+dDWQhE1acnE0X6+3nxski77bMbAQmH/EuhyWEAgEmrFC4wQcljMv1s3wQFEMRFPow8UAMDWs8k5iw4uBzJqvaXmTSqo1RBJ5gwoqAk6qqyMdA+x7k46F9rEL6JBNWSB1jSy2+YLcF07yHph4Dpp90Po9nhAIBJqxQuMGFEkbowuUuJvIUjG/gkIeIvgZMWFF0HAWDDlzTwHFWXp2mAcPfB7LveRXE8+uMABNWnQH3vpwABq5rvAh278DNl0BkNfxdTuPxG9eA5TFhBQyw7+K7P+kpN1BOPgp9+hkjUVhqKYhEN0TrGoiOcyCo7IzboY1AktzMu5DZ3YBIAE3LIZKrINpOB9Qet5KBzFYgtwcyNwIhdABJILEESCw1G2K4Hann87mHbgXwvHojwIRVb8S9rEdVF3r/0Z2E7E5oO6+CTL9lHiUFpe0oECIBafxWgeRqqMu+DiQOcLSGnH4KcuKhvJyEIdeUX7JO18cg2k5xJNfotDPzPCRVY8jLIz1NffN6J3qAlr8ARIsz2YWnx+4G5l51N5dn1R0BJqy6Q+5yQapnteRGVyViZHYH9K2fgNSmzT90oUAg/4ev5AmmQC5qN9QVd5q7FxtDjt8LOf30IoKaTzCqSYhtp0J0fsiGVAD6NOTkLyGgzycoIiyhLtC/GWg72R1pUduxfTcDMmNPL35qvyLAhLVf4XeweNfFrovvaVsuzO+srJ2PoEYTLUcD6bch9VmDUAo7F7SeCPVAut+pPiQdK0duL+7QivObVpi7q9ze4k6uQGBK7+VA88G1RENO/gLQxs2jZWHHJpIQiT6TeCFL1lWNfzd2Wm7GzLPA5ENuZvKcOiPAhFVnwF0tR2WNB651NVVOPAht15etI2CiB6L/Sii9ny7K08fvgxz7MaDPFp9TllwP0Xl+1TX1XV8E9HGLUJKrofReBqh95jxtzDwqZrZbhJjoh+j/fHVbiERT/2OQnkGkogWi9Tig+QhrHvUvTL8LCPqnPBE3HwkkBl3hhOHvcU9Ed8jVdRYTVl3hdrlY3z+5rsGu7VgHObXRIqKl601SWTDk+P3Qhm81jozG3VbHmVCW3lRZ4cx2aHtvKrlLWgJl8EZAWdD5WZ+DPnKrccQz78xUiL7PVCUWuhMD1bXKH1NF60lA8sjFumS2A9SUonCcpU7UyaPcgUy9EEfvcDeXZ9UNASasukHtciFqFkGE5XJob50Aqc2YhKV2I7HqxYqStHfOsY5wdJd18IMVn5VTv4Y+fq9FcD1rIagLT5lh3HHN/Na63O/4IETbmsqyx+6h7Zm5w1JagO6LK1tPHXRoh2WQFt1lfcAlUjAJi4iLR2gRYMIKrWvyivVf5akVV+7NQ/NHpoTxlU49aENlwtr5BWDujeIRSz3sicqkMvEw9MnHijssZcm1EOV2QRTplNkCOfaT4hEP7X8J0V65bLMcvds6wlLYQgUiNJSbfRVSm7SOnO2nu/doZjMwcov7+TwzcASYsAKH2MMC1OS073MeBAD6jnXQ80dCddm3ILo/YXOH1QX14MoX0e53WAmg43wHO6xWoPtvau+wjLAHjzssWmX0dm7W6umNC3YyE1aw+HqT3rvOl47Mcuo3QNMKCPoqWGF4v8MahDK4vsId1m2APhXuO6wCLrTDHLvTm994dmAIMGEFBq1HwYllwJIbPAqxN10fvz//lTDl8SvhUebXx3lfCX8OmdlW8pWwz/hKWXW4+UpId1h0JHX7lbBUoX3fBHK77YHHT9UVASasusLtYDGqy07lYwIa+vh/QU4/C8z+cXEcVev7oB74vZorV47DWmkGYhYj1K34L/txWI/n55fGYbVAJHohc2PzIvQlXc57icNaaCmVn6EyNDxChwATVuhckldo8GvGV70ghkz/Gfq2v4Pxh66YKTrFVBq1C+qKu3yIdM+HRxgBqT5Guhv6Fn4UwIjU9xDpXg5gItqhrwQBPcv0iAATlkcAA5mePAbouyIQ0SRUTm+Etuu6xbmErSdBXXqD/7mEog2i8zyItlOd2WTkEj5nfAWsnEs4YEbsu80lrKTR6I+A9CZn+vLTgSPAhBU4xC4WoAaoVOEgwKHvuQn65H9DUOR768n5ag0fdr/iomoNqnnR33wERPsZPlRr2A2ZGzVzC40UHR+qNVSzliLtJ+51jwfPDAQBJqxAYPUoNMDjoEfNGmc6HwtD6WsmrLC5xUPeYNhMibw+nF8YOhcyYYXNJdxYIjwe4YYV4fFFXhMmrLC5pG8dkDwubFo1pj7pN4BRDiINk/OZsMLkDdJl6TcApSNsWjWmPlRhYu/6xrQ9pFYzYYXJMWo/MFilpEuYdG0UXYa+CmgjjWJt6O1kwgqTi6hiZu9nw6QR6zJ2FzD3OuMQEgSYsELiCEON9vOArr8OXCOKdMfsK0adLKF2Aa0nGd1tPA99FpIK6mV3AUIBEsshmg8DqKaV10HlkmmnIzWz7lWiH1A6vUqtPX/yUWDmqdrP8RN1QYAJqy4w21ykey3QdobNh50/Jqeegr7vO5DZPYu75jSvgDJwddU6VRVX1FOgUsx66sViQb/SrjlGYGrXR9xFo2d3QM7+EZBzVsnkQtccpR0iudps+RXUSP0OmLgvKOks1yECTFgOAQv0cUrHobScAIY+9A3oo/8JoeTbYxldcxbnEoqeT0KpVXO9VL/se9BHbjcbRpS09So0jzCbW1Bycj9Ez1pHaT9y9hWI9Ob5XXPK5RI2HQQ0Hx4AajDTcyhNh0coEGDCCoUb8koMXG+ks/g99NG7oQ99q3y/wJK+hIWuN8rAlRDViuYVFNRT0Pf+G6RG1RNKuu6U6UtoEJjaB6X/s/Z2Wuk3IVO/X9R1Z1FfwkL/QzrSemmqWgn07A5g+Dt+u4TluUSACcslcIFMG/yqq76DVXXJ7kDubatWu9Fkomk5jDIvLauB9GZQPSzk9pnkQD8KVWz4Uc2KDfrofwCp/5tHhKL9NKDleBjtbOY2AXN/KFZrMAix/VSIjurdeIyehBM/n38EpLs2IiXqIE3J0NntkHrG2DGa1SaSoPZkxm8/B/UtHOIvt35C6kUWE5YX9Pyee8C3AbGg64zHNWgHpI/+pNjfjwhDXf7D+RfW+jT03TdAn32tpKnExVD6q1SM0FPQdl45ry6V6LsCopXIyhpybhPk+M/mVVsQS66tSiySSJA+DBhElDCI06gBL5pKBOcgZ/8AoU9a5WualgPNVMPexyFngT1f8lEgi/KCABOWF/T8nrvsh35LhLblo5Bzfy4erRKHP2nssBaN3B5o2y61LuOTR0JZfmtFfah4nz58i0Vw7WdA0K6tzDB2S3OvF++iRPffmrulCkPSlzlKPi7U0eq6EFDaFz9NfRRn/9fa4dFXw5YTfMcQu6/2XyZLdIUAE5Yr2AKaFABhmV1zzKOeSB4D9dCHKyqvbVsL5Ibddc3p/zxEa3mykNTZZpIqeJp9Ce13zTEv69F5QWXAqQyMnrXuurx0zam0ChNWQC+8c7FMWM4xC25G0ITVcizUQ+huqPwwdljavuJRTD30V5V3QSVtvgwiqkFYmHzM6ktou80XEdYA0PmhKoT1glmO2SBlJZg6YkxYwb3zDiUzYTkELNDHAyAsbctH8kdC83K62pEwt3WtdcRrWQVl+W1VjoSvQB/+d6svYY0joZx7zTridV9SNVBVTjwK6HQkNO+wRLUjYeoF6w6LjoQVdnme/MaE5Qk+PyczYfmJpldZgV26b7C64bSfBmX5D8pcuq+HQSpGmIAC0W3/0r1QE170XwFhfCEsGelN0MeoQ7QV9iCWXGPz0t2sBS8TB5hVSxdcutMXyEL7MEPvBF+6e30Fwz6fCStMHqpDWINxl9W0EqLvMojkUTA630z+CsgNFS/FoXZCXXGH7bAGM37LJCSF7pCItCgyPb0Fkkil8LXPRVhDkUBLwxpyo0YbLqmnzTsxOg4qzUaKEYc1hOmF9l8XJiz/MXUvsQ6BoxSHJYUCYUS6K1YcUyFKXahQ+p0FjoJilQrEkd+hzW8akd8pqb1Q+tc5ChwtFygqiXQX6t/MgaPuX7zozGTCCpOvgkzN2Xsz9LGfLiIWg8BKd0iUmjNQo9FpKWaUmjNMnZ0nrB1amUh3MzXnUmepOamXAUqmLpFXNtKdUnOSRwTjSU7NCQZXl1KZsFwCF8i0oJOfp5+CPvRtyNze/A6lJJeQot8Hb4RofZ9z0/LJzzL1UkkqjdWXEHQh33GuvZ3VwtXzyc9CpvM7wpK+hBSb1XKct448tazl5OdaCNX1/5mw6gp3jcXqWF5Gpl4BpcCY5WVO9r+8DKXmNFF5mcP9Ky+To0J6uXx5mQEuLxOmd7dOujBh1QloW8twAT9bMNX1IS7gV1e4ay3GhFULoXr+P5dIrifa9tbiEsn2cKrTU0xYdQLa9jLchMI2VIE/yE0oAofY6QJMWE4RC/p5bvMVNML25XObL/tY1elJJqw6AW17GW6kahuqwB/kRqqBQ+x0ASYsp4gF/Ty3qg8aYfvyuVW9fazq9CQTVp2AdrTM4NcAtdvRFH7YZwSoHtfQV3wWyuK8IsCE5RXBIOZ3XxpMmRQAVBxPn3oamHvVbPOV6AFa10DpOBui88PurdFGIKefgcy8C2R3mwGkiRUQySPMxGUqbex2ZLaauYO5UQjokCIJQZ1yEkuDqeNOelKdrYl73WrM8wJCgAkrIGA9iaXOOZSm4+fI7oS28yqjhnvFXMLkaqjLvu4ofYZUlNNPQU48tKBrjhmRXuya0/VRiLZTnFmkzwAzz0NqE/NKMc/LJSTCpfg14UPvw1LtqFMOpeXwCBUCTFihckeJMj4eC2V2B7StFwHaTM1cQtpxqSvurFmpoaCpHL8X+vTTNrrmqBBtp0FUK8ZX6gtqRDH5SwB67VxCajzRdrJ/pMXHwbD+VYAJK6yu6fw4QF8MfRjalgsh02+Zda4KfQnpjix5NJB5B9BT84hMtJwI5cDv1lzZKE1DPQkXJjs3rTAJLLvX2mEVys/0/T1Aycq1xuQv8jsrq46WeRTsBbRp2teZ6xa65qh95k7LjzH9JEBfCHmEDgEmrNC5JK9QYhmw5AbP2lFHZm3Xl63CfIkeiP4rofR+uihbH78PcvTHkHqqWHFUGbweorN6Oy5t1xch9HGr9HHzaih9lxn9B42hjRlHRZnZZnXtoaoNtRq10rE19YJ1xCSiIjIqrciQ2WbclwmDuPLtyZJHAolBz5hh3zeNOzMe4UOACSt8PrE08iGIVN+xDvrUxiJhqUvXQ/RetshqOf4A9JFbLWJrPxPK0ir9+DLboe29yWpNn1hiVHuAsqBNmT5nyBV0xMuXsRF9n6lKLHQnhuxOq6QyFeYjMlo4MtuB7DvmTotIi+q/J4/y5tG5N4CxO73J4NmBIcCEFRi0PgimI1vf5zwJyr11gnmEov5+SjcSR75YUV7u7bMtAlK7oR7yYMVn5dSvoY9T6WOznpbSs9YsIVNmyOmNkDO/tQio44MQbWsqyx67h7Zn+SNfq1GuueIg2YV2YKIZaPuAJ7wwejuQftObDJ4dGAJMWIFB65Pg/quBZvfF6ea1+Wo7BepBGyoqpu38AkDpKPmSxk665ijUHLXcLohWy2yBHNtgFfhrP8tsjFphyNG7rcarTcuACkRoTJ99FdAnrTpcbae7Bz6zGRi5xf18nhk4AkxYgUPscQGPJWdybx0PaPlLdbUHiVXUWr78mL/D6oJ6CIUqlB/Od1jPWX0Ja+2wSo+EVCO+Wjfn6Y0ld10ed1ijdwDpP3l0GE8PEgEmrCDR9Us2HQvpeOhi1O8OaxDK4PoKd1i3QehTtu+wDDOz7wFKB6D2VrbazzssIioiLB6hRoAJK9TuyStHO4z+f3GlqfmV8EslX+l6818JP1WUp4/fDzqGOf9KeB1EsZa7ClT9SpgPJE30Get7HiVfCYt3WF6+EnLeoGeX1EMAE1Y9UPZjje5LgLazXEnStnwMMr15QRxWj7lrK7bhytdKp440nuOwVkLITEkcVSHiXYFiNw6rnKUUM5YbMsIljK+CfsVhzTwLTFY+/roCnScFggATViCwBiCUormX/KurpGgj0n3LRQCluixox7Wwa46gr4Mr7wog0j0B0Xaq/Uj3hRBq40auYtmuOcbXwTXuIt2J/PbdnG93H4DfWKSvCDBh+QpnwMIoHqnnH9wtYuQS/jOQfrtyLmHrSVCX3uB/LqHSBtFxnkFYrkd2F2TqRZOwSvsSUuxVy9HuyIqUGbvbSATnEQ0EmLCi4SdLS4+twOTEI9CnnwEorYYi2ylFp42qNZzjuVqDIZeObdk9/lZryFtPqUAiu9O/ag2p54GJ+6P2BjS0vkxYkXO/AIwO0csjp3moFKavkMOUL0mpPTyiggATVlQ8VaonJQ8PXJNPSYmiAftbZw0Y/r4ZOsEjUggwYUXKXSXKtq4Bei6Pqvb7V+/xDcDsy/tXB17dFQJMWK5gC8mkjvOBzgtDokxE1ODGEhFxVHk1mbAi7T4AXRcB7eWTjqNumu/6z2wEJh/xXSwLrB8CTFj1wzq4lTwElQanVMgkp54DJh4ImVKsjlMEmLCcIhbW55m0KnuGySqsb61jvZiwHEMW4gl8PFzsHD4GhviFda4aE5ZzzMI9gztHW/7hC/Zwv6sutGPCcgFa6KcYIQ9UjYEShBtxaMD4PRy6EEPXM2HF0KmGSU0rAWrISr8baVAwKDVA5aDQWHqdCSuWbi0YJQDjMr5yOeJYmW/kBtKXQE63iZVfS4xhwoqrZ0vtajnRjNeqVr0zyjhQiRiKr+KqC1H2oi3dmbBswRSDh6hmFEXFt58dA2NKTKDie1OPcz2reHm1ojVMWA3i6KKZTQcDnRcAyWOjbTnVYJ96Ashui7YdrL0jBJiwHMEVo4eJsKh9VvOqaBlFrbioUw53t4mW33zSlgnLJyAjK4bqulOt+Jbjwm0CdWSmiHVuchpuPwWsHRNWwABHRnxiGdD6fvOHqpCGYWgTwOxL5k9udxg0Yh32MwJMWPvZAaFcPnkM0HK8ec9Vb/IikqLj3txrQHpTKOFhpfYfAkxY+w/7aKxMl/TJVUDzYUDTIWZzUz+HPg1ktwKZdwFqRcaX6H6iGztZTFixc2nABqn9QNOBgDoIUMcaiu1SugClHVBaANE6XwE5C+hzZosxfdLsKZgbBrQhILsL0EYCVpjFxwkBJqw4eZNtYQRijgATVswdzOYxAnFCgAkrTt5kWxiBmCPAhBVzB7N5jECcEGDCipM32RZGIOYIMGHF3MFsHiMQJwSYsOLkTbaFEYg5AkxYMXcwm8cIxAkBJqw4eZNtYQRijgATVswdzOYxAnFCgAkrTt5kWxiBmCPAhBVzB7N5jECcEGDCipM32RZGIOYIMGHF3MFsHiMQJwSYsOLkTbaFEYg5AkxYMXcwm8cIxAkBJqw4eZNtYQRijgATVswdzOYxAnFCgAkrTt5kWxiBmCPAhBVzB7N5jECcEGDCipM32RZGIOYIMGHF3MFsHiMQJwT+Hya1Ckz4JrKJAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/soon.4608d02c.png\";","module.exports = __webpack_public_path__ + \"static/media/idea.9f6804c4.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__2f1W5\"};","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst style = makeStyles(theme => ({\r\n    root: {\r\n        display: 'flex',\r\n    },\r\n    drawer: {\r\n        [theme.breakpoints.up('sm')]: {\r\n            width: drawerWidth,\r\n            flexShrink: 0,\r\n        },\r\n    },\r\n    appBar: {\r\n        [theme.breakpoints.up('sm')]: {\r\n            width: `calc(100% - ${drawerWidth}px)`,\r\n            marginLeft: drawerWidth,\r\n        },\r\n        boxShadow: theme.shadows[2],\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n        [theme.breakpoints.up('sm')]: {\r\n            display: 'none',\r\n        },\r\n    },\r\n    appBarButton: {\r\n        borderRadius: '0 !important',\r\n        padding: '0px !important',\r\n        margin: '0 5px !important'\r\n    },\r\n    appBarLink: {\r\n        display: 'inherit',\r\n        padding: '8px',\r\n    },\r\n    toolbar: theme.mixins.toolbar,\r\n    drawerPaper: {\r\n        width: drawerWidth,\r\n        background: theme.palette.primary.main,\r\n        border: 'none',\r\n        boxShadow: theme.shadows[3]\r\n    },\r\n    content: {\r\n        flexGrow: 1,\r\n    },\r\n    activeLink: {\r\n        background: 'white !important',\r\n        boxShadow: theme.shadows[3],\r\n        fontWeight: '600',\r\n        transition: '.2s all !important',\r\n        \"&:hover\": {\r\n            background: 'white !important',\r\n            boxShadow: theme.shadows[5],\r\n        }\r\n    },\r\n    nestedLink: {\r\n        paddingLeft: theme.spacing(4) + 'px !important',\r\n    },\r\n    nestedLinkActive: {\r\n        background: 'rgba(0, 0, 0, 0.08) !important',\r\n    }\r\n}));\r\n\r\nexport default style;","import React from 'react';\r\n\r\nimport Logo from '../../../../../assets/images/logo.png';\r\nimport useStyles from '../../../styles';\r\nimport cssClasses from './DrawerLogo.module.css';\r\n\r\nconst DrawerLogo = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.toolbar}>\r\n            <img src={Logo} alt='ICON' width='100%' />\r\n            <div className={cssClasses.titleBlock}>\r\n                <p className={cssClasses.logoTitle}>PILLPLATE</p>\r\n                <p className={cssClasses.logoSubTitle}>SORT YOUR GARBAGE</p>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DrawerLogo;","import React from 'react';\r\nimport { ListItem, ListItemIcon, ListItemText } from '@material-ui/core';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport useStyles from '../../../styles';\r\n\r\nconst DrawerItem = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const RouterLink = React.forwardRef((routeProps, ref) => (\r\n        <NavLink ref={ref} to={props.to} {...routeProps} activeClassName={props.isNested ? classes.nestedLinkActive : classes.activeLink} />\r\n    ));\r\n\r\n    return (\r\n        <ListItem\r\n            button\r\n            className={props.isNested ? classes.nestedLink : null}\r\n            to={props.to}\r\n            component={RouterLink}\r\n            onClick={props.collapseToggle}>\r\n            <ListItemIcon>{props.icon}</ListItemIcon>\r\n            <ListItemText primary={props.text} />\r\n            {props.addTopicBtn}\r\n        </ListItem>\r\n    )\r\n}\r\n\r\nexport default DrawerItem;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst style = makeStyles(theme => ({\r\n    topicTitle: {\r\n        textAlign: 'center',\r\n        fontFamily: 'Lato, sans-serif',\r\n        paddingBottom: 0,\r\n    },\r\n    dialogColorHat: {\r\n        background: theme.palette.primary.main,\r\n        height: '15px',\r\n    },\r\n    agreeBtn: {\r\n        color: theme.palette.primary.dark,\r\n    },\r\n    closeBtn: {\r\n        color: theme.palette.secondary.main,\r\n    },\r\n    topicInput: {\r\n        marginTop: theme.spacing(2),\r\n    }\r\n}));\r\n\r\nexport default style;\r\n","const changeValidationMessage = (isValid, message, currMessage) => {\r\n    if (!isValid && currMessage.length === 0) return message;\r\n    return currMessage;\r\n}\r\n\r\nexport const validation = (string, validationRules, originalEmail) => {\r\n    let isValid = true;\r\n    let validationMessage = '';\r\n\r\n    if (validationRules.isRequred && isValid) {\r\n        isValid = string.length > 0 && isValid;\r\n        validationMessage = changeValidationMessage(isValid, 'Please, fill this field', validationMessage);\r\n    }\r\n\r\n    if (validationRules.isEmail && isValid) {\r\n        const exp = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n        isValid = exp.test(string) && isValid;\r\n        validationMessage = changeValidationMessage(isValid, 'Email is incorrect', validationMessage);\r\n    }\r\n\r\n    if (validationRules.minLength && isValid) {\r\n        isValid = string.length > 3 && isValid;\r\n        validationMessage = changeValidationMessage(isValid, 'Min password length is 4 symbols', validationMessage);\r\n    }\r\n\r\n    if (validationRules.maxLength && isValid) {\r\n        isValid = string.length < validationRules.maxLength && isValid;\r\n        validationMessage = changeValidationMessage(isValid, 'Max length is ' + validationRules.maxLength + ' symbols', validationMessage);\r\n    }\r\n\r\n    if (validationRules.shoudBeEqual && isValid) {\r\n        isValid = string === originalEmail && isValid;\r\n        validationMessage = changeValidationMessage(isValid, 'Please, enter the valid email address', validationMessage);\r\n    }\r\n\r\n    return [isValid, validationMessage];\r\n}\r\n","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n    baseURL: 'https://pill-plate.herokuapp.com'\r\n});\r\n\r\nexport default instance;","import axios from '../../utility/axios-instance';\r\n\r\nimport * as actionTypes from '../actions/actionTypes';\r\n\r\nexport const fetchingStartActionCreator = () => {\r\n    return {\r\n        type: actionTypes.START_FETCHING\r\n    }\r\n}\r\n\r\nexport const errorActionCreator = () => {\r\n    return {\r\n        type: actionTypes.TOPICS_ERROR\r\n    }\r\n}\r\n\r\nexport const getTopicsActionCreator = (topics, socket) => {\r\n    return {\r\n        type: actionTypes.FINISH_FETCHING,\r\n        topics: topics,\r\n        socket: socket,\r\n    }\r\n}\r\n\r\nexport const createTopicActionCreator = (topic, socket) => {\r\n    return {\r\n        type: actionTypes.ADD_TOPIC,\r\n        topic: topic,\r\n        socket: socket,\r\n    }\r\n}\r\n\r\nexport const editTopicActionCreator = (topic, handleOpenSnackbar) => {\r\n    handleOpenSnackbar();\r\n\r\n    return {\r\n        type: actionTypes.EDIT_TOPIC,\r\n        topic: topic\r\n    }\r\n}\r\n\r\nexport const setCurrentTopicActionCreator = (topicId) => {\r\n    return {\r\n        type: actionTypes.SET_CURRENT_TOPIC,\r\n        topicId: topicId\r\n    }\r\n}\r\n\r\nexport const leaveTopicActionCreator = (topicId, socket) => {\r\n    return {\r\n        type: actionTypes.DELETE_TOPIC,\r\n        topicId: topicId,\r\n        socket: socket,\r\n    }\r\n}\r\n\r\nexport const onLogoutTopicsClearActionCreator = () => {\r\n    return {\r\n        type: actionTypes.LOGOUT_TOPICS,\r\n    }\r\n}\r\n\r\nexport const getTopicsAction = (socket) => {\r\n    return (dispatch, getState) => {\r\n        dispatch(fetchingStartActionCreator());\r\n\r\n        const userId = getState().auth.id;\r\n\r\n        axios.get('/topics/' + userId)\r\n            .then(topics => {\r\n                dispatch(getTopicsActionCreator(topics.data, socket));\r\n            })\r\n            .catch(error => dispatch(errorActionCreator()))\r\n    }\r\n}\r\n\r\nexport const createTopicAction = (topic, socket, handleOpenSnackbar) => {\r\n    return (dispatch, getState) => {\r\n        axios.post('/topics', topic)\r\n            .then(topic => {\r\n                dispatch(createTopicActionCreator(topic.data, socket));\r\n                handleOpenSnackbar();\r\n            })\r\n            .catch(error => dispatch(errorActionCreator()))\r\n    }\r\n}\r\n\r\nexport const editTopicAction = (topic) => {\r\n    return (dispatch, getState) => {\r\n        const updatedData = {\r\n            name: topic.name,\r\n            note: topic.note,\r\n        }\r\n\r\n        axios.patch('/topics/single/' + topic._id, updatedData)\r\n            .catch(error => dispatch(errorActionCreator()))\r\n    }\r\n}\r\n\r\nexport const leaveTopicAction = (topicId, handleOpenSnackbar, socket) => {\r\n    return (dispatch, getState) => {\r\n        const userId = getState().auth.id\r\n\r\n        axios.post('/topics/single/leave/' + topicId, { userId })\r\n            .then(res => {\r\n                dispatch(leaveTopicActionCreator(topicId, socket));\r\n                handleOpenSnackbar();\r\n            })\r\n            .catch(error => dispatch(errorActionCreator()))\r\n    }\r\n}\r\n","//authorization\r\nexport const SIGN_IN = 'SIGN_IN';\r\nexport const SIGN_UP = 'SIGN_UP';\r\nexport const SIGN_IN_LOCALY = 'SIGN_IN_LOCALY';\r\nexport const AUTH_ERROR = 'AUTH_ERROR';\r\nexport const AUTH_START = 'AUTH_START';\r\nexport const LOAD_FINISH = 'LOAD_FINISH';\r\nexport const REFRESH_TOKEN = 'REFRESH_TOKEN';\r\nexport const RESET_TIMEOUT_ID = 'RESET_TIMEOUT_ID';\r\nexport const LOGOUT = 'LOGOUT';\r\n\r\n//topics\r\nexport const GET_TOPICS = 'GET_TOPICS';\r\nexport const START_FETCHING = 'START_FETCHING';\r\nexport const TOPICS_ERROR = 'TOPICS_ERROR';\r\nexport const FINISH_FETCHING = 'FINISH_FETCHING';\r\nexport const ADD_TOPIC = 'ADD_TOPIC';\r\nexport const DELETE_TOPIC = 'DELETE_TOPIC';\r\nexport const EDIT_TOPIC = 'EDIT_TOPIC';\r\nexport const SET_CURRENT_TOPIC = 'SET_CURRENT_TOPIC';\r\nexport const SUBSCRIBE_USER_TO_ROOMS = 'SUBSCRIBE_USER_TO_ROOMS';\r\nexport const LOGOUT_TOPICS = 'LOGOUT_TOPICS';\r\n\r\n//socket.io\r\nexport const CONNECT_SOCKET = 'CONNECT_SOCKET';\r\nexport const DISCONNECT_SOCKET = 'DISCONNECT_SOCKET';\r\n\r\n//messages\r\nexport const MESSAGE_ERROR = 'MESSAGE_ERROR';\r\nexport const MESSAGE_SAVE = 'MESSAGE_SAVE';\r\nexport const START_MESSAGES_SAVING = 'START_MESSAGES_SAVING';\r\nexport const FINISH_MESSAGES_SAVING = 'FINISH_MESSAGES_SAVING';\r\nexport const START_MESSAGES_FETCHING = 'START_MESSAGES_FETCHING';\r\nexport const FINISH_MESSAGES_FETCHING = 'FINISH_MESSAGES_FETCHING';\r\nexport const FETCH_MESSAGES = 'FETCH_MESSAGES';\r\nexport const EDIT_MESSAGE = 'EDIT_MESSAGE';\r\nexport const REMOVE_MESSAGE = 'REMOVE_MESSAGE';\r\nexport const START_MESSAGES_RECIVE = 'START_MESSAGES_RECIVE';\r\nexport const FINISH_MESSAGES_RECIVE = 'FINISH_MESSAGES_RECIVE';\r\nexport const LOGOUT_MESSAGES = 'LOGOUT_MESSAGES';\r\n\r\n","import React, { useState } from 'react';\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Slide,\r\n    TextField,\r\n    Snackbar\r\n} from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\n\r\nimport useStyles from './styles';\r\nimport { validation } from '../../../utility/validation';\r\nimport { createTopicAction } from '../../../store/actions/topics';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst CreateTopic = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [stateInputs, setStateInputs] = useState({\r\n        title: {\r\n            config: {\r\n                name: 'title',\r\n                label: 'Title',\r\n            },\r\n            validationRules: {\r\n                isRequred: true,\r\n                maxLength: 20,\r\n            },\r\n            isValid: false,\r\n            validationMessage: '',\r\n            value: '',\r\n        },\r\n        notes: {\r\n            config: {\r\n                name: 'notes',\r\n                label: 'Notes',\r\n            },\r\n            validationRules: {\r\n                maxLength: 100,\r\n            },\r\n            isValid: true,\r\n            validationMessage: '',\r\n            value: '',\r\n        }\r\n    });\r\n\r\n    const [openSnackbar, setOpenSnackbar] = useState(false);\r\n\r\n    const handleCloseSnackbar = () => {\r\n        setOpenSnackbar(false);\r\n    }\r\n\r\n    const handleOpenSnackbar = () => {\r\n        setOpenSnackbar(true);\r\n    }\r\n\r\n    const clearState = () => {\r\n        setStateInputs(prevState => {\r\n            return {\r\n                ...prevState,\r\n                title: {\r\n                    ...prevState.title,\r\n                    isValid: false,\r\n                    validationMessage: '',\r\n                    value: '',\r\n                },\r\n                notes: {\r\n                    ...prevState.notes,\r\n                    isValid: true,\r\n                    validationMessage: '',\r\n                    value: '',\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    const createTopicHandler = () => {\r\n        const newTopic = {\r\n            creatorId: props.userId,\r\n            name: stateInputs.title.value,\r\n            note: stateInputs.notes.value,\r\n        }\r\n\r\n        //close and clear dialog\r\n        props.handleClose();\r\n        clearState();\r\n\r\n        //create topic\r\n        props.startCreatingTopic(newTopic, props.socket, handleOpenSnackbar);\r\n    }\r\n\r\n    const onInputHandler = (inputName, event) => {\r\n        const newValue = event.target.value;\r\n\r\n        const [currentValid, newValidationMessage] = validation(\r\n            newValue,\r\n            stateInputs[inputName].validationRules,\r\n            null\r\n        );\r\n\r\n        setStateInputs(prevState => ({\r\n            ...prevState,\r\n            [inputName]: {\r\n                ...prevState[inputName],\r\n                value: newValue,\r\n                isValid: currentValid,\r\n                validationMessage: newValidationMessage\r\n            }\r\n        }));\r\n    }\r\n\r\n    let inputs = [];\r\n    let fieldsIsValid = true;\r\n\r\n    for (let key in stateInputs) {\r\n        inputs.push(\r\n            <TextField\r\n                key={key}\r\n                className={classes.topicInput}\r\n                label={stateInputs[key].config.label}\r\n                name={stateInputs[key].config.name}\r\n                fullWidth\r\n                color=\"primary\"\r\n                value={stateInputs[key].value}\r\n                onInput={onInputHandler.bind(this, key)}\r\n                error={!stateInputs[key].isValid && stateInputs[key].value.length > 0}\r\n                helperText={stateInputs[key].validationMessage}\r\n            />\r\n        );\r\n\r\n        fieldsIsValid = stateInputs[key].isValid && fieldsIsValid;\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Dialog\r\n                open={props.open}\r\n                TransitionComponent={Transition}\r\n                keepMounted\r\n                maxWidth={'xs'}\r\n                onClose={() => {\r\n                    clearState();\r\n                    props.handleClose();\r\n                }}\r\n                aria-labelledby=\"alert-dialog-slide-title\"\r\n                aria-describedby=\"alert-dialog-slide-description\"\r\n            >\r\n                <div className={classes.dialogColorHat}></div>\r\n                <DialogTitle id=\"alert-dialog-slide-title\" className={classes.topicTitle}>{\"Create Topic\"}</DialogTitle>\r\n                <DialogContent>\r\n                    {inputs}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button className={classes.closeBtn} onClick={props.handleClose}>Disagree</Button>\r\n                    <Button disabled={!fieldsIsValid} className={classes.agreeBtn} onClick={createTopicHandler}>Agree</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n            <Snackbar\r\n                anchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\r\n                open={openSnackbar}\r\n                onClose={handleCloseSnackbar}\r\n                message={'Topic was created'}\r\n            />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        userId: state.auth.id,\r\n        socket: state.sckt.socket,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        startCreatingTopic: (topic, socket, handleOpenSnackbar) => { dispatch(createTopicAction(topic, socket, handleOpenSnackbar)) }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateTopic);\r\n","import React, { useState } from 'react';\r\nimport { Divider, List, Collapse } from '@material-ui/core';\r\nimport LinkRoundedIcon from '@material-ui/icons/LinkSharp';\r\nimport NoteRoundedIcon from '@material-ui/icons/NoteSharp';\r\nimport PhotoCameraRoundedIcon from '@material-ui/icons/PhotoCameraSharp';\r\nimport DescriptionRoundedIcon from '@material-ui/icons/DescriptionSharp';\r\nimport MenuOpenIcon from '@material-ui/icons/MenuOpenSharp';\r\nimport VideoLibraryRoundedIcon from '@material-ui/icons/VideoLibrarySharp';\r\nimport DeleteRoundedIcon from '@material-ui/icons/DeleteSharp';\r\nimport MenuIcon from '@material-ui/icons/MenuSharp';\r\nimport { IconButton, ListItemSecondaryAction } from '@material-ui/core';\r\nimport AddBoxIcon from '@material-ui/icons/AddBoxSharp';\r\n\r\nimport DrawerLogo from './DrawerLogo/DrawerLogo';\r\nimport DrawerItem from './DrawerItem/DrawerItem';\r\nimport CreateTopicDialog from '../../../UI/Dialog/CreateTopic';\r\n\r\nconst DriwerItems = () => {\r\n    const [collapseOpen, setCollapseOpen] = useState(false);\r\n\r\n    const [addTopicDialogOpen, setTopicDialogOpen] = useState(false);\r\n\r\n    const dialogOpen = () => {\r\n        setTopicDialogOpen(true)\r\n    }\r\n\r\n    const dialogClose = () => {\r\n        setTopicDialogOpen(false)\r\n    }\r\n\r\n    const addTopicButton = (\r\n        <ListItemSecondaryAction onClick={dialogOpen}>\r\n            <IconButton>\r\n                <AddBoxIcon />\r\n            </IconButton>\r\n        </ListItemSecondaryAction>\r\n    )\r\n\r\n    const collapseClickHandler = () => {\r\n        setCollapseOpen(prevState => !prevState);\r\n    }\r\n\r\n    const collapseCloseClickHandler = () => {\r\n        setCollapseOpen(false);\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <CreateTopicDialog open={addTopicDialogOpen} handleClose={dialogClose} />\r\n\r\n            <div>\r\n                <DrawerLogo />\r\n\r\n                <List>\r\n                    <DrawerItem\r\n                        text='Topics'\r\n                        to={'/pulp/topics'}\r\n                        icon={collapseOpen ? <MenuOpenIcon /> : <MenuIcon />}\r\n                        addTopicBtn={addTopicButton}\r\n                        collapseToggle={collapseClickHandler}\r\n                    />\r\n\r\n                    <Collapse in={collapseOpen} timeout=\"auto\" unmountOnExit>\r\n                        <List component=\"div\" disablePadding>\r\n                            <DrawerItem text='Links' to={'/pulp/topics/links'} icon={<LinkRoundedIcon />} isNested />\r\n                            <DrawerItem text='Photos' to={'/pulp/topics/photos'} icon={<PhotoCameraRoundedIcon />} isNested />\r\n                            <DrawerItem text='Videos' to={'/pulp/topics/videos'} icon={<VideoLibraryRoundedIcon />} isNested />\r\n                            <DrawerItem text='Files' to={'/pulp/topics/files'} icon={<DescriptionRoundedIcon />} isNested />\r\n                            <DrawerItem text='Notes' to={'/pulp/topics/notes'} icon={<NoteRoundedIcon />} isNested />\r\n                        </List>\r\n                    </Collapse>\r\n                </List>\r\n\r\n                <Divider />\r\n\r\n                <List>\r\n                    <DrawerItem text='Draft' to={'/pulp/draft'} icon={<DeleteRoundedIcon />} collapseToggle={collapseCloseClickHandler} />\r\n                </List>\r\n            </div>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default DriwerItems;","import React from 'react';\r\nimport { Drawer, Hidden } from '@material-ui/core';\r\n\r\nimport useStyles from '../styles';\r\nimport DrawerItems from './DrawerItems/DriwerItems';\r\n\r\nconst DrawerBlock = (props) => {\r\n    const classes = useStyles();\r\n    const { container } = props;\r\n\r\n    return (\r\n        <nav className={classes.drawer} aria-label=\"mailbox folders\">\r\n            <Hidden smUp implementation=\"css\">\r\n                <Drawer\r\n                    container={container}\r\n                    variant='temporary'\r\n                    open={props.isMobile}\r\n                    onClose={props.handleDrawerToggle}\r\n                    classes={{\r\n                        paper: classes.drawerPaper,\r\n                    }}\r\n                    ModalProps={{\r\n                        keepMounted: true,\r\n                    }}\r\n                >\r\n                    <DrawerItems />\r\n                </Drawer>\r\n            </Hidden>\r\n            <Hidden xsDown implementation=\"css\">\r\n                <Drawer\r\n                    classes={{\r\n                        paper: classes.drawerPaper,\r\n                    }}\r\n                    variant=\"permanent\"\r\n                    open\r\n                >\r\n                    <DrawerItems />\r\n                </Drawer>\r\n            </Hidden>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default DrawerBlock;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport const ReactLink = React.forwardRef((routeProps, ref) => (\r\n    <Link ref={ref} {...routeProps} />\r\n));","import React from 'react';\r\nimport { IconButton, Typography, Link } from '@material-ui/core';\r\n\r\nimport useStyles from '../../styles';\r\nimport { ReactLink } from '../../../UI/Link/Link';\r\n\r\nconst AppBarLink = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <IconButton\r\n            edge=\"start\"\r\n            onClick={props.logout}\r\n            className={classes.appBarButton}\r\n        >\r\n            <Link\r\n                component={ReactLink}\r\n                to={props.link}\r\n                color=\"inherit\"\r\n                underline=\"none\"\r\n                className={classes.appBarLink}\r\n            >\r\n                {props.icon}\r\n                <Typography variant=\"body1\" noWrap>{props.text}</Typography>\r\n            </Link>\r\n        </IconButton>\r\n    )\r\n}\r\n\r\nexport default AppBarLink;","import React from 'react';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\n\r\nimport useStyles from '../../styles';\r\n\r\nconst DrawerButton = (props) => {\r\n    const classes = useStyles();\r\n    return (\r\n        <IconButton\r\n            color=\"inherit\"\r\n            aria-label=\"open drawer\"\r\n            edge=\"start\"\r\n            onClick={props.handleDrawerToggle}\r\n            className={classes.menuButton}\r\n        >\r\n            <MenuIcon />\r\n        </IconButton>\r\n    )\r\n}\r\n\r\nexport default DrawerButton;","import axios from '../../utility/axios-instance';\r\n\r\nimport * as actionTypes from './actionTypes';\r\n\r\nconst errorActionCreator = (error) => {\r\n    return {\r\n        type: actionTypes.AUTH_ERROR,\r\n        err: error\r\n    }\r\n}\r\n\r\nexport const startActionCreator = () => {\r\n    return {\r\n        type: actionTypes.AUTH_START\r\n    }\r\n}\r\n\r\nexport const finishLoadingActionCreator = () => {\r\n    return {\r\n        type: actionTypes.LOAD_FINISH\r\n    }\r\n}\r\n\r\nexport const signInActionCreator = (token, rememberData) => {\r\n    return {\r\n        type: actionTypes.SIGN_IN,\r\n        token: token,\r\n        remember: rememberData\r\n    }\r\n}\r\n\r\nexport const signUpActionCreator = (token) => {\r\n    return {\r\n        type: actionTypes.SIGN_UP,\r\n        token: token\r\n    }\r\n}\r\n\r\nexport const signInLocalActionCreator = () => {\r\n    return {\r\n        type: actionTypes.SIGN_IN_LOCALY\r\n    }\r\n}\r\n\r\nexport const refreshTokenActionCreator = (token) => {\r\n    return {\r\n        type: actionTypes.REFRESH_TOKEN,\r\n        token: token\r\n    }\r\n}\r\n\r\nexport const newTimeoutIdActionCreator = (timerId) => {\r\n    return {\r\n        type: actionTypes.RESET_TIMEOUT_ID,\r\n        id: timerId\r\n    }\r\n}\r\n\r\nexport const logoutActionCreator = () => {\r\n    return {\r\n        type: actionTypes.LOGOUT\r\n    }\r\n}\r\n\r\nexport const signInLocalAction = () => {\r\n    return dispatch => {\r\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + localStorage.getItem('token');\r\n        \r\n        dispatch(signInLocalActionCreator());\r\n\r\n        dispatch(resetTokenTimer());\r\n    }\r\n}\r\n\r\nexport const signUpAction = (user) => {\r\n    return dispatch => {\r\n        dispatch(startActionCreator());\r\n\r\n        axios.post('/user/signup', user)\r\n            .then(token => {\r\n                axios.defaults.headers.common['Authorization'] = 'Bearer ' + token.data;\r\n\r\n                dispatch(signUpActionCreator(token));\r\n                dispatch(resetTokenTimer());\r\n            })\r\n            .catch(err => {\r\n                dispatch(errorActionCreator(err))\r\n            });\r\n    }\r\n}\r\n\r\nexport const signInAction = (user, rememberData) => {\r\n    return dispatch => {\r\n        dispatch(startActionCreator());\r\n\r\n        axios.post('/user/signin', user)\r\n            .then(token => {\r\n                axios.defaults.headers.common['Authorization'] = 'Bearer ' + token.data;\r\n\r\n                dispatch(signInActionCreator(token, rememberData));\r\n                dispatch(resetTokenTimer());\r\n            })\r\n            .catch(err => {\r\n                dispatch(errorActionCreator(err))\r\n            });\r\n    }\r\n}\r\n\r\nexport const resetTokenTimer = () => { //set token auto-refreshing\r\n    return (dispatch, getState) => {\r\n        clearTimeout(getState().auth.refreshTimerId);\r\n\r\n        let delay = (getState().auth.expirationTime - Math.floor((new Date().getTime() / 1000))) * 1000 - 30 * 1000;\r\n\r\n        if (delay < 0) delay = 15 * 1000;\r\n\r\n        const timerId = setTimeout(\r\n            () => {\r\n                const token = {\r\n                    token: getState().auth.token\r\n                }\r\n\r\n                try {\r\n                    dispatch(refreshTokenAction(token));\r\n                } catch (error) {\r\n                    console.log(error)\r\n                }\r\n            }, delay\r\n        );\r\n        dispatch(newTimeoutIdActionCreator(timerId));\r\n    }\r\n}\r\n\r\nexport const refreshTokenAction = (token) => {\r\n    return (dispatch, getState) => {\r\n        axios.post('/user/refresh-token', token)\r\n            .then(newToken => {\r\n                axios.defaults.headers.common['Authorization'] = 'Bearer ' + newToken.data;\r\n\r\n                dispatch(refreshTokenActionCreator(newToken)); //refreshing token\r\n\r\n                if (!getState().auth.id) dispatch(signInLocalAction()); //if user is not auth we try to login auto\r\n                else dispatch(resetTokenTimer());\r\n            })\r\n            .catch(err => {\r\n                dispatch(errorActionCreator(err));\r\n                dispatch(logoutActionCreator());\r\n            });\r\n    }\r\n}","export const getExtension = (filename) => {\r\n    var parts = filename.split('.');\r\n    return parts[parts.length - 1];\r\n}\r\n\r\nexport const isVideo = (filename) => {\r\n    var ext = getExtension(filename);\r\n    switch (ext.toLowerCase()) {\r\n        case 'm4v':\r\n        case 'avi':\r\n        case 'mpg':\r\n        case 'mp4':\r\n            return true;\r\n\r\n        default:\r\n            return false;\r\n    }\r\n}\r\n\r\nexport const isImage = (filename) => {\r\n    var ext = getExtension(filename);\r\n    switch (ext.toLowerCase()) {\r\n        case 'jpg':\r\n        case 'jpeg':\r\n        case 'gif':\r\n        case 'bmp':\r\n        case 'png':\r\n            return true;\r\n\r\n        default:\r\n            return false;\r\n    }\r\n}","import axios from '../../utility/axios-instance';\r\n\r\nimport * as actionTypes from '../actions/actionTypes';\r\nimport * as fileTypeCheck from '../../utility/filetype-check';\r\nimport * as messageTypes from '../../utility/message-types';\r\n\r\nexport const errorActionCreator = (error) => {\r\n    return {\r\n        type: actionTypes.MESSAGE_ERROR,\r\n        err: error\r\n    }\r\n}\r\n\r\nexport const startMessageFetchActionCreator = () => {\r\n    return {\r\n        type: actionTypes.START_MESSAGES_FETCHING,\r\n    }\r\n}\r\n\r\nexport const finishMessageFetchActionCreator = () => {\r\n    return {\r\n        type: actionTypes.FINISH_MESSAGES_FETCHING,\r\n    }\r\n}\r\n\r\nexport const startMessageReciveActionCreator = () => {\r\n    return {\r\n        type: actionTypes.START_MESSAGES_RECIVE,\r\n    }\r\n}\r\n\r\nexport const finishMessageReciveActionCreator = () => {\r\n    return {\r\n        type: actionTypes.FINISH_MESSAGES_RECIVE,\r\n    }\r\n}\r\n\r\nexport const saveMessageActionCreator = (message) => {\r\n    return {\r\n        type: actionTypes.MESSAGE_SAVE,\r\n        message: message,\r\n    }\r\n}\r\n\r\nexport const fetchMessagesActionCreator = (messages, topicId) => {\r\n    return {\r\n        type: actionTypes.FETCH_MESSAGES,\r\n        messages: messages,\r\n        topicId: topicId,\r\n    }\r\n}\r\n\r\nexport const startSendingMessageActionCreator = () => {\r\n    return {\r\n        type: actionTypes.START_MESSAGES_SAVING,\r\n    }\r\n}\r\n\r\nexport const finishSendingMessageActionCreator = () => {\r\n    return {\r\n        type: actionTypes.FINISH_MESSAGES_SAVING,\r\n    }\r\n}\r\n\r\nexport const editRecivedMessageActionCreator = (message) => {\r\n    return {\r\n        type: actionTypes.EDIT_MESSAGE,\r\n        message: message,\r\n    }\r\n}\r\n\r\nexport const removeRecivedMessageActionCreator = (message) => {\r\n    return {\r\n        type: actionTypes.REMOVE_MESSAGE,\r\n        message: message,\r\n    }\r\n}\r\n\r\nexport const onLogoutMessagesClearActionCreator = () => {\r\n    return {\r\n        type: actionTypes.LOGOUT_MESSAGES,\r\n    }    \r\n}\r\n\r\nexport const sendTextMessageAction = (message, socket, messageType) => {\r\n    return (dispatch, getState) => {\r\n        const messageData = {\r\n            creatorId: message.sender,\r\n            text: message.text,\r\n            type: messageType,\r\n            date: Math.floor((new Date().getTime() / 1000)),\r\n        }\r\n\r\n        const topicId = getState().tpc.openedTopicId;\r\n\r\n        axios.post('/topic/messages/text/' + topicId, messageData)\r\n            .then(message => {\r\n                socket.emit('save-message', topicId, message.data);\r\n            })\r\n            .catch(err => {\r\n                dispatch(errorActionCreator(err));\r\n            });\r\n    }\r\n}\r\n\r\nexport const sendFileMessageAction = (message, socket, changeProgress) => {\r\n    return (dispatch, getState) => {\r\n        dispatch(startSendingMessageActionCreator());\r\n        let formData = new FormData();\r\n\r\n        const filename = message.file.name;\r\n\r\n        let fileType = messageTypes.FILE;\r\n        if (fileTypeCheck.isImage(filename)) {\r\n            formData.append('image', message.file, message.file.name);\r\n            formData.append('type', messageTypes.IMAGE);\r\n            fileType = messageTypes.IMAGE;\r\n        }\r\n        else if (fileTypeCheck.isVideo(filename)) {\r\n            formData.append('video', message.file, message.file.name);\r\n            formData.append('type', messageTypes.VIDEO);\r\n            fileType = messageTypes.VIDEO;\r\n        }\r\n        else {\r\n            formData.append('file', message.file, message.file.name);\r\n            formData.append('type', messageTypes.FILE);\r\n        }\r\n\r\n        formData.append('creatorId', message.sender);\r\n        formData.append('date', Math.floor((new Date().getTime() / 1000)));\r\n\r\n        const topicId = getState().tpc.openedTopicId;\r\n\r\n        axios.post('/topic/messages/' + fileType + '/' + topicId, formData, {\r\n            onUploadProgress: progressEvent => {\r\n                const progress = Math.round(progressEvent.loaded / progressEvent.total * 100);\r\n                changeProgress(progress);\r\n            }\r\n        })\r\n            .then(message => {\r\n                dispatch(finishSendingMessageActionCreator());\r\n                socket.emit('save-message', topicId, message.data);\r\n            })\r\n            .catch(err => {\r\n                dispatch(errorActionCreator(err));\r\n            });\r\n    }\r\n}\r\n\r\nexport const fetchMessagesAction = (data) => {\r\n    return dispatch => {\r\n        dispatch(startMessageFetchActionCreator());\r\n\r\n        const limitations = '?skip=' + data.skip + '&limit=' + data.limit;\r\n\r\n        axios.get('/topic/messages/' + data.currTopicId + limitations)\r\n            .then(messages => {\r\n                dispatch(finishMessageFetchActionCreator());\r\n\r\n                if (messages.data.length < 15) data.setAllowToFetch(false);\r\n                dispatch(fetchMessagesActionCreator(messages.data.reverse(), data.currTopicId));\r\n\r\n                data.setSkip(prevState => prevState + messages.data.length);\r\n                data.resolve();\r\n            })\r\n            .catch(err => {\r\n                dispatch(errorActionCreator(err));\r\n            });\r\n    }\r\n}\r\n\r\nexport const editMessageAction = (message, socket, editableMessageId) => {\r\n    return (dispatch, getState) => {\r\n        const topicId = getState().tpc.openedTopicId;\r\n\r\n        axios.patch('/topic/messages/single/text/' + editableMessageId, message)\r\n            .then(message => {\r\n                socket.emit('edit-message', topicId, message.data);\r\n            })\r\n            .catch(err => {\r\n                dispatch(errorActionCreator(err));\r\n            });\r\n    }\r\n}\r\n\r\nexport const removeMessageAction = (messageId, socket) => {\r\n    return (dispatch, getState) => {\r\n        const topicId = getState().tpc.openedTopicId;\r\n\r\n        axios.delete('/topic/messages/single/' + messageId)\r\n            .then(message => {\r\n                socket.emit('delete-message', topicId, message.data);\r\n            })\r\n            .catch(err => {\r\n                dispatch(errorActionCreator(err));\r\n            });\r\n    }\r\n}\r\n\r\nexport const saveMessageAction = (message) => {\r\n    return dispatch => {\r\n        dispatch(startMessageReciveActionCreator());\r\n        dispatch(saveMessageActionCreator(message))\r\n        dispatch(finishMessageReciveActionCreator());\r\n    }\r\n}\r\n\r\nexport const readMessageAction = (userId, messageId) => {\r\n    return dispatch => {\r\n        axios.patch('/topic/messages/single/readers/' + messageId, { wasReadedBy: userId })\r\n            .then(message => {\r\n                dispatch(editRecivedMessageActionCreator(message.data));\r\n            })\r\n            .catch(err => {\r\n                dispatch(errorActionCreator(err));\r\n            })\r\n    }\r\n}\r\n\r\n","export const TEXT = 'text';\r\nexport const LINK = 'link';\r\nexport const FILE = 'file';\r\nexport const IMAGE = 'image';\r\nexport const VIDEO = 'video';","import React from 'react';\r\nimport { AppBar, Toolbar } from '@material-ui/core';\r\nimport { ExitToApp, MailOutline } from '@material-ui/icons';\r\nimport { connect } from 'react-redux';\r\n\r\nimport useStyles from '../styles';\r\nimport AppBarLink from './AppBarLink/AppBarLink';\r\nimport DrawerButton from './MenuButton/MenuButton';\r\nimport { logoutActionCreator } from '../../../store/actions/authorization';\r\nimport { onLogoutMessagesClearActionCreator } from '../../../store/actions/messages';\r\nimport { disconnectSocketActionCreator } from '../../../store/actions/socket';\r\nimport { onLogoutTopicsClearActionCreator } from '../../../store/actions/topics';\r\n\r\nconst AppBarBlock = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const logoutHandler = () => {\r\n        props.logout();\r\n        props.clearSocket();\r\n        props.clearMessages();\r\n        props.clearTopics();\r\n    }\r\n\r\n    return (\r\n        <AppBar position=\"fixed\" className={classes.appBar} color={'inherit'}>\r\n            <Toolbar>\r\n                <DrawerButton handleDrawerToggle={props.handleDrawerToggle} />\r\n                <div style={{ marginLeft: 'auto' }}>\r\n                    <AppBarLink text='Contact us' icon={<MailOutline />} link='/pulp/contact-us' />\r\n                    <AppBarLink text='Logout' icon={<ExitToApp />} link='/sign-in' logout={logoutHandler} />\r\n                </div>\r\n            </Toolbar>\r\n        </AppBar>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        userId: state.auth.id\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        logout: () => { dispatch(logoutActionCreator()) },\r\n        clearSocket: () => { dispatch(disconnectSocketActionCreator()) },\r\n        clearMessages: () => { dispatch(onLogoutMessagesClearActionCreator()) },\r\n        clearTopics: () => { dispatch(onLogoutTopicsClearActionCreator()) },\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AppBarBlock);\r\n","import * as actionTypes from '../actions/actionTypes';\r\n\r\nexport const connectSocketActionCreator = () => {\r\n    return {\r\n        type: actionTypes.CONNECT_SOCKET,\r\n    }\r\n}\r\n\r\nexport const disconnectSocketActionCreator = () => {\r\n    return {\r\n        type: actionTypes.DISCONNECT_SOCKET,\r\n    }\r\n}","import React from 'react';\r\nimport { spring, AnimatedSwitch } from 'react-router-transition';\r\n\r\nimport classes from './AnimatedSwitch.module.css';\r\n\r\nconst animatedSwitch = (props) => {\r\n    const mapStyles = (styles) => {\r\n        return {\r\n            opacity: styles.opacity,\r\n            transform: `scale(${styles.scale})`,\r\n        };\r\n    }\r\n\r\n    const bounce = (val) => {\r\n        return spring(val, {\r\n            stiffness: 100,\r\n            damping: 20,\r\n        });\r\n    }\r\n\r\n    const bounceTransition = {\r\n        // start in a transparent, upscaled state\r\n        atEnter: {\r\n            opacity: 0,\r\n            scale: 0.8,\r\n        },\r\n        // leave in a transparent, downscaled state\r\n        atLeave: {\r\n            opacity: bounce(0),\r\n            scale: bounce(0.8),\r\n        },\r\n        // and rest at an opaque, normally-scaled state\r\n        atActive: {\r\n            opacity: bounce(1),\r\n            scale: bounce(1),\r\n        },\r\n    };\r\n\r\n    let switchClass = classes.pageWrapper;\r\n    if (props.classProp) switchClass = classes[props.classProp]; \r\n\r\n    return (\r\n        <AnimatedSwitch\r\n            atEnter={bounceTransition.atEnter}\r\n            atLeave={bounceTransition.atLeave}\r\n            atActive={bounceTransition.atActive}\r\n            mapStyles={mapStyles}\r\n            className={switchClass}\r\n        >\r\n            {props.children}\r\n        </AnimatedSwitch>\r\n    )\r\n}\r\n\r\nexport default animatedSwitch;","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst style = makeStyles(theme => ({\r\n    root: {\r\n        height: '100%',\r\n        width: '100%',\r\n        paddingTop: '0',\r\n        margin: 'auto',\r\n        overflow: 'auto',\r\n        background: '#FFFFFF',\r\n        boxShadow: theme.shadows[3],\r\n        [theme.breakpoints.down('sm')]: {\r\n            padding: theme.spacing(0.5),\r\n        },\r\n        \"&::-webkit-scrollbar-track\": {\r\n            borderRadius: '10px',\r\n        },\r\n        \"&::-webkit-scrollbar\": {\r\n            width: '8px',\r\n            backgroundColor: 'transparent',\r\n        },\r\n        \"&::-webkit-scrollbar-thumb\": {\r\n            borderRadius: '10px',\r\n            backgroundColor: '#fff6ca',\r\n            opacity: '0.3',\r\n        },\r\n        [theme.breakpoints.up('md')]: {\r\n            width: '80%',\r\n        },\r\n        [theme.breakpoints.up('lg')]: {\r\n            width: '60%',\r\n        },\r\n    },\r\n    messagesBlock: {\r\n        height: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        flexDirection: 'column',\r\n    },\r\n    textArea: {\r\n        \"&::-webkit-scrollbar-track\": {\r\n            borderRadius: '10px',\r\n        },\r\n        \"&::-webkit-scrollbar\": {\r\n            width: '8px',\r\n            backgroundColor: 'transparent',\r\n        },\r\n        \"&::-webkit-scrollbar-thumb\": {\r\n            borderRadius: '10px',\r\n            backgroundColor: '#fff6ca',\r\n            opacity: '0.3',\r\n        },\r\n    },\r\n    inputProp: {\r\n        fontFamily: 'Lato, sans-serif',\r\n        fontSize: '14px',\r\n        \"&:after\": {\r\n            borderBottomColor: theme.palette.primary.dark,\r\n        },\r\n    },\r\n    dropSection: {\r\n        height: '100%',\r\n    },\r\n    dropArea: {\r\n        outline: 'none',\r\n        height: '100%',\r\n        position: 'relative',\r\n    },\r\n    dragDropArea: {\r\n        outline: 'none',\r\n        height: '100%',\r\n        '& > svg': {\r\n            verticalAlign: 'bottom',\r\n        }\r\n    },\r\n    freqEmoji: {\r\n        margin: '5px',\r\n        display: 'inline-block',\r\n        '& > button': {\r\n            outline: 'none !important',\r\n            cursor: 'pointer !important',\r\n            verticalAlign: '2px',\r\n        },\r\n        '& > button > span': {\r\n            verticalAlign: 'middle !important',\r\n        }\r\n    },\r\n    addFileBtn: {\r\n        cursor: 'pointer',\r\n        color: '#adadad',\r\n        marginTop: '5px',\r\n        marginRight: '25px',\r\n        '&:hover': {\r\n            color: theme.palette.primary.dark,\r\n        }\r\n    },\r\n    addImageBtn: {\r\n        cursor: 'pointer',\r\n        color: '#adadad',\r\n        marginTop: '6px',\r\n        marginRight: '25px',\r\n        '&:hover': {\r\n            color: theme.palette.primary.dark,\r\n        }\r\n    },\r\n    toggleSmilesBtn: {\r\n        background: 'transparent !important',\r\n        transition: '.3s all',\r\n        '&:hover': {\r\n            color: 'darkgrey',\r\n        }\r\n    },\r\n    addSmileBlock: {\r\n        flexDirection: 'column',\r\n        justifyContent: 'flex-end',\r\n    },\r\n    sendBth: {\r\n        color: theme.palette.primary.dark,\r\n        fontWeight: '700',\r\n        '&:hover': {\r\n            background: 'transparent',\r\n        }\r\n    },\r\n    messageSecondaryAction: {\r\n        top: '9px',\r\n        transform: 'none',\r\n        '& > span': {\r\n            color: 'grey'\r\n        },\r\n    },\r\n    messagesList: {\r\n        overflow: 'auto',\r\n        \"&::-webkit-scrollbar-track\": {\r\n            borderRadius: '10px',\r\n        },\r\n        \"&::-webkit-scrollbar\": {\r\n            width: '8px',\r\n            backgroundColor: 'transparent',\r\n        },\r\n        \"&::-webkit-scrollbar-thumb\": {\r\n            borderRadius: '10px',\r\n            backgroundColor: '#fff6ca',\r\n            opacity: '0.3',\r\n        },\r\n    },\r\n    downloadLink: {\r\n        color: 'grey',\r\n        textDecoration: 'none',\r\n        '&:hover': {\r\n            textDecoration: 'underline',\r\n        }\r\n    },\r\n    downloadIcon: {\r\n        backgroundColor: '#4e4e4e',\r\n        cursor: 'pointer',\r\n    },\r\n    messageAuthorEmail: {\r\n        fontFamily: 'Nunito, sans-serif',\r\n        fontSize: '14px',\r\n        fontWeight: '600',\r\n        margin: '0',\r\n        color: '#5d5d5d',\r\n        display: 'inline',\r\n    },\r\n    capitalizeEmail: {\r\n        textTransform: 'capitalize',\r\n        display: 'inline',\r\n    },\r\n    messageLiItem: {\r\n        paddingLeft: theme.spacing(3),\r\n        paddingRight: theme.spacing(3),\r\n        cursor: 'pointer',\r\n    },\r\n    messageLiWithAuthor: {\r\n        paddingTop: '0',\r\n        paddingBottom: '0',\r\n    },\r\n    messageLiSelected: {\r\n        background: '#fff8d7',\r\n    },\r\n    topLiFetching: {\r\n        textAlign: 'center',\r\n        paddingTop: '30px',\r\n    },\r\n    actionsBlock: {\r\n        position: 'absolute',\r\n        width: '100%',\r\n        top: '0',\r\n        zIndex: '1',\r\n    },\r\n    topicName: {\r\n        fontSize: '18px',\r\n        fontFamily: 'Poppins, sans-serif',\r\n    },\r\n    membersCount: {\r\n        fontSize: '12px',\r\n        fontFamily: 'Poppins, sans-serif',\r\n        paddingLeft: '25px',\r\n        color: 'rgba(0,0,0,.4)',\r\n        height: 'min-content',\r\n    },\r\n    topicData: {\r\n        boxShadow: theme.shadows[1],\r\n        '& > div': {\r\n            alignItems: 'center',\r\n        }\r\n    },\r\n    topicNote: {\r\n        fontSize: '12px',\r\n        fontFamily: 'Poppins, sans-serif',\r\n        color: 'rgba(0,0,0,.8)',\r\n    },\r\n    isChecked: {\r\n        position: 'absolute',\r\n        left: '10px',\r\n        top: '50%',\r\n        transform: 'translateY(-50%)',\r\n        color: theme.palette.primary.dark,\r\n        margin: '0',\r\n    },\r\n    avatarStyle: {\r\n        background: theme.palette.primary.dark,\r\n    },\r\n    deleteButton: {\r\n        margin: theme.spacing(.5),\r\n        fontFamily: 'Lato, sans-serif',\r\n    },\r\n    editButton: {\r\n        margin: theme.spacing(.5),\r\n        fontFamily: 'Lato, sans-serif',\r\n        color: 'rgba(0,0,0,.4)',\r\n    },\r\n    messageActionsBlock: {\r\n        marginLeft: 'auto',\r\n    },\r\n    secondaryActions: {\r\n        flexDirection: 'column',\r\n        background: 'rgb(250, 250, 250)',\r\n    },\r\n    filterActionsBlock: {\r\n        display: 'flex',\r\n        justifyContent: 'space-around',\r\n        marginTop: '20px',\r\n    },\r\n    expansionMenu: {\r\n        background: theme.palette.primary.main,\r\n        borderRadius: '0',\r\n    },\r\n    filterChip: {\r\n        boxShadow: theme.shadows[1],\r\n    }\r\n}));\r\n\r\nexport default style;\r\n","import React from 'react';\r\nimport { ListItemText } from '@material-ui/core';\r\n\r\nimport useStyles from '../../../../styles';\r\n\r\nconst MessageSceleton = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [emailName, emailEnd] = props.author.split('@');\r\n\r\n    return (\r\n        <ListItemText\r\n            primary={\r\n                props.showName ?\r\n                    <React.Fragment>\r\n                        <p className={[classes.capitalizeEmail, classes.messageAuthorEmail].join(' ')}>{emailName}</p>\r\n                        <p className={classes.messageAuthorEmail}>{'@' + emailEnd}</p>\r\n                    </React.Fragment> : null\r\n            }\r\n            disableTypography\r\n            secondary={props.content}\r\n        />\r\n    )\r\n}\r\n\r\nexport default MessageSceleton;","import React from 'react';\r\n\r\nimport MessageSceleton from '../MessageSceleton/MessageSceleton';\r\n\r\nconst TextItem = (props) => {\r\n    return (\r\n        <MessageSceleton\r\n            showName={props.showName}\r\n            author={props.message.creatorId.email}\r\n            content={\r\n                <p style={{\r\n                    color: 'black',\r\n                    margin: '0',\r\n                    marginTop: '5px',\r\n                }}>{props.message.text}</p>\r\n            }\r\n        />\r\n    )\r\n}\r\n\r\nexport default TextItem;\r\n","import React from 'react';\r\nimport MicrolinkCard from '@microlink/react';\r\n\r\nimport MessageSceleton from '../MessageSceleton/MessageSceleton';\r\n\r\nconst insertTextAtIndices = (text, obj) => {\r\n    return text.replace(/./g, function (character, index) {\r\n        return obj[index] ? obj[index] + character : character;\r\n    });\r\n};\r\n\r\n\r\nconst LinkItem = (props) => {\r\n    const urlMatches = props.message.text.match(/\\b(http|https)?:\\/\\/\\S+/gi) || [];\r\n\r\n    const LinkPreview = <MicrolinkCard url={urlMatches[0]} />;\r\n\r\n    let { text } = props.message;\r\n    urlMatches.forEach(link => {\r\n        const startIndex = text.indexOf(link);\r\n        const endIndex = startIndex + link.length;\r\n        text = insertTextAtIndices(text, {\r\n            [startIndex]: `<a href=\"${link}\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: cornflowerblue; word-break: break-word;\" >`,\r\n            [endIndex]: \"</a>\"\r\n        });\r\n    });\r\n\r\n    return (\r\n        <MessageSceleton\r\n            showName={props.showName}\r\n            author={props.message.creatorId.email}\r\n            content={\r\n                <div style={{\r\n                    color: 'black',\r\n                    margin: '0',\r\n                    marginTop: '5px',\r\n                }}\r\n                >\r\n                    <p dangerouslySetInnerHTML={{\r\n                        __html: text\r\n                    }}\r\n                    />\r\n                    {LinkPreview}\r\n                </div>\r\n            }\r\n        />\r\n    )\r\n}\r\n\r\nexport default LinkItem;\r\n","import React from 'react';\r\nimport { Avatar, List, ListItem, ListItemText, ListItemAvatar } from '@material-ui/core';\r\nimport { GetApp } from '@material-ui/icons';\r\n\r\nimport useStyles from '../../../../styles';\r\nimport MessageSceleton from '../MessageSceleton/MessageSceleton';\r\n\r\nconst getFileName = (path) => {\r\n    const pathContains = path.split('/');\r\n    return pathContains[pathContains.length - 1].slice(13);\r\n}\r\n\r\nconst TextItem = (props) => {\r\n    const classes = useStyles();\r\n    const FILE_PATH = props.message.path;\r\n\r\n    return (\r\n        <MessageSceleton\r\n            showName={props.showName}\r\n            author={props.message.creatorId.email}\r\n            content={\r\n                <List style={{ paddingTop: '0' }}>\r\n                    <ListItem alignItems=\"flex-start\" style={{ padding: '0' }}>\r\n                        <ListItemAvatar>\r\n                            <a href={FILE_PATH}>\r\n                                <Avatar className={classes.downloadIcon}>\r\n                                    <GetApp />\r\n                                </Avatar>\r\n                            </a>\r\n                        </ListItemAvatar>\r\n                        <ListItemText\r\n                            primary={\r\n                                <p style={{\r\n                                    fontFamily: 'Nunito, sans-serif',\r\n                                    fontSize: '14px',\r\n                                    fontWeight: '600',\r\n                                    margin: '0',\r\n                                    cursor: 'default',\r\n                                }}\r\n                                >{getFileName(FILE_PATH)}</p>\r\n                            }\r\n                            disableTypography\r\n                            secondary={\r\n                                <div style={{\r\n                                    paddingTop: '5px',\r\n                                }}>\r\n                                    <a\r\n                                        href={FILE_PATH}\r\n                                        className={classes.downloadLink}\r\n                                        onClick={(event) => event.stopPropagation() }\r\n                                    >Download</a>\r\n                                </div>\r\n                            }\r\n                        />\r\n                    </ListItem>\r\n                </List>\r\n            } />\r\n    )\r\n}\r\n\r\nexport default TextItem;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    modal: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n    },\r\n    paper: {\r\n        backgroundColor: theme.palette.background.paper,\r\n        padding: theme.spacing(1),\r\n        maxHeight: '60vh',\r\n        maxWidth: '50vw',\r\n        minHeight: '25vh',\r\n        minWidth: '35vw',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        outline: 'none',\r\n        [theme.breakpoints.down('sm')]: {\r\n            maxHeight: '70vh',\r\n            maxWidth: '100vw',        \r\n        }\r\n    },\r\n    image: {\r\n        maxHeight: '58vh',\r\n        maxWidth: '48vw',\r\n        [theme.breakpoints.down('sm')]: {\r\n            maxHeight: '68vh',\r\n            maxWidth: '98vw',        \r\n        }\r\n    }\r\n}));\r\n\r\nexport default useStyles;","import React from 'react';\r\nimport { Modal, Backdrop, Fade } from '@material-ui/core';\r\n\r\nimport useStyles from './styles';\r\n\r\nconst ImageReview = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div>\r\n            <Modal\r\n                aria-labelledby=\"transition-modal-title\"\r\n                aria-describedby=\"transition-modal-description\"\r\n                className={classes.modal}\r\n                open={props.open}\r\n                onClose={props.toggleView}\r\n                closeAfterTransition\r\n                BackdropComponent={Backdrop}\r\n                BackdropProps={{\r\n                    timeout: 500,\r\n                }}\r\n            >\r\n                <Fade in={props.open}>\r\n                    <div className={classes.paper}>\r\n                        <img src={props.imageSrc} className={classes.image} alt={'review'} />\r\n                    </div>\r\n                </Fade>\r\n            </Modal>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ImageReview;\r\n","import React, { useState } from 'react';\r\n\r\nimport ImageReview from '../../../../../../UI/ImageReview/ImageReview';\r\nimport MessageSceleton from '../MessageSceleton/MessageSceleton';\r\n\r\nconst TextItem = (props) => {\r\n    const [openImage, setOpenImage] = useState(false);\r\n\r\n    const toggleImageReview = (event) => {\r\n        event.stopPropagation();\r\n        setOpenImage(prevState => !prevState);\r\n    }\r\n\r\n    const IMAGE_PATH = props.message.path;\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <ImageReview open={openImage} imageSrc={IMAGE_PATH} toggleView={toggleImageReview} />\r\n\r\n            <MessageSceleton\r\n                showName={props.showName}\r\n                author={props.message.creatorId.email}\r\n                content={\r\n                    <div style={{ width: '70%', paddingTop: '10px' }}>\r\n                        <img\r\n                            src={IMAGE_PATH}\r\n                            style={{\r\n                                maxHeight: '30vh',\r\n                                maxWidth: '100%',\r\n                                cursor: 'pointer',\r\n                            }}\r\n                            onClick={toggleImageReview}\r\n                            alt={'saved'} />\r\n                    </div>\r\n                } />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default TextItem;\r\n","import React from 'react';\r\n\r\nimport MessageSceleton from '../MessageSceleton/MessageSceleton';\r\n\r\nconst TextItem = (props) => {\r\n    return (\r\n        <MessageSceleton\r\n            showName={props.showName}\r\n            author={props.message.creatorId.email}\r\n            content={\r\n                <div style={{ width: '70%', paddingTop: '10px', }}>\r\n                    <video\r\n                        style={{\r\n                            maxHeight: '30vh',\r\n                            maxWidth: '100%',\r\n                        }}\r\n                        onClick={(event) => event.stopPropagation()}\r\n                        controls>\r\n                        <source src={props.message.path} type=\"video/mp4\" />\r\n                    </video>\r\n                </div>\r\n            }\r\n        />\r\n    )\r\n}\r\n\r\nexport default TextItem;\r\n","import React from 'react';\r\nimport {\r\n    ListItem,\r\n    ListItemAvatar,\r\n    Avatar,\r\n    ListItemSecondaryAction,\r\n    Typography,\r\n} from '@material-ui/core';\r\n\r\nimport useStyles from '../../../styles';\r\nimport * as messageTypes from '../../../../../../utility/message-types';\r\nimport TextItem from './TextItem/TextItem';\r\nimport LinkItem from './LinkItem/LinkItem';\r\nimport FileItem from './FileItem/FileItem';\r\nimport ImageItem from './ImageItem/ImageItem';\r\nimport VideoItem from './VideoItem/VideoItem';\r\n\r\nconst displayedDataByType = (message) => {\r\n    if (message.type === messageTypes.TEXT) {\r\n        return <TextItem message={message} showName={true} />\r\n    }\r\n    if (message.type === messageTypes.LINK) {\r\n        return <LinkItem message={message} showName={true} />\r\n    }\r\n    else if (message.type === messageTypes.FILE)\r\n        return <FileItem message={message} showName={true} />\r\n\r\n    else if (message.type === messageTypes.IMAGE)\r\n        return <ImageItem message={message} showName={true} />\r\n\r\n    return <VideoItem message={message} showName={true} />\r\n}\r\n\r\nconst MessageItem = (props) => {\r\n    const classes = useStyles();\r\n    const humanDate = new Date(props.message.date * 1000).toLocaleTimeString();\r\n\r\n    const dataComponent = displayedDataByType(props.message);\r\n\r\n    const listClasses = [classes.messageLiItem, classes.messageLiWithAuthor];\r\n\r\n    return (\r\n        <ListItem\r\n            alignItems=\"flex-start\"\r\n            className={listClasses.join(' ')}\r\n            ContainerProps={{\r\n                className: 'message'\r\n            }}\r\n        >\r\n            <ListItemAvatar>\r\n                <Avatar alt=\"LETTER\" className={classes.avatarStyle}>{props.message.creatorId.email.slice(0, 2)}</Avatar>\r\n            </ListItemAvatar>\r\n            {dataComponent}\r\n            <ListItemSecondaryAction className={classes.messageSecondaryAction}>\r\n                <Typography variant=\"caption\" display=\"block\" gutterBottom>{humanDate}</Typography>\r\n            </ListItemSecondaryAction>\r\n        </ListItem>\r\n    )\r\n}\r\n\r\nexport default MessageItem;\r\n","import React, { useEffect } from 'react';\r\nimport { List, CircularProgress } from '@material-ui/core';\r\nimport VisibilitySensor from 'react-visibility-sensor';\r\n\r\nimport MessageItem from './MessageItem/MessageItem';\r\nimport useStyles from '../../styles';\r\n\r\nconst MessageItems = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const loadPrevMessages = (isVisible = true) => {\r\n        if (!props.fetching && isVisible) {\r\n            props.fetchPreviousMessages();\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadPrevMessages();\r\n    }, [])\r\n\r\n    let lastMessageDate = null;\r\n    return (\r\n        <List className={[classes.messagesList, 'type-messages'].join(' ')}>\r\n            <VisibilitySensor\r\n                onChange={(isVisible) => loadPrevMessages(isVisible)}\r\n                offset={{ top: 10 }}\r\n                delayedCall={true} >\r\n                <li className={classes.topLiFetching} >\r\n                    {props.fetching ? <CircularProgress disableShrink /> : null}\r\n                </li>\r\n            </VisibilitySensor>\r\n            {\r\n                props.filterMessages.map((item, index) => {\r\n                    const currentMessageDate = new Date(item.date * 1000).toLocaleDateString();\r\n\r\n                    if (lastMessageDate !== currentMessageDate) {\r\n                        lastMessageDate = currentMessageDate;\r\n\r\n                        const shownTimeString = new Date(item.date * 1000).toDateString();\r\n\r\n                        return (\r\n                            <React.Fragment key={item._id}>\r\n                                <li\r\n                                    style={\r\n                                        {\r\n                                            textAlign: 'center',\r\n                                            color: 'grey',\r\n                                            paddingTop: '20px',\r\n                                        }\r\n                                    }>{shownTimeString}</li>\r\n                                <MessageItem message={item} />\r\n                            </React.Fragment>\r\n                        )\r\n                    }\r\n                    return (\r\n                        <MessageItem\r\n                            key={item._id}\r\n                            message={item} />\r\n                    )\r\n                })\r\n            }\r\n        </List>\r\n    )\r\n}\r\n\r\nexport default MessageItems;\r\n","import React from 'react';\r\n\r\nconst EmptyMessage = () => {\r\n    return (\r\n        <div style={\r\n            {\r\n                alignSelf: 'center',\r\n                color: 'grey',\r\n            }\r\n        }>Messages not found</div>\r\n    )\r\n}\r\n\r\nexport default EmptyMessage;","import React from 'react';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nconst LoadMessages = () => {\r\n    return (\r\n        <div style={\r\n            {\r\n                alignSelf: 'center',\r\n                position: 'absolute',\r\n                top: '50%',\r\n                transform: 'translateY(-50%)',\r\n            }\r\n        }><CircularProgress disableShrink /></div>\r\n    )\r\n}\r\n\r\nexport default LoadMessages;\r\n","import React, { useEffect, useState } from 'react';\r\nimport axios from '../../../../utility/axios-instance';\r\nimport $ from 'jquery';\r\n\r\nimport useStyles from '../styles';\r\nimport MessageItems from './MessageItems/MessageItems';\r\nimport EmptyMessage from './EmptyMessage/EmptyMessage';\r\nimport LoadMessages from './LoadMessages/LoadMessages';\r\n\r\nconst scrollToTopPosition = (topPosition, parent, delay = 0) => {\r\n    return new Promise((resolve, reject) => {\r\n        $(parent).animate({ scrollTop: topPosition }, delay, () => {\r\n            resolve();\r\n        });\r\n    });\r\n}\r\n\r\nconst getTopPostion = (el) => {\r\n    return $(el).offset().top\r\n}\r\n\r\nconst FilterMessages = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [filterMessages, setFilterMessages] = useState([]);\r\n    const [fetching, setFetching] = useState(false);\r\n    const [, setAllowToFetch] = useState(false);\r\n    const [, setSkip] = useState(0);\r\n    const [firstFetching, setFirstFetching] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchFilterMessages(15).then(() => {\r\n            firstFetchingScroll();\r\n        });\r\n    }, [])\r\n\r\n    const getSkip = () => {\r\n        let skip = null;\r\n        setSkip(prevState => {\r\n            skip = prevState;\r\n            return prevState;\r\n        });\r\n        return skip;\r\n    }\r\n\r\n    const getLastMessages = () => {\r\n        let messages = [];\r\n        setFilterMessages(prevState => {\r\n            messages = prevState;\r\n            return prevState;\r\n        });\r\n        return messages;\r\n    }\r\n\r\n    const getLastAllowToFetch = () => {\r\n        let allow = null;\r\n        setAllowToFetch(prevState => {\r\n            allow = prevState;\r\n            return prevState;\r\n        });\r\n        return allow;\r\n    }\r\n\r\n    const getLastFetching = () => {\r\n        let fetching = null;\r\n        setFetching(prevState => {\r\n            fetching = prevState;\r\n            return prevState;\r\n        });\r\n        return fetching;\r\n    }\r\n\r\n    const firstFetchingScroll = () => {\r\n        setFirstFetching(false);\r\n\r\n        let messages = document.querySelector(\".type-messages\")\r\n        let lastMessage = document.querySelector(\".type-messages .message:last-child\");\r\n\r\n        if (lastMessage) {\r\n            scrollToTopPosition(getTopPostion(lastMessage), messages, 300)\r\n                .then(() => setAllowToFetch(true));\r\n        } else {\r\n            setAllowToFetch(true);\r\n        }\r\n    }\r\n\r\n    const prevFetchingScroll = (firstMessage, oldFirstMessageTopPosition) => {\r\n        const messages = document.querySelector(\".type-messages\");\r\n        let newFirstMessageTopPosition = getTopPostion(firstMessage);\r\n\r\n        if (firstMessage) {\r\n            scrollToTopPosition(newFirstMessageTopPosition - oldFirstMessageTopPosition, messages)\r\n                .then(() => setFetching(false))\r\n        } else {\r\n            setFetching(false);\r\n        }\r\n    }\r\n\r\n    const fetchPreviousMessages = () => {\r\n        if (!getLastAllowToFetch() || getLastFetching()) return;\r\n        const firstMessage = document.querySelectorAll(\".type-messages .message\")[1];\r\n        if (!firstMessage) return;\r\n\r\n        const oldFirstMessageTopPosition = getTopPostion(firstMessage);\r\n        \r\n        setFetching(true);\r\n        fetchFilterMessages(15).then(() => {\r\n            if (!firstMessage) return;\r\n            prevFetchingScroll(firstMessage, oldFirstMessageTopPosition);\r\n        });\r\n    }\r\n\r\n    const fetchFilterMessages = (limit) => {\r\n        return new Promise((resolve, reject) => {\r\n            const queryChunks =\r\n                '?type=' + props.fetchType\r\n                + '&skip=' + getSkip()\r\n                + '&limit=' + limit;\r\n\r\n            axios.get('/topic/messages/filter/' + props.idUser + queryChunks)\r\n                .then(messages => {\r\n                    updateFilterMessages(messages.data.reverse(), resolve);\r\n                })\r\n                .catch(err => {\r\n                    setFetching(false);\r\n                    console.log(err);\r\n                    reject(err);\r\n                })\r\n        })\r\n    }\r\n\r\n    const updateFilterMessages = (newMessages, resolve) => {\r\n        if (newMessages.length < 15) setAllowToFetch(false);\r\n\r\n        let currentMessages = [...getLastMessages()];\r\n        setFilterMessages([\r\n            ...newMessages,\r\n            ...currentMessages,\r\n        ]);\r\n\r\n        setSkip(prevSkip => prevSkip + 15);\r\n        resolve();\r\n    }\r\n\r\n    let messages = <EmptyMessage />\r\n    if (filterMessages.length > 0) {\r\n        messages = <MessageItems\r\n            filterMessages={filterMessages}\r\n            fetchPreviousMessages={fetchPreviousMessages}\r\n            fetching={fetching} />\r\n    }\r\n    if (firstFetching) messages = <LoadMessages />\r\n\r\n    return (\r\n        <div className={classes.messagesBlock}>\r\n            {messages}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FilterMessages;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst style = makeStyles(theme => ({\r\n    root: {\r\n        height: '100%',\r\n        width: '100%',\r\n        paddingTop: '0',\r\n        margin: 'auto',\r\n        overflow: 'auto',\r\n        background: '#FFFFFF',\r\n        boxShadow: theme.shadows[3],\r\n        [theme.breakpoints.down('sm')]: {\r\n            padding: theme.spacing(0.5),\r\n        },\r\n        \"&::-webkit-scrollbar-track\": {\r\n            borderRadius: '10px',\r\n        },\r\n        \"&::-webkit-scrollbar\": {\r\n            width: '8px',\r\n            backgroundColor: 'transparent',\r\n        },\r\n        \"&::-webkit-scrollbar-thumb\": {\r\n            borderRadius: '10px',\r\n            backgroundColor: '#fff6ca',\r\n            opacity: '0.3',\r\n        },\r\n        [theme.breakpoints.up('md')]: {\r\n            width: '80%',\r\n        },\r\n        [theme.breakpoints.up('lg')]: {\r\n            width: '60%',\r\n        },\r\n    },\r\n    messagesBlock: {\r\n        height: '83%',\r\n        display: 'flex',\r\n        justifyContent: 'flex-end',\r\n        flexDirection: 'column',\r\n    },\r\n    inputBlock: {\r\n        height: '17%',\r\n        position: 'relative',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'flex-end',\r\n        padding: '0 ' + theme.spacing(2) + 'px',\r\n        paddingBottom: theme.spacing(0.5),\r\n    },\r\n    textArea: {\r\n        \"&::-webkit-scrollbar-track\": {\r\n            borderRadius: '10px',\r\n        },\r\n        \"&::-webkit-scrollbar\": {\r\n            width: '8px',\r\n            backgroundColor: 'transparent',\r\n        },\r\n        \"&::-webkit-scrollbar-thumb\": {\r\n            borderRadius: '10px',\r\n            backgroundColor: '#fff6ca',\r\n            opacity: '0.3',\r\n        },\r\n    },\r\n    inputProp: {\r\n        fontFamily: 'Lato, sans-serif',\r\n        fontSize: '14px',\r\n        \"&:after\": {\r\n            borderBottomColor: theme.palette.primary.dark,\r\n        },\r\n    },\r\n    dropSection: {\r\n        height: '100%',\r\n    },\r\n    dropArea: {\r\n        outline: 'none',\r\n        height: '100%',\r\n        position: 'relative',\r\n    },\r\n    dragDropArea: {\r\n        outline: 'none',\r\n        height: '100%',\r\n        '& > svg': {\r\n            verticalAlign: 'bottom',\r\n        }\r\n    },\r\n    freqEmoji: {\r\n        margin: '5px',\r\n        display: 'inline-block',\r\n        '& > button': {\r\n            outline: 'none !important',\r\n            cursor: 'pointer !important',\r\n            verticalAlign: '2px',\r\n        },\r\n        '& > button > span': {\r\n            verticalAlign: 'middle !important',\r\n        }\r\n    },\r\n    addFileBtn: {\r\n        cursor: 'pointer',\r\n        color: '#adadad',\r\n        marginTop: '5px',\r\n        marginRight: '25px',\r\n        '&:hover': {\r\n            color: theme.palette.primary.dark,\r\n        }\r\n    },\r\n    addImageBtn: {\r\n        cursor: 'pointer',\r\n        color: '#adadad',\r\n        marginTop: '6px',\r\n        marginRight: '25px',\r\n        '&:hover': {\r\n            color: theme.palette.primary.dark,\r\n        }\r\n    },\r\n    toggleSmilesBtn: {\r\n        background: 'transparent !important',\r\n        transition: '.3s all',\r\n        '&:hover': {\r\n            color: 'darkgrey',\r\n        }\r\n    },\r\n    addSmileBlock: {\r\n        flexDirection: 'column',\r\n        justifyContent: 'flex-end',\r\n    },\r\n    sendBth: {\r\n        color: theme.palette.primary.dark,\r\n        fontWeight: '700',\r\n        '&:hover': {\r\n            background: 'transparent',\r\n        }\r\n    },\r\n    messageSecondaryAction: {\r\n        top: '9px',\r\n        transform: 'none',\r\n        '& > span': {\r\n            color: 'grey'\r\n        },\r\n    },\r\n    messagesList: {\r\n        overflow: 'auto',\r\n        paddingTop: '57px',\r\n        \"&::-webkit-scrollbar-track\": {\r\n            borderRadius: '10px',\r\n        },\r\n        \"&::-webkit-scrollbar\": {\r\n            width: '8px',\r\n            backgroundColor: 'transparent',\r\n        },\r\n        \"&::-webkit-scrollbar-thumb\": {\r\n            borderRadius: '10px',\r\n            backgroundColor: '#fff6ca',\r\n            opacity: '0.3',\r\n        },\r\n    },\r\n    downloadLink: {\r\n        color: 'grey',\r\n        textDecoration: 'none',\r\n        '&:hover': {\r\n            textDecoration: 'underline',\r\n        }\r\n    },\r\n    downloadIcon: {\r\n        backgroundColor: '#4e4e4e',\r\n        cursor: 'pointer',\r\n    },\r\n    messageAuthorEmail: {\r\n        fontFamily: 'Nunito, sans-serif',\r\n        fontSize: '14px',\r\n        fontWeight: '600',\r\n        margin: '0',\r\n        color: '#5d5d5d',\r\n        display: 'inline',\r\n    },\r\n    capitalizeEmail: {\r\n        textTransform: 'capitalize',\r\n        display: 'inline',\r\n    },\r\n    messageLiItem: {\r\n        paddingLeft: theme.spacing(6),\r\n        paddingRight: theme.spacing(3),\r\n        cursor: 'pointer',\r\n    },\r\n    messageLiWithAuthor: {\r\n        paddingTop: '0',\r\n        paddingBottom: '0',\r\n    },\r\n    messageLiSelected: {\r\n        background: '#fff8d7',\r\n    },\r\n    topLiFetching: {\r\n        textAlign: 'center',\r\n        paddingTop: '30px',\r\n    },\r\n    actionsBlock: {\r\n        position: 'absolute',\r\n        width: '100%',\r\n        top: '0',\r\n        zIndex: '1',\r\n    },\r\n    topicName: {\r\n        fontSize: '18px',\r\n        fontFamily: 'Poppins, sans-serif',\r\n    },\r\n    membersCount: {\r\n        fontSize: '12px',\r\n        fontFamily: 'Poppins, sans-serif',\r\n        paddingLeft: '25px',\r\n        color: 'rgba(0,0,0,.4)',\r\n        height: 'min-content',\r\n    },\r\n    topicData: {\r\n        boxShadow: theme.shadows[1],\r\n        '& > div': {\r\n            alignItems: 'center',\r\n        }\r\n    },\r\n    topicNote: {\r\n        fontSize: '12px',\r\n        fontFamily: 'Poppins, sans-serif',\r\n        color: 'rgba(0,0,0,.8)',\r\n    },\r\n    isChecked: {\r\n        position: 'absolute',\r\n        left: '10px',\r\n        top: '50%',\r\n        transform: 'translateY(-50%)',\r\n        color: theme.palette.primary.dark,\r\n        margin: '0',\r\n    },\r\n    avatarStyle: {\r\n        background: theme.palette.primary.dark,\r\n    },\r\n    deleteButton: {\r\n        margin: theme.spacing(.5),\r\n        fontFamily: 'Lato, sans-serif',\r\n    },\r\n    editButton: {\r\n        margin: theme.spacing(.5),\r\n        fontFamily: 'Lato, sans-serif',\r\n        color: 'rgba(0,0,0,.4)',\r\n    },\r\n    messageActionsBlock: {\r\n        marginLeft: 'auto',\r\n    },\r\n    secondaryActions: {\r\n        flexDirection: 'column',\r\n        background: 'rgb(250, 250, 250)',\r\n    },\r\n    filterActionsBlock: {\r\n        display: 'flex',\r\n        justifyContent: 'space-around',\r\n        marginTop: '20px',\r\n    },\r\n    expansionMenu: {\r\n        background: theme.palette.primary.main,\r\n        borderRadius: '0',\r\n    },\r\n    filterChip: {\r\n        boxShadow: theme.shadows[1],\r\n    },\r\n    notReadedDot: {\r\n        fontSize: '12px',\r\n        position: 'absolute',\r\n        left: '10px',\r\n        top: '50%',\r\n        transform: 'translateY(-50%)',\r\n        color: theme.palette.primary.dark,\r\n        margin: '0',\r\n    },\r\n    newMessagesBlock: {\r\n        textAlign: 'center',\r\n        color: 'grey',\r\n        paddingTop: '16px',\r\n    }\r\n}));\r\n\r\nexport default style;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport FilterMessages from '../FilterMessages/FilterMessages';\r\nimport useStyles from '../../TopicContent/styles';\r\n\r\nconst Links = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <FilterMessages\r\n                fetchType={'link'}\r\n                idUser={props.idUser}\r\n                token={props.token} />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        idUser: state.auth.id,\r\n        token: state.auth.token,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Links);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport FilterMessages from '../FilterMessages/FilterMessages';\r\nimport useStyles from '../../TopicContent/styles';\r\n\r\nconst Photos = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <FilterMessages\r\n                fetchType={'image'}\r\n                idUser={props.idUser}\r\n                token={props.token} />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        idUser: state.auth.id,\r\n        token: state.auth.token,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Photos);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport FilterMessages from '../FilterMessages/FilterMessages';\r\nimport useStyles from '../../TopicContent/styles';\r\n\r\nconst Videos = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <FilterMessages\r\n                fetchType={'video'}\r\n                idUser={props.idUser}\r\n                token={props.token} />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        idUser: state.auth.id,\r\n        token: state.auth.token,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Videos);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport FilterMessages from '../FilterMessages/FilterMessages';\r\nimport useStyles from '../../TopicContent/styles';\r\n\r\nconst Files = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <FilterMessages\r\n                fetchType={'file'}\r\n                idUser={props.idUser}\r\n                token={props.token} />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        idUser: state.auth.id,\r\n        token: state.auth.token,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Files);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport FilterMessages from '../FilterMessages/FilterMessages';\r\nimport useStyles from '../../TopicContent/styles';\r\n\r\nconst Notes = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <FilterMessages\r\n                fetchType={'text'}\r\n                idUser={props.idUser}\r\n                token={props.token} />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        idUser: state.auth.id,\r\n        token: state.auth.token,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Notes);\r\n","import React from 'react';\r\nimport { useDropzone } from 'react-dropzone';\r\n\r\nimport useStyles from '../../../styles';\r\n\r\nconst DropFile = (props) => {\r\n    const classes = useStyles();\r\n\r\n    let { getRootProps, getInputProps } = useDropzone({\r\n        accept: props.imageDrop ? 'image/*' : null,\r\n        onDrop: acceptedFiles => { props.dispatchFiles(acceptedFiles, props.imageDrop) },\r\n    });\r\n\r\n    return (\r\n        <div {...getRootProps({ onDrop: event => event.stopPropagation() })} className={classes.dragDropArea}>\r\n            <input {...getInputProps()} />\r\n            {props.icon}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default (DropFile);\r\n","import React from 'react';\r\nimport { Note, PhotoCamera } from '@material-ui/icons';\r\nimport { Emoji } from 'emoji-mart';\r\nimport { Button } from '@material-ui/core';\r\n\r\nimport useStyles from '../../styles';\r\nimport DropFile from './DropFile/DropFile';\r\n\r\nconst ActionSection = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <section style={{ display: 'flex', justifyContent: 'space-between', }}>\r\n\r\n            <DropFile\r\n                icon={<Note className={classes.addFileBtn} />} \r\n                changeProgress={props.changeProgress}\r\n                dispatchFiles={props.dispatchFiles} />\r\n            <DropFile\r\n                icon={<PhotoCamera className={classes.addImageBtn} />}\r\n                changeProgress={props.changeProgress}\r\n                dispatchFiles={props.dispatchFiles}\r\n                imageDrop />\r\n\r\n            <div style={{ overflow: 'hidden', display: 'flex', width: '100%', }}>\r\n                {\r\n                    props.smiles.map(item => {\r\n                        return (\r\n                            <div\r\n                                key={item}\r\n                                className={classes.freqEmoji}\r\n                            >\r\n                                <Emoji\r\n                                    emoji={item}\r\n                                    set='twitter'\r\n                                    size={20}\r\n                                    onClick={props.addEmoji}\r\n                                />\r\n                            </div>\r\n                        )\r\n                    })\r\n                }\r\n            </div>\r\n\r\n            <div style={{ marginLeft: '20px' }}>\r\n                <Button className={classes.sendBth} component=\"span\" onClick={props.sendOrEditMessage}>SEND</Button>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default ActionSection;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { TextField, InputAdornment, IconButton, Zoom } from '@material-ui/core';\r\nimport 'emoji-mart/css/emoji-mart.css'\r\nimport { Picker } from 'emoji-mart'\r\nimport InsertEmoticonIcon from '@material-ui/icons/InsertEmoticon';\r\nimport { connect } from 'react-redux';\r\n\r\nimport useStyles from '../styles';\r\nimport './InputBlock.css';\r\nimport ActionSection from './ActionSection/ActionSection';\r\nimport { sendTextMessageAction, editMessageAction } from '../../../../store/actions/messages';\r\nimport * as messageTypes from '../../../../utility/message-types';\r\n\r\nconst getFreqSmiles = () => {\r\n    const freqObj = JSON.parse(localStorage.getItem('emoji-mart.frequently'));\r\n    let freqArr = [];\r\n\r\n    for (let key in freqObj) {\r\n        freqArr.push(key);\r\n    }\r\n\r\n    return freqArr.reverse().slice(0, 15);\r\n}\r\n\r\nconst addNewSmileToFreq = (freqSmiles, idEmoji) => {\r\n    const freqSmilesCount = freqSmiles.length;\r\n    freqSmiles = freqSmiles.filter(item => item !== idEmoji);\r\n\r\n    if (freqSmilesCount === freqSmiles.length && freqSmiles.length === 15) {\r\n        freqSmiles.splice(freqSmiles.length - 1, 1);\r\n    }\r\n\r\n    return [\r\n        idEmoji,\r\n        ...freqSmiles\r\n    ]\r\n}\r\n\r\nconst InputBlock = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [textAreaValue, setTextAreaValue] = useState('');\r\n\r\n    const [showSmiles, setShowSmiles] = useState(false);\r\n\r\n    const [freqSmiles, setFreqSmiles] = useState([]);\r\n\r\n    const inputRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        setFreqSmiles([...getFreqSmiles()]);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!props.editingMessage) return;\r\n        const message = props.topic.messages.find(item => item._id === props.editingMessage);\r\n        setTextAreaValue(message.text);\r\n        focusInput();\r\n    }, [props.editingMessage])\r\n\r\n    const focusInput = () => {\r\n        inputRef.current.focus();\r\n    }\r\n\r\n    const onInputChange = (event) => {\r\n        const newValue = event.target.value;\r\n        setTextAreaValue(newValue);\r\n    }\r\n\r\n    const addNewEmoji = (emoji) => {\r\n        setTextAreaValue(prevState => prevState + emoji.native);\r\n        focusInput();\r\n        setFreqSmiles(prevState => [...addNewSmileToFreq([...prevState], emoji.id)]);\r\n    }\r\n\r\n    const addFreqEmoji = (emoji) => {\r\n        setTextAreaValue(prevState => prevState + emoji.native);    \r\n        focusInput();\r\n    }\r\n\r\n    const handleClickShowSmiles = () => {\r\n        setShowSmiles(prevState => !prevState);\r\n    }\r\n\r\n    const handleEnterKeyPress = (e) => {\r\n        if (e.key === 'Enter') {\r\n            e.preventDefault();\r\n            sendOrEditMessage();\r\n        }\r\n    }\r\n\r\n    const sendOrEditMessage = () => {\r\n        props.editingMessage ? editMessage() : sendMessage();\r\n    }\r\n\r\n    const sendMessage = () => {\r\n        if (textAreaValue === '') return;\r\n\r\n        const messageData = {\r\n            text: textAreaValue,\r\n            sender: props.userId\r\n        }\r\n        const urlMatches = textAreaValue.match(/\\b(http|https)?:\\/\\/\\S+/gi) || [];\r\n\r\n        if (urlMatches.length === 0)\r\n            props.sendTextMessage(messageData, props.socket, messageTypes.TEXT);\r\n        else\r\n            props.sendTextMessage(messageData, props.socket, messageTypes.LINK);\r\n\r\n        setTextAreaValue('');\r\n    }\r\n\r\n    const editMessage = () => {\r\n        if (textAreaValue === '') return;\r\n\r\n        props.editMessage({ text: textAreaValue }, props.socket, props.editingMessage);\r\n        setTextAreaValue('');\r\n        props.clearSelectedMessages();\r\n    }\r\n\r\n    const smileLostFocusHandler = () => setShowSmiles(false);\r\n\r\n    return (\r\n        <div className={classes.inputBlock}>\r\n            <div style={{ position: 'relative' }}>\r\n                <Zoom in={showSmiles}>\r\n                    <Picker\r\n                        set='twitter'\r\n                        onSelect={addNewEmoji}\r\n                        color={'#FFE66D'}\r\n                        sheetSize={20}\r\n                    />\r\n                </Zoom>\r\n\r\n                <TextField\r\n                    id=\"filled-multiline-flexible\"\r\n                    className={classes.textArea}\r\n                    fullWidth\r\n                    multiline\r\n                    autoFocus \r\n                    inputRef={inputRef}\r\n                    rows={2}\r\n                    rowsMax={4}\r\n                    placeholder={'Start to write...'}\r\n                    value={textAreaValue}\r\n                    onChange={onInputChange}\r\n                    onKeyDown={handleEnterKeyPress}\r\n                    InputLabelProps={{\r\n                        className: classes.inputLabelProp\r\n                    }}\r\n                    InputProps={{\r\n                        className: classes.inputProp,\r\n                        endAdornment: (\r\n                            <InputAdornment position=\"end\" className={classes.addSmileBlock} onBlur={smileLostFocusHandler}>\r\n                                <IconButton\r\n                                    aria-label=\"toggle password visibility\"\r\n                                    onClick={handleClickShowSmiles}\r\n                                    disableRipple={true}\r\n                                    disableFocusRipple={true}\r\n                                    disableTouchRipple={true}\r\n                                    className={classes.toggleSmilesBtn}\r\n                                >\r\n                                    <InsertEmoticonIcon />\r\n                                </IconButton>\r\n                            </InputAdornment>\r\n                        )\r\n                    }}\r\n                />\r\n            </div>\r\n\r\n            <ActionSection\r\n                smiles={freqSmiles}\r\n                addEmoji={addFreqEmoji}\r\n                sendOrEditMessage={sendOrEditMessage}\r\n                changeProgress={props.changeProgress}\r\n                dispatchFiles={props.dispatchFiles}\r\n                focusInput={focusInput}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        userId: state.auth.id,\r\n        socket: state.sckt.socket,\r\n        topic: state.msg.topics[state.tpc.openedTopicId],\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        sendTextMessage: (message, socket, messageType) => { dispatch(sendTextMessageAction(message, socket, messageType)) },\r\n        editMessage: (message, socket, editableMessageId) => { dispatch(editMessageAction(message, socket, editableMessageId)) },\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InputBlock);\r\n","import React from 'react';\r\nimport { ListItemText } from '@material-ui/core';\r\n\r\nimport useStyles from '../../../../styles';\r\n\r\nconst MessageSceleton = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [emailName, emailEnd] = props.author.split('@');\r\n\r\n    return (\r\n        <ListItemText\r\n            primary={\r\n                props.showName ?\r\n                    <React.Fragment>\r\n                        <p className={[classes.capitalizeEmail, classes.messageAuthorEmail].join(' ')}>{emailName}</p>\r\n                        <p className={classes.messageAuthorEmail}>{'@' + emailEnd}</p>\r\n                    </React.Fragment> : null\r\n            }\r\n            disableTypography\r\n            secondary={props.content}\r\n        />\r\n    )\r\n}\r\n\r\nexport default MessageSceleton;","import React from 'react';\r\n\r\nimport MessageSceleton from '../MessageSceleton/MessageSceleton';\r\n\r\nconst TextItem = (props) => {\r\n    return (\r\n        <MessageSceleton\r\n            showName={props.showName}\r\n            author={props.message.creatorId.email}\r\n            content={\r\n                <p style={{\r\n                    color: 'black',\r\n                    margin: '0',\r\n                    marginTop: '5px',\r\n                }}>{props.message.text}</p>\r\n            }\r\n        />\r\n    )\r\n}\r\n\r\nexport default TextItem;\r\n","import React from 'react';\r\nimport MicrolinkCard from '@microlink/react';\r\n\r\nimport MessageSceleton from '../MessageSceleton/MessageSceleton';\r\n\r\nconst insertTextAtIndices = (text, obj) => {\r\n    return text.replace(/./g, function (character, index) {\r\n        return obj[index] ? obj[index] + character : character;\r\n    });\r\n};\r\n\r\n\r\nconst LinkItem = (props) => {\r\n    const urlMatches = props.message.text.match(/\\b(http|https)?:\\/\\/\\S+/gi) || [];\r\n\r\n    const LinkPreview = <MicrolinkCard url={urlMatches[0]} />;\r\n\r\n    let { text } = props.message;\r\n    urlMatches.forEach(link => {\r\n        const startIndex = text.indexOf(link);\r\n        const endIndex = startIndex + link.length;\r\n        text = insertTextAtIndices(text, {\r\n            [startIndex]: `<a href=\"${link}\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: cornflowerblue; word-break: break-word;\" >`,\r\n            [endIndex]: \"</a>\"\r\n        });\r\n    });\r\n\r\n    return (\r\n        <MessageSceleton\r\n            showName={props.showName}\r\n            author={props.message.creatorId.email}\r\n            content={\r\n                <div style={{\r\n                    color: 'black',\r\n                    margin: '0',\r\n                    marginTop: '5px',\r\n                }}\r\n                >\r\n                    <p dangerouslySetInnerHTML={{\r\n                        __html: text\r\n                    }}\r\n                    />\r\n                    {LinkPreview}\r\n                </div>\r\n            }\r\n        />\r\n    )\r\n}\r\n\r\nexport default LinkItem;\r\n","import React from 'react';\r\nimport { Avatar, List, ListItem, ListItemText, ListItemAvatar } from '@material-ui/core';\r\nimport { GetApp } from '@material-ui/icons';\r\n\r\nimport useStyles from '../../../../styles';\r\nimport MessageSceleton from '../MessageSceleton/MessageSceleton';\r\n\r\nconst getFileName = (path) => {\r\n    const pathContains = path.split('/');\r\n    return pathContains[pathContains.length - 1].slice(13);\r\n}\r\n\r\nconst TextItem = (props) => {\r\n    const classes = useStyles();\r\n    const FILE_PATH = props.message.path;\r\n\r\n    return (\r\n        <MessageSceleton\r\n            showName={props.showName}\r\n            author={props.message.creatorId.email}\r\n            content={\r\n                <List style={{ paddingTop: '0' }}>\r\n                    <ListItem alignItems=\"flex-start\" style={{ padding: '0' }}>\r\n                        <ListItemAvatar>\r\n                            <a href={FILE_PATH}>\r\n                                <Avatar className={classes.downloadIcon}>\r\n                                    <GetApp />\r\n                                </Avatar>\r\n                            </a>\r\n                        </ListItemAvatar>\r\n                        <ListItemText\r\n                            primary={\r\n                                <p style={{\r\n                                    fontFamily: 'Nunito, sans-serif',\r\n                                    fontSize: '14px',\r\n                                    fontWeight: '600',\r\n                                    margin: '0',\r\n                                    cursor: 'default',\r\n                                }}\r\n                                >{getFileName(FILE_PATH)}</p>\r\n                            }\r\n                            disableTypography\r\n                            secondary={\r\n                                <div style={{\r\n                                    paddingTop: '5px',\r\n                                }}>\r\n                                    <a\r\n                                        href={FILE_PATH}\r\n                                        className={classes.downloadLink}\r\n                                        onClick={(event) => event.stopPropagation() }\r\n                                    >Download</a>\r\n                                </div>\r\n                            }\r\n                        />\r\n                    </ListItem>\r\n                </List>\r\n            } />\r\n    )\r\n}\r\n\r\nexport default TextItem;\r\n","import React, { useState } from 'react';\r\n\r\nimport ImageReview from '../../../../../../UI/ImageReview/ImageReview';\r\nimport MessageSceleton from '../MessageSceleton/MessageSceleton';\r\n\r\nconst TextItem = (props) => {\r\n    const [openImage, setOpenImage] = useState(false);\r\n\r\n    const toggleImageReview = (event) => {\r\n        event.stopPropagation();\r\n        setOpenImage(prevState => !prevState);\r\n    }\r\n\r\n    const IMAGE_PATH = props.message.path;\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <ImageReview open={openImage} imageSrc={IMAGE_PATH} toggleView={toggleImageReview} />\r\n\r\n            <MessageSceleton\r\n                showName={props.showName}\r\n                author={props.message.creatorId.email}\r\n                content={\r\n                    <div style={{ width: '70%', paddingTop: '10px' }}>\r\n                        <img\r\n                            src={IMAGE_PATH}\r\n                            style={{\r\n                                maxHeight: '30vh',\r\n                                maxWidth: '100%',\r\n                                cursor: 'pointer',\r\n                            }}\r\n                            onClick={toggleImageReview}\r\n                            alt={'saved'} />\r\n                    </div>\r\n                } />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default TextItem;\r\n","import React from 'react';\r\n\r\nimport MessageSceleton from '../MessageSceleton/MessageSceleton';\r\n\r\nconst TextItem = (props) => {\r\n    return (\r\n        <MessageSceleton\r\n            showName={props.showName}\r\n            author={props.message.creatorId.email}\r\n            content={\r\n                <div style={{ width: '70%', paddingTop: '10px', }}>\r\n                    <video\r\n                        style={{\r\n                            maxHeight: '30vh',\r\n                            maxWidth: '100%',\r\n                        }}\r\n                        onClick={(event) => event.stopPropagation()}\r\n                        controls>\r\n                        <source src={props.message.path} type=\"video/mp4\" />\r\n                    </video>\r\n                </div>\r\n            }\r\n        />\r\n    )\r\n}\r\n\r\nexport default TextItem;\r\n","import React from 'react';\r\nimport {\r\n    ListItem,\r\n    ListItemAvatar,\r\n    Avatar,\r\n    ListItemSecondaryAction,\r\n    Typography,\r\n    ListItemIcon\r\n} from '@material-ui/core';\r\nimport { CheckCircle, FiberManualRecord } from '@material-ui/icons';\r\nimport VisibilitySensor from 'react-visibility-sensor';\r\n\r\nimport useStyles from '../../../styles';\r\nimport * as messageTypes from '../../../../../../utility/message-types';\r\nimport TextItem from './TextItem/TextItem';\r\nimport LinkItem from './LinkItem/LinkItem';\r\nimport FileItem from './FileItem/FileItem';\r\nimport ImageItem from './ImageItem/ImageItem';\r\nimport VideoItem from './VideoItem/VideoItem';\r\n\r\nconst displayedDataByType = (message, show) => {\r\n    if (message.type === messageTypes.TEXT) {\r\n        return <TextItem message={message} showName={show} />\r\n    }\r\n    if (message.type === messageTypes.LINK) {\r\n        return <LinkItem message={message} showName={show} />\r\n    }\r\n    else if (message.type === messageTypes.FILE)\r\n        return <FileItem message={message} showName={show} />\r\n\r\n    else if (message.type === messageTypes.IMAGE)\r\n        return <ImageItem message={message} showName={show} />\r\n\r\n    return <VideoItem message={message} showName={show} />\r\n}\r\n\r\nconst setListItemClasses = (classes, showAuthor, selectedMessages, messageId) => {\r\n    const listClasses = [classes.messageLiItem];\r\n    if (!showAuthor) {\r\n        listClasses.push(classes.messageLiWithAuthor);\r\n    }\r\n    if (selectedMessages.includes(messageId)) {\r\n        listClasses.push(classes.messageLiSelected);\r\n    }\r\n\r\n    return listClasses;\r\n}\r\n\r\nconst MessageItem = (props) => {\r\n    const classes = useStyles();\r\n    const humanDate = new Date(props.message.date * 1000).toLocaleTimeString();\r\n\r\n    let showAuthor = false;\r\n\r\n    if (\r\n        props.prevType !== props.message.type\r\n        || props.prevAuthor !== props.message.creatorId._id\r\n        || props.showAuthor\r\n    ) {\r\n        showAuthor = true;\r\n    }\r\n\r\n    const dataComponent = displayedDataByType(props.message, showAuthor);\r\n\r\n    const listClasses = setListItemClasses(classes, showAuthor, props.selectedMessagesId, props.message._id);\r\n\r\n    const isVisibleHandler = () => {\r\n        setTimeout(() => {\r\n            props.addToReaded(props.userId, props.message._id);\r\n        }, 500);\r\n    }\r\n\r\n    return (\r\n        <ListItem\r\n            alignItems=\"flex-start\"\r\n            className={listClasses.join(' ')}\r\n            onClick={props.changeSelectedMessage}\r\n            ContainerProps={{\r\n                className: 'message'\r\n            }}\r\n        >\r\n            {\r\n                (props.selectedMessagesId.includes(props.message._id))\r\n                    ? <ListItemIcon className={classes.isChecked}>\r\n                        <CheckCircle />\r\n                    </ListItemIcon>\r\n                    : null\r\n            }\r\n\r\n            {\r\n                !props.message.wasReadedBy.includes(props.userId) ?\r\n                    <ListItemIcon className={classes.isChecked}>\r\n                        <VisibilitySensor onChange={isVisibleHandler}>\r\n                            <FiberManualRecord className={classes.notReadedDot} />\r\n                        </VisibilitySensor>\r\n                    </ListItemIcon>\r\n                    : null\r\n            }\r\n            <ListItemAvatar>\r\n                {\r\n                    showAuthor\r\n                        ? <Avatar alt=\"LETTER\" className={classes.avatarStyle}>{props.message.creatorId.email.slice(0, 2)}</Avatar>\r\n                        : <div></div>\r\n                }\r\n            </ListItemAvatar>\r\n            {dataComponent}\r\n            <ListItemSecondaryAction className={classes.messageSecondaryAction}>\r\n                <Typography variant=\"caption\" display=\"block\" gutterBottom>{humanDate}</Typography>\r\n            </ListItemSecondaryAction>\r\n        </ListItem>\r\n    )\r\n}\r\n\r\nexport default MessageItem;\r\n","import React, { useEffect } from 'react';\r\nimport { List, CircularProgress, LinearProgress } from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\nimport VisibilitySensor from 'react-visibility-sensor';\r\n\r\nimport MessageItem from './MessageItem/MessageItem';\r\nimport useStyles from '../../styles';\r\nimport * as messageTypes from '../../../../../utility/message-types';\r\nimport { readMessageAction } from '../../../../../store/actions/messages';\r\n\r\nconst filterCheck = (message, filter) => {\r\n    if (!filter.photos && !filter.links && !filter.videos && !filter.files) return true;\r\n\r\n    if (message.type === messageTypes.IMAGE && filter.photos === true) return true;\r\n    if (message.type === messageTypes.LINK && filter.links === true) return true;\r\n    if (message.type === messageTypes.VIDEO && filter.videos === true) return true;\r\n    if (message.type === messageTypes.FILE && filter.files === true) return true;\r\n\r\n    return false;\r\n}\r\n\r\nconst MessageItems = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const loadPrevMessages = (isVisible = true) => {\r\n        if (!props.fetching && isVisible) {\r\n            props.fetchPreviousMessages();\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadPrevMessages();\r\n    }, [])\r\n\r\n    const firstNotReaded = (messageIndex, arrayLength) => {\r\n        const reverseMessageIndex = arrayLength - messageIndex;\r\n        return reverseMessageIndex === props.newMessagesLabelPosition && props.newMessagesLabelPosition !== 0;\r\n    }\r\n\r\n    const notReadedElement = (messageIndex, arrayLength) => {\r\n        return firstNotReaded(messageIndex, arrayLength)\r\n            ? <li className={[classes.newMessagesBlock, 'not-readed-message'].join(' ')}>New messages</li>\r\n            : null;\r\n    }\r\n\r\n    let lastMessageDate = null;\r\n    const messagesCount = props.topics[props.currTopicId].messages.length;\r\n    return (\r\n        <List className={[classes.messagesList, 'messages'].join(' ')}>\r\n            <VisibilitySensor\r\n                onChange={(isVisible) => loadPrevMessages(isVisible) }\r\n                offset={{ top: 120 }}\r\n                delayedCall={true} >\r\n                <li className={classes.topLiFetching} >\r\n                    {props.fetching ? <CircularProgress disableShrink /> : null}\r\n                </li>\r\n            </VisibilitySensor>\r\n            {\r\n                props.topics[props.currTopicId].messages.map((item, index) => {\r\n                    if (!filterCheck(item, props.filter)) return null;\r\n                    const currentMessageDate = new Date(item.date * 1000).toLocaleDateString();\r\n\r\n                    if (lastMessageDate !== currentMessageDate) {\r\n                        lastMessageDate = currentMessageDate;\r\n\r\n                        const shownTimeString = new Date(item.date * 1000).toDateString();\r\n                        return (\r\n                            <React.Fragment key={item._id}>\r\n                                {notReadedElement(index, messagesCount)}\r\n                                <li\r\n                                    style={\r\n                                        {\r\n                                            textAlign: 'center',\r\n                                            color: 'grey',\r\n                                            paddingTop: '20px',\r\n                                        }\r\n                                    }>{shownTimeString}</li>\r\n                                <MessageItem\r\n                                    message={item}\r\n                                    userId={props.userId}\r\n                                    addToReaded={props.addToReaded}\r\n                                    selectedMessagesId={props.selectedMessagesId}\r\n                                    showAuthor={firstNotReaded(index, messagesCount)}\r\n                                    changeSelectedMessage={props.changeSelectedMessage.bind(this, item._id)} />\r\n                            </React.Fragment>\r\n                        )\r\n                    }\r\n\r\n                    const [prevType, prevAuthor] = index !== 0 ? [\r\n                        props.topics[props.currTopicId].messages[index - 1].type,\r\n                        props.topics[props.currTopicId].messages[index - 1].creatorId._id,\r\n                    ] : null;\r\n\r\n                    return (\r\n                        <React.Fragment key={item._id}>\r\n                            {notReadedElement(index, messagesCount)}\r\n                            <MessageItem\r\n                                message={item}\r\n                                userId={props.userId}\r\n                                addToReaded={props.addToReaded}\r\n                                prevType={prevType}\r\n                                prevAuthor={prevAuthor}\r\n                                selectedMessagesId={props.selectedMessagesId}\r\n                                showAuthor={firstNotReaded(index, messagesCount)}\r\n                                changeSelectedMessage={props.changeSelectedMessage.bind(this, item._id)} />\r\n                        </React.Fragment>\r\n                    )\r\n                })\r\n            }\r\n            <li style={{ textAlign: 'center', padding: '0 10%' }} className={'message'}>\r\n                {props.savingMessages\r\n                    ? <LinearProgress variant=\"determinate\" value={props.loadingFileProgress} />\r\n                    : null}\r\n            </li>\r\n        </List>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        topics: state.msg.topics,\r\n        userId: state.auth.id,\r\n        currTopicId: state.tpc.openedTopicId,\r\n        savingMessages: state.msg.savingMessages,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        addToReaded: (userId, messageId) => { dispatch(readMessageAction(userId, messageId)) }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MessageItems);\r\n","import React from 'react';\r\n\r\nconst EmptyMessages = () => {\r\n    return (\r\n        <div style={\r\n            {\r\n                alignSelf: 'center',\r\n                color: 'grey',\r\n                position: 'absolute',\r\n                top: '50%',\r\n                transform: 'translateY(-50%)',\r\n            }\r\n        }>No messages yet...</div>\r\n    )\r\n}\r\n\r\nexport default EmptyMessages;","import React from 'react';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nconst LoadMessages = () => {\r\n    return (\r\n        <div style={\r\n            {\r\n                alignSelf: 'center',\r\n                position: 'absolute',\r\n                top: '50%',\r\n                transform: 'translateY(-50%)',\r\n            }\r\n        }><CircularProgress disableShrink /></div>\r\n    )\r\n}\r\n\r\nexport default LoadMessages;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport $ from 'jquery';\r\nimport axios from '../../../../utility/axios-instance';\r\n\r\nimport useStyles from '../styles';\r\nimport MessageItems from './MessageItems/MessageItems';\r\nimport EmptyMessages from './EmptyMessages/EmptyMessages';\r\nimport LoadMessages from './LoadMessages/LoadMessages';\r\nimport { fetchMessagesAction } from '../../../../store/actions/messages';\r\n\r\nconst scrollToTopPosition = (topPosition, parent, delay = 0) => {\r\n    return new Promise((resolve, reject) => {\r\n        $(parent).animate({ scrollTop: topPosition }, delay, () => {\r\n            resolve();\r\n        });\r\n    });\r\n}\r\n\r\nconst getTopPostion = (el) => {\r\n    return $(el).offset().top\r\n}\r\n\r\nconst topicIsExist = (topic) => {\r\n    return topic && topic.messages;\r\n}\r\n\r\nconst MessageBlock = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [fetching, setFetching] = useState(false);\r\n    const [, setAllowToFetch] = useState(false);\r\n    const [, setSkip] = useState(0);\r\n    const [newMessagesLabelPosition, setNewMessagesLabelPosition] = useState(0);\r\n    const [firstFetching, setFirstFetching] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (props.currTopicId) {\r\n            axios.post('/topic/messages/single/readers/' + props.currTopicId, { userId: props.userId })\r\n                .then(count => {\r\n                    setNewMessagesLabelPosition(count.data);\r\n\r\n                    let displayCount = count.data;\r\n                    displayCount += 5;\r\n                    if (displayCount < 15) displayCount += 15 - displayCount;    //prepend 5 messages to unreaded messages\r\n                    loadMessagesHistory(displayCount, true).then(() => {\r\n                        firstFetchingScroll();\r\n                    });\r\n                })\r\n        }\r\n    }, [props.currTopicId])\r\n\r\n    useEffect(() => {\r\n        if (props.savingMessages === true) savingMessageScroll();\r\n        else {\r\n            setNewMessagesLabelPosition(0);\r\n            props.changeProgress(0);\r\n            setTimeout(() => savingMessageScroll(), 300);\r\n        }\r\n    }, [props.savingMessages])\r\n\r\n    useEffect(() => {\r\n        if (props.recivingMessage === false) {\r\n            setNewMessagesLabelPosition(0);\r\n            setTimeout(() => savingMessageScroll(), 300);\r\n        }\r\n        else setSkip(prevState => prevState + 1);\r\n    }, [props.recivingMessage])\r\n\r\n    const getSkip = () => {\r\n        let skip = null;\r\n        setSkip(prevState => {\r\n            skip = prevState;\r\n            return prevState;\r\n        });\r\n        return skip;\r\n    }\r\n\r\n    const getLastAllowToFetch = () => {\r\n        let allow = null;\r\n        setAllowToFetch(prevState => {\r\n            allow = prevState;\r\n            return prevState;\r\n        });\r\n        return allow;\r\n    }\r\n\r\n    const getLastFetching = () => {\r\n        let fetching = null;\r\n        setFetching(prevState => {\r\n            fetching = prevState;\r\n            return prevState;\r\n        });\r\n        return fetching;\r\n    }\r\n\r\n    const firstFetchingScroll = () => {\r\n        setFirstFetching(false);\r\n\r\n        let messages = document.querySelector(\".messages\");\r\n        let message = document.querySelector(\".messages .not-readed-message\");\r\n        let goBack = 110;\r\n\r\n        if (!message) {\r\n            goBack = 0;\r\n            message = document.querySelector(\".messages .message:last-of-type\");\r\n        }\r\n\r\n        setTimeout(() => {\r\n            if (message) {\r\n                scrollToTopPosition(getTopPostion(message) - goBack, messages, 300)\r\n                    .then(() => setAllowToFetch(true));\r\n            } else {\r\n                setAllowToFetch(true);\r\n            }\r\n        }, 500)\r\n    }\r\n\r\n    const savingMessageScroll = () => {\r\n        let lastMessage = document.querySelector(\".messages .message:last-of-type\");\r\n        if (lastMessage) {\r\n            lastMessage.scrollIntoView();\r\n        }\r\n    }\r\n\r\n    const prevFetchingScroll = (firstMessage, oldFirstMessageTopPosition) => {\r\n        const messages = document.querySelector(\".messages\");\r\n        let newFirstMessageTopPosition = getTopPostion(firstMessage);\r\n\r\n        if (firstMessage) {\r\n            scrollToTopPosition(newFirstMessageTopPosition - oldFirstMessageTopPosition, messages)\r\n                .then(() => setFetching(false));\r\n        } else {\r\n            setFetching(false);\r\n        }\r\n    }\r\n\r\n    const fetchPreviousMessages = () => {\r\n        if (!getLastAllowToFetch() || getLastFetching()) return;\r\n        const firstMessage = document.querySelectorAll(\".messages .message\")[1];\r\n        if (!firstMessage) return;\r\n\r\n        const oldFirstMessageTopPosition = getTopPostion(firstMessage);\r\n\r\n        setFetching(true);\r\n        loadMessagesHistory(15).then(() => {\r\n            if (!firstMessage) return;\r\n            prevFetchingScroll(firstMessage, oldFirstMessageTopPosition);\r\n        });\r\n    }\r\n\r\n    const loadMessagesHistory = (limit, isFirstLoad) => {\r\n        return new Promise((resolve, reject) => {\r\n            if (isFirstLoad && topicIsExist(props.topic)) {\r\n                setSkip(props.topic.messages.length);\r\n                resolve();\r\n                return;\r\n            }\r\n\r\n            const data = {\r\n                skip: getSkip(),\r\n                limit,\r\n                currTopicId: props.currTopicId,\r\n                resolve,\r\n                setAllowToFetch,\r\n                setSkip,\r\n            }\r\n            props.fetchMessages(data);\r\n        })\r\n    }\r\n\r\n    let messages = <EmptyMessages />\r\n    if (topicIsExist(props.topic)) {\r\n        messages = <MessageItems\r\n            fetchPreviousMessages={fetchPreviousMessages}\r\n            fetching={fetching}\r\n            loadingFileProgress={props.loadingFileProgress}\r\n            changeSelectedMessage={props.changeSelectedMessage}\r\n            selectedMessagesId={props.selectedMessagesId}\r\n            filter={props.filter}\r\n            newMessagesLabelPosition={newMessagesLabelPosition} />\r\n    }\r\n\r\n    if (firstFetching) messages = <LoadMessages />\r\n\r\n    return (\r\n        <div className={classes.messagesBlock}>\r\n            {messages}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        topic: state.msg.topics[state.tpc.openedTopicId],\r\n        currTopicId: state.tpc.openedTopicId,\r\n        savingMessages: state.msg.savingMessages,\r\n        recivingMessage: state.msg.recivingMessage,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        fetchMessages: (data) => { dispatch(fetchMessagesAction(data)) }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MessageBlock);\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Button } from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\n\r\nimport useStyles from '../../styles';\r\nimport * as messageTypes from '../../../../../utility/message-types';\r\nimport { removeMessageAction } from '../../.././../../store/actions/messages';\r\n\r\nconst someIsSelected = (selectedsId) => {\r\n    if (selectedsId.length > 0) return true;\r\n    return false;\r\n}\r\n\r\nconst selectedIsEditable = (selectedsId, messages) => {\r\n    if (selectedsId.length !== 1) return false;\r\n    const isEditable = selectedsId.reduce((editable, item) => {\r\n        const message = messages.find(message => message._id === item);\r\n\r\n        if (!message) return editable;\r\n\r\n        if (message.type === messageTypes.TEXT || message.type === messageTypes.LINK)\r\n            return editable && true;\r\n        else\r\n            return editable && false;\r\n    }, true)\r\n\r\n    return isEditable;\r\n}\r\n\r\nconst MessageActions = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [content, setContent] = useState([]);\r\n\r\n    const editMessageHandler = (event) => {\r\n        event.stopPropagation();\r\n        props.editingMessageStart();\r\n    }\r\n\r\n    const removeMessageHandler = (event) => {\r\n        event.stopPropagation();\r\n\r\n        props.selectedMessagesId.map(messageId => {\r\n            return props.removeMessage(messageId, props.socket);\r\n        })\r\n        \r\n        props.clearSelectedMessages();\r\n    }\r\n\r\n    const deleteButton = <Button\r\n        key={'delete'}\r\n        size=\"small\"\r\n        color={'secondary'}\r\n        className={classes.deleteButton}\r\n        onClick={removeMessageHandler} >Delete</Button>\r\n\r\n    const editButton = <Button\r\n        key={'edit'}\r\n        size=\"small\"\r\n        className={classes.editButton}\r\n        onClick={editMessageHandler} >Edit</Button>\r\n\r\n    useEffect(() => {\r\n        const buttons = [];\r\n        if (props.topic && selectedIsEditable(props.selectedMessagesId, props.topic.messages)) {\r\n            buttons.push(editButton);\r\n        }\r\n        if (props.topic && someIsSelected(props.selectedMessagesId)) {\r\n            buttons.push(deleteButton);\r\n        }\r\n\r\n        setContent([...buttons]);\r\n    }, [props.topic, props.selectedMessagesId])\r\n\r\n    return (\r\n        <div className={classes.messageActionsBlock}>\r\n            {content}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        topic: state.msg.topics[state.tpc.openedTopicId],\r\n        socket: state.sckt.socket,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        removeMessage: (messageId, socket) => { dispatch(removeMessageAction(messageId, socket)) }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MessageActions);\r\n","import React from 'react';\r\nimport { Chip } from '@material-ui/core';\r\nimport {\r\n    InsertDriveFileRounded,\r\n    PhotoSizeSelectActualRounded,\r\n    MovieRounded,\r\n    LinkRounded,\r\n    Done\r\n} from '@material-ui/icons';\r\n\r\nimport useStyles from '../../styles';\r\n\r\nconst FilterActions = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const handleFile = (startFilter) => {\r\n        const currentFilter = { ...props.filter };\r\n        currentFilter.files = startFilter;\r\n        props.setFilter({ ...currentFilter });\r\n    }\r\n\r\n    const handlePhoto = (startFilter) => {\r\n        const currentFilter = { ...props.filter };\r\n        currentFilter.photos = startFilter;\r\n        props.setFilter({ ...currentFilter });\r\n    }\r\n\r\n    const handleVideo = (startFilter) => {\r\n        const currentFilter = { ...props.filter };\r\n        currentFilter.videos = startFilter;\r\n        props.setFilter({ ...currentFilter });\r\n    }\r\n\r\n    const handleLink = (startFilter) => {\r\n        const currentFilter = { ...props.filter };\r\n        currentFilter.links = startFilter;\r\n        props.setFilter({ ...currentFilter });\r\n    }\r\n\r\n    return (\r\n        <div className={classes.filterActionsBlock}>\r\n            <Chip\r\n                icon={<InsertDriveFileRounded />}\r\n                label=\"By Files\"\r\n                clickable\r\n                className={classes.filterChip}\r\n                color=\"primary\"\r\n                onClick={handleFile.bind(this, true)}\r\n                onDelete={handleFile.bind(this, false)}\r\n                deleteIcon={props.filter.files ? null : <Done /> }\r\n                variant={props.filter.files ? 'default' : 'default'}\r\n            />\r\n            <Chip\r\n                icon={<PhotoSizeSelectActualRounded />}\r\n                label=\"By Photos\"\r\n                clickable\r\n                className={classes.filterChip}\r\n                color=\"primary\"\r\n                onClick={handlePhoto.bind(this, true)}\r\n                onDelete={handlePhoto.bind(this, false)}\r\n                deleteIcon={props.filter.photos ? null : <Done /> }\r\n                variant={props.filter.photos ? 'default' : 'default'}\r\n            />\r\n            <Chip\r\n                icon={<MovieRounded />}\r\n                label=\"By Videos\"\r\n                clickable\r\n                className={classes.filterChip}\r\n                color=\"primary\"\r\n                onClick={handleVideo.bind(this, true)}\r\n                onDelete={handleVideo.bind(this, false)}\r\n                deleteIcon={props.filter.videos ? null : <Done /> }\r\n                variant={props.filter.videos ? 'default' : 'default'}\r\n            />\r\n            <Chip\r\n                icon={<LinkRounded />}\r\n                label=\"By Links\"\r\n                clickable\r\n                className={classes.filterChip}\r\n                color=\"primary\"\r\n                onClick={handleLink.bind(this, true)}\r\n                onDelete={handleLink.bind(this, false)}\r\n                deleteIcon={props.filter.links ? null : <Done /> }\r\n                variant={props.filter.links ? 'default' : 'default'}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FilterActions;\r\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n    ExpansionPanel,\r\n    ExpansionPanelDetails,\r\n    ExpansionPanelSummary,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport { connect } from 'react-redux';\r\n\r\nimport useStyles from '../styles';\r\nimport MessageActions from './MessageActions/MessageActions';\r\nimport FilterActions from './FilterActions/FilterActions';\r\n\r\nconst getCurrentTopic = (topics, idTopic) => {\r\n    for (let topic of topics) {\r\n        if (topic._id === idTopic) return topic;\r\n    }\r\n}\r\n\r\nconst ActionsBlock = (props) => {\r\n    const classes = useStyles(useStyles);\r\n\r\n    const [expanded, setExpanded] = useState(false);\r\n\r\n    const handleChange = panel => (event, isExpanded) => {\r\n        setExpanded(isExpanded ? true : false);\r\n    };\r\n\r\n    const [topicName, setTopicName] = useState('');\r\n    const [topicNote, setTopicNote] = useState('');\r\n    const [membersCount, setMembersCount] = useState('');\r\n\r\n    useEffect(() => {\r\n        if (!props.openedTopicId) return;\r\n        const topic = getCurrentTopic(props.topics, props.openedTopicId);\r\n\r\n        setTopicName(topic.name);\r\n        setTopicNote(topic.note);\r\n        setMembersCount(topic.membersId.length);\r\n    }, [props.openedTopicId])\r\n\r\n    const handleBlur = () => {\r\n        setExpanded(false);\r\n    }\r\n\r\n    return (\r\n        <div className={classes.actionsBlock}>\r\n            <ExpansionPanel expanded={expanded} onChange={handleChange(expanded)} onBlur={handleBlur} className={classes.expansionMenu}>\r\n                <ExpansionPanelSummary\r\n                    expandIcon={<ExpandMoreIcon />}\r\n                    aria-controls=\"panel1bh-content\"\r\n                    id=\"panel1bh-header\"\r\n                    className={classes.topicData}\r\n                >\r\n                    <Typography className={classes.topicName}>{topicName}</Typography>\r\n                    <Typography className={classes.membersCount}>\r\n                        {membersCount +\r\n                            ((membersCount > 1)\r\n                                ? ' members'\r\n                                : ' member')}\r\n                    </Typography>\r\n                    <MessageActions\r\n                        selectedMessagesId={props.selectedMessagesId}\r\n                        editingMessageStart={props.editingMessageStart}\r\n                        clearSelectedMessages={props.clearSelectedMessages} />\r\n                </ExpansionPanelSummary>\r\n                <ExpansionPanelDetails className={classes.secondaryActions}>\r\n                    <Typography className={classes.topicNote}>{topicNote}</Typography>\r\n                    <FilterActions\r\n                        filter={props.filter}\r\n                        setFilter={props.setFilter} />\r\n                </ExpansionPanelDetails>\r\n            </ExpansionPanel>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        topics: state.tpc.topics,\r\n        openedTopicId: state.tpc.openedTopicId,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ActionsBlock);\r\n","import React, { useEffect, useState } from 'react';\r\nimport Dropzone from 'react-dropzone';\r\nimport { connect } from 'react-redux';\r\n\r\nimport useStyles from './styles';\r\nimport InputBlock from './InputBlock/InputBlock';\r\nimport MessageBlock from './MessageBlock/MessageBlock';\r\nimport ActionsBlock from './ActionsBlock/ActionsBlock';\r\nimport { setCurrentTopicActionCreator } from '../../../store/actions/topics';\r\nimport { sendFileMessageAction } from '../../../store/actions/messages';\r\n\r\nconst TopicContent = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [loadingFileProgress, setLoadingFileProgress] = useState(0);\r\n\r\n    const [editingMessage, setEditingMessage] = useState(null);\r\n\r\n    const [selectedMessagesId, setSelectedMessageId] = useState([]);\r\n\r\n    const [filter, setFilter] = useState({\r\n        files: false,\r\n        photos: false,\r\n        videos: false,\r\n        links: false,\r\n    });\r\n\r\n    const editingMessageHandler = () => {\r\n        if (selectedMessagesId.length === 1)\r\n            setEditingMessage(selectedMessagesId[0]);\r\n    }\r\n\r\n    const changeSelectedMessage = (messageId) => {\r\n        if (selectedMessagesId.includes(messageId)) {\r\n            const newCollection = selectedMessagesId.filter(item => item !== messageId);\r\n            setSelectedMessageId([...newCollection]);\r\n        }\r\n        else {\r\n            const newCollection = [...selectedMessagesId];\r\n            newCollection.push(messageId);\r\n            setSelectedMessageId([...newCollection]);\r\n        }\r\n\r\n        setEditingMessage(null);\r\n    }\r\n\r\n    const clearSelectedMessages = () => {\r\n        setSelectedMessageId([]);\r\n        setEditingMessage(null);\r\n    }\r\n\r\n    const changeProgress = (newProgress) => {\r\n        setLoadingFileProgress(newProgress);\r\n    }\r\n\r\n    const dispatchFiles = (files) => {\r\n        files.map(file => {\r\n            const messageData = {\r\n                file: file,\r\n                sender: props.userId,\r\n            }\r\n            return props.uploadFile(messageData, props.socket, changeProgress);\r\n        });\r\n    }\r\n\r\n    const roomName = props.match.params.id;\r\n\r\n    useEffect(() => {\r\n        props.setCurrentTopic(roomName);\r\n    }, [])\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Dropzone onDrop={acceptedFiles => { dispatchFiles(acceptedFiles, props.imageDrop) }}>\r\n                {({ getRootProps }) => (\r\n                    <section className={classes.dropSection}>\r\n                        <div {...getRootProps()} className={classes.dropArea}>\r\n                            <ActionsBlock\r\n                                selectedMessagesId={selectedMessagesId}\r\n                                editingMessageStart={editingMessageHandler}\r\n                                clearSelectedMessages={clearSelectedMessages}\r\n                                filter={filter}\r\n                                setFilter={setFilter} />\r\n                            <MessageBlock\r\n                                loadingFileProgress={loadingFileProgress}\r\n                                changeSelectedMessage={changeSelectedMessage}\r\n                                selectedMessagesId={selectedMessagesId}\r\n                                changeProgress={changeProgress}\r\n                                userId={props.userId}\r\n                                filter={filter} />\r\n                            <InputBlock\r\n                                socketRoom={roomName}\r\n                                changeProgress={changeProgress}\r\n                                dispatchFiles={dispatchFiles}\r\n                                editingMessage={editingMessage}\r\n                                clearSelectedMessages={clearSelectedMessages} />\r\n                        </div>\r\n                    </section>\r\n                )}\r\n            </Dropzone>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        openLoading: state.msg.loading,\r\n        savingMessages: state.msg.savingMessages,\r\n        socket: state.sckt.socket,\r\n        userId: state.auth.id,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        setCurrentTopic: (topicId) => { dispatch(setCurrentTopicActionCreator(topicId)) },\r\n        uploadFile: (messageData, socket, changeProgress) => { dispatch(sendFileMessageAction(messageData, socket, changeProgress)) }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TopicContent);\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst style = makeStyles(theme => ({\r\n    root: {\r\n        padding: theme.spacing(3),\r\n        height: '100%',\r\n        width: '100%',\r\n        overflow: 'auto',\r\n        \"&::-webkit-scrollbar-track\": {\r\n            borderRadius: '10px',\r\n        },\r\n        \"&::-webkit-scrollbar\": {\r\n            width: '8px',\r\n            backgroundColor: 'transparent',\r\n        },\r\n        \"&::-webkit-scrollbar-thumb\": {\r\n            borderRadius: '10px',\r\n            backgroundColor: '#fff6ca',\r\n            opacity: '0.3',\r\n        },\r\n    },\r\n    gridConatainer: {\r\n        width: '100%',\r\n        margin: '0',\r\n        flexGrow: 1\r\n    },\r\n    topic: {\r\n        borderRadius: '5px',\r\n        height: '180px',\r\n        width: '100%',\r\n        background: '#FFFFFF',\r\n        boxShadow: theme.shadows[3],\r\n        \"&:hover\": {\r\n            background: '#FCFCFC',\r\n        }\r\n    },\r\n    topicInfo: {\r\n        height: 'inherit',\r\n        width: '100%',\r\n        padding: '10px 10px 5px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        flexDirection: 'column',\r\n        justifyContent: 'space-around',\r\n    },\r\n    topicLink: {\r\n        textDecoration: 'none',\r\n        color: '#000000',\r\n        fontFamily: 'Lato, sans-serif',\r\n    },\r\n    topicName: {\r\n        fontFamily: 'Lato, sans-serif',\r\n        fontSize: '28px',\r\n        margin: '0',\r\n        wordBreak: 'break-word',\r\n    },\r\n    topicNote: {\r\n        fontSize: '14px',\r\n        color: 'grey',\r\n        overflow: 'auto',\r\n        \"&::-webkit-scrollbar-track\": {\r\n            borderRadius: '10px',\r\n        },\r\n        \"&::-webkit-scrollbar\": {\r\n            width: '8px',\r\n            backgroundColor: 'transparent',\r\n        },\r\n        \"&::-webkit-scrollbar-thumb\": {\r\n            borderRadius: '10px',\r\n            backgroundColor: '#fff6ca',\r\n            opacity: '0.3',\r\n        },\r\n    },\r\n    topicCreated: {\r\n        color: 'grey',\r\n        fontSize: '12px',\r\n        margin: '0',\r\n    },\r\n    topicHat: {\r\n        height: '10px',\r\n        width: '100%',\r\n        position: 'absolute',\r\n        top: '0',\r\n        background: '#FFE66D',\r\n        borderTopLeftRadius: '5px',\r\n        borderTopRightRadius: '5px',\r\n    },\r\n    topicMenuButton: {\r\n        zIndex: '1',\r\n        position: 'absolute',\r\n        top: '15px',\r\n        right: '0',\r\n        transition: 'all .3s',\r\n        \"&:hover\": {\r\n            background: 'none',\r\n            color: '#000000',\r\n        }\r\n    },\r\n    unreadedCount: {\r\n        position: 'absolute',\r\n        left: '20px',\r\n        bottom: '20px',\r\n    }\r\n}));\r\n\r\nexport default style;\r\n","import React from 'react';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport {\r\n    IconButton,\r\n    Menu,\r\n    MenuItem,\r\n    Fade,\r\n    Snackbar\r\n} from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\n\r\nimport useStyles from '../../../styles';\r\nimport { leaveTopicAction } from '../../../../../../store/actions/topics';\r\n\r\nconst TopicMenu = (props) => {\r\n    const classes = useStyles();\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const open = Boolean(anchorEl);\r\n    const handleClick = event => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const [openSnackbar, setOpenSnackbar] = React.useState(false);\r\n\r\n    const handleCloseSnackbar = () => {\r\n        setOpenSnackbar(false);\r\n    }\r\n\r\n    const handleOpenSnackbar = () => {\r\n        setOpenSnackbar(true);\r\n    }\r\n\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const closeAndEdit = () => {\r\n        handleClose();\r\n        props.edtiDialogOpen();\r\n    }\r\n\r\n    const closeAndLeave = () => {\r\n        handleClose();\r\n        props.leaveTopic(props.topic._id, handleOpenSnackbar, props.socket);\r\n    }\r\n\r\n    const closeAndShare = () => {\r\n        handleClose();\r\n        props.shareDialogOpen();\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <IconButton\r\n                aria-label=\"more\"\r\n                aria-controls=\"long-menu\"\r\n                aria-haspopup=\"true\"\r\n                className={classes.topicMenuButton}\r\n                disableRipple={true}\r\n                onClick={handleClick}\r\n            >\r\n                <MoreVertIcon />\r\n            </IconButton>\r\n\r\n            <Menu\r\n                id=\"fade-menu\"\r\n                anchorEl={anchorEl}\r\n                keepMounted\r\n                open={open}\r\n                onClose={handleClose}\r\n                TransitionComponent={Fade}\r\n            >\r\n                <MenuItem onClick={closeAndShare}>Share topic</MenuItem>\r\n                <MenuItem onClick={closeAndEdit}>Edit name</MenuItem>\r\n                <MenuItem onClick={closeAndLeave}>Leave</MenuItem>\r\n            </Menu>\r\n\r\n            <Snackbar\r\n                anchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\r\n                open={openSnackbar}\r\n                onClose={handleCloseSnackbar}\r\n                message={'Topic was leaved'}\r\n            />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        socket: state.sckt.socket,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        leaveTopic: (topicId, handleOpenSnackbar, socket) => { dispatch(leaveTopicAction(topicId, handleOpenSnackbar, socket)) }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TopicMenu);\r\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n    Grid,\r\n    Zoom,\r\n    ButtonBase,\r\n    Badge\r\n} from '@material-ui/core';\r\nimport { ReactLink as Link } from '../../../../UI/Link/Link';\r\nimport { withRouter } from 'react-router-dom';\r\nimport axios from '../../../../../utility/axios-instance';\r\n\r\nimport useStyles from '../../styles';\r\nimport TopicMenu from './TopicMenu/TopicMenu';\r\n\r\nconst Topic = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [unreadedCount, setUnreadedCount] = useState(0);\r\n\r\n    useEffect(() => {\r\n        axios.post('/topic/messages/single/readers/' + props.data._id, { userId: props.userId })\r\n            .then(count => {\r\n                setUnreadedCount(count.data);\r\n            })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (!props.newUnreadMessage) return;\r\n\r\n        const unreadMessageTopicId = props.newUnreadMessage.topicId;\r\n        if (unreadMessageTopicId === props.data._id) setUnreadedCount(prevState => prevState + 1);\r\n        console.log(unreadMessageTopicId);\r\n    }, [props.newUnreadMessage])\r\n\r\n    return (\r\n        <Zoom in={true} style={{ transitionDelay: 200 * props.delay + 'ms', position: 'relative' }}>\r\n            <Grid item xs={12} sm={6} md={4} lg={3} >\r\n                <TopicMenu\r\n                    edtiDialogOpen={props.edtiDialogOpen}\r\n                    shareDialogOpen={props.shareDialogOpen}\r\n                    topic={props.data} />\r\n\r\n                <Link className={classes.topicLink} to={props.match.url + '/' + props.data._id}>\r\n                    <ButtonBase className={classes.topic}>\r\n                        <div className={classes.topicHat}></div>\r\n                        <div className={classes.topicInfo}>\r\n                            <p className={classes.topicName}>{props.data.name}</p>\r\n\r\n                            {props.data.note\r\n                                ? <p className={classes.topicNote}>{props.data.note}</p>\r\n                                : null}\r\n\r\n                            <p className={classes.topicCreated}>{props.data.date}</p>\r\n                            {\r\n                                unreadedCount > 0\r\n                                    ? <Badge\r\n                                        className={classes.unreadedCount}\r\n                                        badgeContent={unreadedCount}\r\n                                        max={99}\r\n                                        color={'primary'} />\r\n                                    : null\r\n                            }\r\n                        </div>\r\n                    </ButtonBase>\r\n                </Link>\r\n            </Grid>\r\n        </Zoom>\r\n    )\r\n}\r\n\r\nexport default withRouter(Topic);\r\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Slide,\r\n    TextField,\r\n    Snackbar\r\n} from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\n\r\nimport useStyles from './styles';\r\nimport { validation } from '../../../utility/validation';\r\nimport { editTopicAction, editTopicActionCreator } from '../../../store/actions/topics';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst EditTopic = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [stateInputs, setStateInputs] = useState({\r\n        title: {\r\n            config: {\r\n                name: 'title',\r\n                label: 'Title',\r\n            },\r\n            validationRules: {\r\n                isRequred: true,\r\n                maxLength: 20,\r\n            },\r\n            isValid: true,\r\n            validationMessage: '',\r\n            value: '',\r\n        },\r\n        notes: {\r\n            config: {\r\n                name: 'notes',\r\n                label: 'Notes',\r\n            },\r\n            validationRules: {\r\n                maxLength: 100,\r\n            },\r\n            isValid: true,\r\n            validationMessage: '',\r\n            value: '',\r\n        }\r\n    });\r\n\r\n    const [openSnackbar, setOpenSnackbar] = useState(false);\r\n\r\n    const handleCloseSnackbar = () => {\r\n        setOpenSnackbar(false);\r\n    }\r\n\r\n    const handleOpenSnackbar = () => {\r\n        setOpenSnackbar(true);\r\n    }\r\n\r\n    useEffect(() => {\r\n        props.topic === null ? clearTopic() : toPropsTopic();\r\n    }, [props.topic])\r\n\r\n    const clearTopic = () => {\r\n        setStateInputs(prevState => {\r\n            return {\r\n                ...prevState,\r\n                title: {\r\n                    ...prevState.title,\r\n                    isValid: true,\r\n                    validationMessage: '',\r\n                    value: '',\r\n                },\r\n                notes: {\r\n                    ...prevState.notes,\r\n                    isValid: true,\r\n                    validationMessage: '',\r\n                    value: '',\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    const toPropsTopic = () => {\r\n        setStateInputs(prevState => {\r\n            return {\r\n                ...prevState,\r\n                title: {\r\n                    ...prevState.title,\r\n                    value: props.topic.name,\r\n                },\r\n                notes: {\r\n                    ...prevState.notes,\r\n                    value: props.topic.note,\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    const editTopicHandler = () => {\r\n        const updateTopic = {\r\n            _id: props.topic._id,\r\n            name: stateInputs.title.value,\r\n            note: stateInputs.notes.value,\r\n            date: new Date().toLocaleDateString(),\r\n        }\r\n\r\n        //close dialog\r\n        props.handleClose();\r\n\r\n        //send patch request to api\r\n        props.startEditingTopic(updateTopic);\r\n\r\n        //update state\r\n        props.finishEditingTopic(updateTopic, handleOpenSnackbar);\r\n    }\r\n\r\n    const onInputHandler = (inputName, event) => {\r\n        const newValue = event.target.value;\r\n\r\n        const [currentValid, newValidationMessage] = validation(\r\n            newValue,\r\n            stateInputs[inputName].validationRules,\r\n            null\r\n        );\r\n\r\n        setStateInputs(prevState => ({\r\n            ...prevState,\r\n            [inputName]: {\r\n                ...prevState[inputName],\r\n                value: newValue,\r\n                isValid: currentValid,\r\n                validationMessage: newValidationMessage\r\n            }\r\n        }));\r\n    }\r\n\r\n    let inputs = [];\r\n    let fieldsIsValid = true;\r\n\r\n    for (let key in stateInputs) {\r\n        inputs.push(\r\n            <TextField\r\n                key={key}\r\n                className={classes.topicInput}\r\n                label={stateInputs[key].config.label}\r\n                name={stateInputs[key].config.name}\r\n                fullWidth\r\n                color=\"primary\"\r\n                value={stateInputs[key].value}\r\n                onInput={onInputHandler.bind(this, key)}\r\n                error={!stateInputs[key].isValid && stateInputs[key].value.length > 0}\r\n                helperText={stateInputs[key].validationMessage}\r\n            />\r\n        );\r\n\r\n        fieldsIsValid = stateInputs[key].isValid && fieldsIsValid;\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Dialog\r\n                open={props.open}\r\n                TransitionComponent={Transition}\r\n                keepMounted\r\n                maxWidth={'xs'}\r\n                onClose={props.handleClose}\r\n                aria-labelledby=\"alert-dialog-slide-title\"\r\n                aria-describedby=\"alert-dialog-slide-description\"\r\n            >\r\n                <div className={classes.dialogColorHat}></div>\r\n                <DialogTitle id=\"alert-dialog-slide-title\" className={classes.topicTitle}>{\"Edit Topic\"}</DialogTitle>\r\n                <DialogContent>\r\n                    {inputs}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button className={classes.closeBtn} onClick={props.handleClose}>Disagree</Button>\r\n                    <Button disabled={!fieldsIsValid} className={classes.agreeBtn} onClick={editTopicHandler}>Agree</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n\r\n            <Snackbar\r\n                anchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\r\n                open={openSnackbar}\r\n                onClose={handleCloseSnackbar}\r\n                message={'Topic was edited'}\r\n            />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        startEditingTopic: (topic) => { dispatch(editTopicAction(topic)) },\r\n        finishEditingTopic: (topic, handleOpenSnackbar) => { dispatch(editTopicActionCreator(topic, handleOpenSnackbar)) }\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(EditTopic);\r\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Slide,\r\n    TextField,\r\n    Snackbar\r\n} from '@material-ui/core';\r\nimport axios from '../../../utility/axios-instance';\r\n\r\nimport useStyles from './styles';\r\nimport { validation } from '../../../utility/validation';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ShareTopic = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [stateInputs, setStateInputs] = useState({\r\n        email: {\r\n            config: {\r\n                name: 'email',\r\n                label: 'Email',\r\n            },\r\n            validationRules: {\r\n                isRequred: true,\r\n                isEmail: true,\r\n            },\r\n            isValid: false,\r\n            validationMessage: '',\r\n            value: '',\r\n        },\r\n    });\r\n\r\n    const [openSnackbar, setOpenSnackbar] = useState(false);\r\n    const [snackbarMessage, setSnackbarMessage] = useState(null);\r\n\r\n    const handleCloseSnackbar = () => {\r\n        setOpenSnackbar(false);\r\n        setSnackbarMessage(null);\r\n    }\r\n\r\n    useEffect(() => {\r\n        props.topic === null ? clearTopic() : toPropsTopic();\r\n    }, [props.topic])\r\n\r\n    const clearTopic = () => {\r\n        setStateInputs(prevState => {\r\n            return {\r\n                ...prevState,\r\n                email: {\r\n                    ...prevState.email,\r\n                    isValid: false,\r\n                    validationMessage: '',\r\n                    value: '',\r\n                },\r\n            }\r\n        })\r\n    }\r\n\r\n    const toPropsTopic = () => {\r\n        setStateInputs(prevState => {\r\n            return {\r\n                ...prevState,\r\n                email: {\r\n                    ...prevState.email,\r\n                    value: '',\r\n                },\r\n            }\r\n        })\r\n    }\r\n\r\n    const shareTopicHandler = () => {\r\n        const newMemberData = {\r\n            currentMembers: props.topic.membersId,\r\n            email: stateInputs.email.value,\r\n        }\r\n\r\n        props.handleClose();\r\n        startShareTopic(props.topic._id, newMemberData);\r\n\r\n    }\r\n\r\n    const startShareTopic = (topicId, newMemberData) => {\r\n        axios.patch('/topics/single/share/' + topicId, newMemberData)\r\n            .then(response => {\r\n                setOpenSnackbar(true);\r\n                setSnackbarMessage('Topic shared successfully');\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n                setOpenSnackbar(true);\r\n                setSnackbarMessage(err.response.data.message);\r\n            });\r\n    }\r\n\r\n    const onInputHandler = (inputName, event) => {\r\n        const newValue = event.target.value;\r\n\r\n        const [currentValid, newValidationMessage] = validation(\r\n            newValue,\r\n            stateInputs[inputName].validationRules,\r\n            null\r\n        );\r\n\r\n        setStateInputs(prevState => ({\r\n            ...prevState,\r\n            [inputName]: {\r\n                ...prevState[inputName],\r\n                value: newValue,\r\n                isValid: currentValid,\r\n                validationMessage: newValidationMessage\r\n            }\r\n        }));\r\n    }\r\n\r\n    let inputs = [];\r\n    let fieldsIsValid = true;\r\n\r\n    for (let key in stateInputs) {\r\n        inputs.push(\r\n            <TextField\r\n                key={key}\r\n                className={classes.topicInput}\r\n                label={stateInputs[key].config.label}\r\n                name={stateInputs[key].config.name}\r\n                fullWidth\r\n                color=\"primary\"\r\n                value={stateInputs[key].value}\r\n                onInput={onInputHandler.bind(this, key)}\r\n                error={!stateInputs[key].isValid && stateInputs[key].value.length > 0}\r\n                helperText={stateInputs[key].validationMessage}\r\n            />\r\n        );\r\n\r\n        fieldsIsValid = stateInputs[key].isValid && fieldsIsValid;\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Dialog\r\n                open={props.open}\r\n                TransitionComponent={Transition}\r\n                keepMounted\r\n                maxWidth={'sm'}\r\n                onClose={props.handleClose}\r\n                aria-labelledby=\"alert-dialog-slide-title\"\r\n                aria-describedby=\"alert-dialog-slide-description\"\r\n            >\r\n                <div className={classes.dialogColorHat}></div>\r\n                <DialogTitle id=\"alert-dialog-slide-title\" className={classes.topicTitle}>{\"Share Topic\"}</DialogTitle>\r\n                <DialogContent>\r\n                    {inputs}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button className={classes.closeBtn} onClick={props.handleClose}>Cancel</Button>\r\n                    <Button disabled={!fieldsIsValid} className={classes.agreeBtn} onClick={shareTopicHandler}>Share</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n            <Snackbar\r\n                anchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\r\n                open={openSnackbar}\r\n                onClose={handleCloseSnackbar}\r\n                message={snackbarMessage}\r\n            />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default ShareTopic;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Grid } from '@material-ui/core';\r\n\r\nimport { getTopicsAction } from '../../../../store/actions/topics';\r\nimport useStyles from '../styles';\r\nimport Topic from './Topic/Topic';\r\nimport EditTopicDialog from '../../../UI/Dialog/EditTopic';\r\nimport ShareTopicDialog from '../../../UI/Dialog/ShareTopic';\r\nimport { setCurrentTopicActionCreator } from '../../../../store/actions/topics';\r\nimport {\r\n    saveMessageAction,\r\n    editRecivedMessageActionCreator,\r\n    removeRecivedMessageActionCreator\r\n} from '../../../../store/actions/messages';\r\n\r\nconst TopicsList = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [editTopicDialogOpen, setEditTopicDialogOpen] = useState(false);\r\n    const [shareTopicDialogOpen, setShareTopicDialogOpen] = useState(false);\r\n\r\n    const [selectedTopicData, setSelectedTopicData] = useState(null);\r\n\r\n    const [newUnreadMessage, setNewUnreadMessage] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (!props.wasFetched) {\r\n            props.getTopicsList(props.socket);\r\n\r\n            props.socket.on('recive-message', message => {\r\n                props.reciveMessage(message);\r\n                setNewUnreadMessage(message);\r\n            });\r\n\r\n            props.socket.on('recive-edited-message', message => {\r\n                props.changeMessage(message);\r\n            })\r\n\r\n            props.socket.on('recive-delete-message', message => {\r\n                props.deleteMessage(message);\r\n            })\r\n        }\r\n\r\n        props.setCurrentTopic(null);\r\n    }, [])\r\n\r\n    const edtiDialogOpen = (topic) => {\r\n        setSelectedTopicData(topic);\r\n        setEditTopicDialogOpen(true);\r\n    }\r\n\r\n    const shareDialogOpen = (topic) => {\r\n        setSelectedTopicData(topic);\r\n        setShareTopicDialogOpen(true);\r\n    }\r\n\r\n    const dialogClose = () => {\r\n        setEditTopicDialogOpen(false);\r\n        setShareTopicDialogOpen(false);\r\n        setSelectedTopicData(null);\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <EditTopicDialog open={editTopicDialogOpen} handleClose={dialogClose} topic={selectedTopicData} />\r\n            <ShareTopicDialog open={shareTopicDialogOpen} handleClose={dialogClose} topic={selectedTopicData} />\r\n\r\n            <div className={classes.root}>\r\n                <Grid container spacing={3} className={classes.gridConatainer}>\r\n                    {\r\n                        props.topics.map((item, index) => {\r\n                            return (\r\n                                <Topic\r\n                                    key={index}\r\n                                    data={item}\r\n                                    delay={index}\r\n                                    userId={props.userId}\r\n                                    newUnreadMessage={newUnreadMessage}\r\n                                    edtiDialogOpen={edtiDialogOpen.bind(this, item)}\r\n                                    shareDialogOpen={shareDialogOpen.bind(this, item)}\r\n                                />\r\n                            )\r\n                        })\r\n                    }\r\n                </Grid>\r\n            </div>\r\n        </React.Fragment >\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        socket: state.sckt.socket,\r\n        topics: state.tpc.topics,\r\n        wasFetched: state.tpc.wasFetched,\r\n        userId: state.auth.id,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        getTopicsList: (socket) => { dispatch(getTopicsAction(socket)) },\r\n        reciveMessage: (message) => { dispatch(saveMessageAction(message)) },\r\n        changeMessage: (message) => { dispatch(editRecivedMessageActionCreator(message)) },\r\n        deleteMessage: (message) => { dispatch(removeRecivedMessageActionCreator(message)) },\r\n        setCurrentTopic: (topicId) => { dispatch(setCurrentTopicActionCreator(topicId)) },\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TopicsList);\r\n","import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\n\r\nimport Links from '../FilterType/Links/Links';\r\nimport Photos from '../FilterType/Photos/Photos';\r\nimport Videos from '../FilterType/Videos/Videos';\r\nimport Files from '../FilterType/Files/Files';\r\nimport Notes from '../FilterType/Notes/Notes';\r\nimport TopicContent from '../TopicContent/TopicContent';\r\nimport TopicsList from './TopicsList/TopicsList';\r\n\r\nconst topics = (props) => {\r\n    return (\r\n        <Switch>\r\n            <Route path={props.match.url + '/links'} component={Links} exact />\r\n            <Route path={props.match.url + '/photos'} component={Photos} exact />\r\n            <Route path={props.match.url + '/videos'} component={Videos} exact />\r\n            <Route path={props.match.url + '/files'} component={Files} exact />\r\n            <Route path={props.match.url + '/notes'} component={Notes} exact />\r\n            <Route path={props.match.url + '/:id'} component={TopicContent} exact />\r\n            <Route path={props.match.url} component={TopicsList} />\r\n        </Switch>\r\n    )\r\n}\r\n\r\nexport default topics;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst style = makeStyles(theme => ({\r\n    root: {\r\n        height: '100%',\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        flexDirection: 'column',\r\n    },\r\n    imageBlock: {\r\n        height: '60%',\r\n        textAlign: 'center',\r\n    },\r\n    image: {\r\n        height: '100%',\r\n    },\r\n    title: {\r\n        textAlign: 'center',\r\n        fontSize: '35px',\r\n        fontFamily: '\"Poppins\", sans-serif',\r\n        color: 'rgba(0, 0, 0, 0.26)',\r\n    }\r\n}));\r\n\r\nexport default style;\r\n","import React from 'react';\r\nimport SoonMessage from '../../../assets/images/soon.png';\r\n\r\nimport useStyles from './styles.js';\r\n\r\nconst Draft = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <div className={classes.imageBlock}>\r\n                <img\r\n                    src={SoonMessage}\r\n                    className={classes.image}\r\n                    alt={'coming soon'} />\r\n            </div>\r\n            <div className={classes.title}>COMING SOON</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Draft;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst style = makeStyles(theme => ({\r\n    root: {\r\n        height: '100%',\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        flexDirection: 'column',\r\n    },\r\n    imageBlock: {\r\n        height: '60%',\r\n        textAlign: 'center',\r\n    },\r\n    image: {\r\n        height: '100%',\r\n    },\r\n    title: {\r\n        textAlign: 'center',\r\n        fontSize: '35px',\r\n        fontFamily: '\"Poppins\", sans-serif',\r\n        color: 'rgba(0, 0, 0, 0.26)',\r\n    }\r\n}));\r\n\r\nexport default style;\r\n","import React from 'react';\r\nimport IdeaMessage from '../../../assets/images/idea.png';\r\n\r\nimport useStyles from './styles.js';\r\n\r\nconst NotFound = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <div className={classes.imageBlock}>\r\n                <img\r\n                    src={IdeaMessage}\r\n                    className={classes.image}\r\n                    alt={'select topic'} />\r\n            </div>\r\n            <div className={classes.title}>SAVE YOUR IDEAS</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NotFound;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { CssBaseline } from '@material-ui/core';\r\nimport { Route } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport DrawerBlock from './DrawerBlock/DrawerBlock';\r\nimport AppBarBlock from './AppBarBlock/AppBarBlock';\r\nimport { finishLoadingActionCreator } from '../../store/actions/authorization';\r\nimport { connectSocketActionCreator } from '../../store/actions/socket';\r\nimport AnimatedSwitch from '../UI/AnimatedSwitch/AnimatedSwitch';\r\nimport useStyles from './styles';\r\n\r\n//pages components\r\nimport Topics from '../DrawerPages/Topics/Topics';\r\nimport Draft from '../DrawerPages/Draft/Draft';\r\nimport NotFound from '../DrawerPages/4O4/NotFound';\r\n\r\nconst AppSceleton = (props) => {\r\n    const [mobileOpen, setMobileOpen] = useState(false);\r\n\r\n    useEffect(() => {\r\n        props.finishLoading();\r\n        props.connectSocket();\r\n    }, [])\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleDrawerToggle = () => {\r\n        setMobileOpen(!mobileOpen);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <CssBaseline />\r\n            <AppBarBlock handleDrawerToggle={handleDrawerToggle} />\r\n            <DrawerBlock isMobile={mobileOpen} handleDrawerToggle={handleDrawerToggle} />\r\n\r\n            <main className={classes.content}>\r\n                <div className={classes.toolbar} />\r\n                <AnimatedSwitch classProp={'pageComponentWrapper'}>\r\n                    <Route path={props.match.url + '/topics'} component={Topics} />\r\n                    <Route path={props.match.url + '/draft'} component={Draft} />\r\n                    <Route path={props.match.url} component={NotFound} />\r\n                </AnimatedSwitch>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        finishLoading: () => { dispatch(finishLoadingActionCreator()) },\r\n        connectSocket: () => { dispatch(connectSocketActionCreator()) },\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(AppSceleton);","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.primary.main,\r\n    },\r\n    form: {\r\n        width: '100%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    submit: {\r\n    },\r\n    wrapper: {\r\n        background: 'white',\r\n        boxShadow: theme.shadows[2]\r\n    },\r\n    buttonWrapper: {\r\n        position: 'relative',\r\n        margin: theme.spacing(3, 0, 2),\r\n    },\r\n    redirectLink: {\r\n        color: theme.palette.primary.dark\r\n    },\r\n    errorAlert: {\r\n        marginTop: '10px',\r\n    },\r\n    buttonProgress: {\r\n        color: theme.palette.primary.main,\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n      },\r\n}));\r\n\r\nexport default useStyles;","import React, { useState, useEffect } from 'react';\r\nimport { Grid, Button, Typography, Checkbox, Link, TextField, FormControlLabel, CircularProgress } from '@material-ui/core';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport useStyles from '../../styles';\r\nimport { signInAction } from '../../../../store/actions/authorization';\r\nimport { validation } from '../../../../utility/validation';\r\nimport { ReactLink } from '../../../UI/Link/Link';\r\nimport { finishLoadingActionCreator } from '../../../../store/actions/authorization';\r\n\r\nconst SignInForm = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [rememberMe, setRememberMe] = useState(false);\r\n\r\n    const [stateInputs, setStateInputs] = useState({\r\n        email: {\r\n            config: {\r\n                name: 'email',\r\n                label: 'Email',\r\n            },\r\n            validationRules: {\r\n                isRequred: true,\r\n                isEmail: true,\r\n                shoudBeUniqe: true\r\n            },\r\n            isValid: false,\r\n            validationMessage: '',\r\n            value: '',\r\n        },\r\n        password: {\r\n            config: {\r\n                type: 'password',\r\n                name: 'password',\r\n                label: 'Password',\r\n            },\r\n            validationRules: {\r\n                isRequred: true,\r\n                minLength: true,\r\n            },\r\n            isValid: false,\r\n            validationMessage: '',\r\n            value: '',\r\n        },\r\n    });\r\n\r\n    useEffect(() => {\r\n        props.finishLoading();\r\n    }, [])\r\n\r\n    const signInHandler = (event) => {\r\n        event.preventDefault();\r\n\r\n        const loginData = {\r\n            email: stateInputs.email.value,\r\n            password: stateInputs.password.value\r\n        };\r\n\r\n        try {\r\n            props.onSignIn(loginData, rememberMe);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    const rememberCheckboxHandler = () => {\r\n        setRememberMe(prevState => {\r\n            return !prevState\r\n        })\r\n    }\r\n\r\n    const onInputHandler = (inputName, event) => {\r\n        const newValue = event.target.value;\r\n\r\n        const [currentValid, newValidationMessage] = validation(\r\n            newValue,\r\n            stateInputs[inputName].validationRules,\r\n            stateInputs.email.value\r\n        );\r\n\r\n        setStateInputs(prevState => ({\r\n            ...prevState,\r\n            [inputName]: {\r\n                ...prevState[inputName],\r\n                value: newValue,\r\n                isValid: currentValid,\r\n                validationMessage: newValidationMessage\r\n            }\r\n        }));\r\n    }\r\n\r\n    let inputs = [];\r\n    let fieldsIsValid = true;\r\n\r\n    for (let key in stateInputs) {\r\n        inputs.push(\r\n            <Grid item key={key} xs={12}>\r\n                <TextField\r\n                    label={stateInputs[key].config.label}\r\n                    name={stateInputs[key].config.name}\r\n                    type={stateInputs[key].config.type}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    color=\"primary\"\r\n                    value={stateInputs[key].value}\r\n                    onInput={onInputHandler.bind(this, key)}\r\n                    error={!stateInputs[key].isValid && stateInputs[key].value.length > 0}\r\n                    helperText={stateInputs[key].validationMessage}\r\n                />\r\n            </Grid>\r\n        );\r\n\r\n        fieldsIsValid = stateInputs[key].isValid && fieldsIsValid;\r\n    }\r\n\r\n    if (props.userId) return (\r\n        <Redirect to={'/pulp'} />\r\n    )\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Typography component=\"h1\" variant=\"h5\">Sign in</Typography>\r\n            <form className={classes.form} noValidate>\r\n                <Grid container spacing={2}>\r\n                    {inputs}\r\n                </Grid>\r\n\r\n                {\r\n                    props.errorMessage !== null\r\n                        ? <Alert severity=\"error\" className={classes.errorAlert}>{props.errorMessage}</Alert>\r\n                        : null\r\n                }\r\n\r\n                <FormControlLabel\r\n                    control={<Checkbox value=\"remember\" color=\"primary\" onChange={rememberCheckboxHandler} />}\r\n                    label=\"Remember me\" />\r\n\r\n                <div className={classes.buttonWrapper}>\r\n                    <Button\r\n                        type=\"submit\"\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        disabled={!fieldsIsValid || props.authStart}\r\n                        className={classes.submit}\r\n                        onClick={signInHandler}>\r\n                        <Typography variant=\"subtitle1\">Sign In</Typography>\r\n                    </Button>\r\n\r\n                    {props.authStart && <CircularProgress size={24} className={classes.buttonProgress} />}\r\n                </div>\r\n\r\n                <Grid container>\r\n                    <Grid item xs>\r\n                        <Link href=\"#\" variant=\"body2\" className={classes.redirectLink}>Forgot password?</Link>\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <Link component={ReactLink} to=\"/sign-up\" variant=\"body2\" className={classes.redirectLink}>\r\n                            {\"Don't have an account? Sign Up\"}\r\n                        </Link>\r\n                    </Grid>\r\n                </Grid>\r\n            </form>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        errorMessage: state.auth.errorMessage,\r\n        userId: state.auth.id,\r\n        authStart: state.auth.authStart\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        onSignIn: (loginData, rememberMe) => { dispatch(signInAction(loginData, rememberMe)) },\r\n        finishLoading: () => { dispatch(finishLoadingActionCreator()) }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignInForm);","import React from 'react';\r\nimport { Typography, Link } from '@material-ui/core';\r\n\r\nconst copyright = () => {\r\n    return (\r\n        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n          {'Copyright © '}\r\n          <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n            Your Website\r\n          </Link>{' '}\r\n          {new Date().getFullYear()}\r\n          {'.'}\r\n        </Typography>\r\n      );\r\n}\r\n\r\nexport default copyright;","import React from 'react';\r\nimport { Avatar, CssBaseline, Box, Container } from '@material-ui/core';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\n\r\nimport useStyles from '../styles';\r\nimport Copyright from '../../UI/Copyright/Copyright';\r\n\r\nconst AuthContainer = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Container component=\"main\" maxWidth=\"xs\" className={classes.wrapper}>\r\n            <CssBaseline />\r\n\r\n            <div className={classes.paper}>\r\n                <Avatar className={classes.avatar} pt={2}>\r\n                    <LockOutlinedIcon />\r\n                </Avatar>\r\n                {props.children}\r\n            </div>\r\n\r\n            <Box mt={5} pb={2}>\r\n                <Copyright />\r\n            </Box>\r\n        </Container >\r\n    )\r\n}\r\n\r\nexport default AuthContainer;","import React from 'react';\r\n\r\nimport SignInForm from './SignInForm/SignInForm';\r\nimport AuthContainer from '../AuthContainer/AuthContainer';\r\n\r\nconst SignIn = () => {\r\n  return (\r\n    <AuthContainer>\r\n      <SignInForm />\r\n    </AuthContainer>\r\n  );\r\n}\r\n\r\nexport default SignIn;","import React, { useState, useEffect } from 'react';\r\nimport axios from '../../../../utility/axios-instance';\r\nimport { Grid, Button, Typography, Link, TextField, CircularProgress } from '@material-ui/core';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport useStyles from '../../styles';\r\nimport { signUpAction } from '../../../../store/actions/authorization';\r\nimport { validation } from '../../../../utility/validation';\r\nimport { ReactLink } from '../../../UI/Link/Link';\r\nimport { finishLoadingActionCreator } from '../../../../store/actions/authorization';\r\n\r\nconst SignUpForm = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [emailIsCorrect, setEmailIsCorrect] = useState(false);\r\n    const [emailTimeoutId, setEmailTimeoutId] = useState(null);\r\n\r\n    const [stateInputs, setStateInputs] = useState({\r\n        email: {\r\n            config: {\r\n                name: 'email',\r\n                label: 'Email',\r\n            },\r\n            validationRules: {\r\n                isRequred: true,\r\n                isEmail: true,\r\n                shoudBeUniqe: true\r\n            },\r\n            isValid: false,\r\n            validationMessage: '',\r\n            value: '',\r\n        },\r\n        emailConfirm: {\r\n            config: {\r\n                name: 'email1',\r\n                label: 'Confirm Email',\r\n            },\r\n            validationRules: {\r\n                isRequred: true,\r\n                shoudBeEqual: true,\r\n            },\r\n            isValid: false,\r\n            validationMessage: '',\r\n            value: '',\r\n        },\r\n        password: {\r\n            config: {\r\n                type: 'password',\r\n                name: 'password',\r\n                label: 'Password',\r\n            },\r\n            validationRules: {\r\n                isRequred: true,\r\n                minLength: true,\r\n            },\r\n            isValid: false,\r\n            validationMessage: '',\r\n            value: '',\r\n        },\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (!emailIsCorrect) return;\r\n\r\n        clearTimeout(emailTimeoutId);\r\n\r\n        const timeoutId = setTimeout(() => {\r\n            const data = {\r\n                email: stateInputs.email.value\r\n            }\r\n\r\n            axios.post('/user/email-exists', data)\r\n                .then(response => {\r\n\r\n                    if (response.data) {\r\n                        setStateInputs(prevState => ({\r\n                            ...prevState,\r\n                            email: {\r\n                                ...prevState.email,\r\n                                isValid: false,\r\n                                validationMessage: 'Email already exist',\r\n                            }\r\n                        }))\r\n\r\n                    }\r\n                })\r\n                .catch(err => console.log(err))\r\n\r\n        }, 800);\r\n        setEmailTimeoutId(timeoutId);\r\n    }, [stateInputs.email.value]);\r\n\r\n    useEffect(() => {\r\n        props.finishLoading();\r\n    }, [])\r\n\r\n    const signUpHandler = (event) => {\r\n        event.preventDefault();\r\n\r\n        const newUser = {\r\n            email: stateInputs.email.value,\r\n            password: stateInputs.password.value\r\n        };\r\n\r\n        try {\r\n            props.onSignUp(newUser);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    const onInputHandler = (inputName, event) => {\r\n        const newValue = event.target.value;\r\n\r\n        const [currentValid, newValidationMessage] = validation(\r\n            newValue,\r\n            stateInputs[inputName].validationRules,\r\n            stateInputs.email.value\r\n        );\r\n\r\n        checkEmailIsCorrect(inputName, currentValid);\r\n\r\n        setStateInputs(prevState => ({\r\n            ...prevState,\r\n            [inputName]: {\r\n                ...prevState[inputName],\r\n                value: newValue,\r\n                isValid: currentValid,\r\n                validationMessage: newValidationMessage\r\n            }\r\n        }));\r\n    }\r\n\r\n    const checkEmailIsCorrect = (imputName, isValid) => {\r\n        if (imputName === 'email') setEmailIsCorrect(isValid);\r\n    }\r\n\r\n    let inputs = [];\r\n    let fieldsIsValid = true;\r\n\r\n    for (let key in stateInputs) {\r\n        inputs.push(\r\n            <Grid item key={key} xs={12}>\r\n                <TextField\r\n                    label={stateInputs[key].config.label}\r\n                    name={stateInputs[key].config.name}\r\n                    type={stateInputs[key].config.type}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    color=\"primary\"\r\n                    value={stateInputs[key].value}\r\n                    onInput={onInputHandler.bind(this, key)}\r\n                    error={!stateInputs[key].isValid && stateInputs[key].value.length > 0}\r\n                    helperText={stateInputs[key].validationMessage}\r\n                />\r\n            </Grid>\r\n        );\r\n\r\n        fieldsIsValid = stateInputs[key].isValid && fieldsIsValid;\r\n    }\r\n\r\n    if (props.userId) return (\r\n        <Redirect to={'/pulp'} />\r\n    )\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Typography component=\"h1\" variant=\"h5\">Sign up</Typography>\r\n            <form className={classes.form} noValidate>\r\n                <Grid container spacing={2}>\r\n                    {inputs}\r\n                </Grid>\r\n\r\n                {\r\n                    props.errorMessage !== null\r\n                        ? <Alert severity=\"error\" className={classes.errorAlert}>{props.errorMessage}</Alert>\r\n                        : null\r\n                }\r\n\r\n                <div className={classes.buttonWrapper}>\r\n                    <Button\r\n                        type=\"submit\"\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        disabled={!fieldsIsValid || props.authStart}\r\n                        className={classes.submit}\r\n                        onClick={signUpHandler}\r\n                    >\r\n                        <Typography variant=\"subtitle1\">Sign Up</Typography>\r\n                    </Button>\r\n\r\n                    {props.authStart && <CircularProgress size={24} className={classes.buttonProgress} />}\r\n                </div>\r\n\r\n                <Grid container justify=\"flex-end\">\r\n                    <Grid item>\r\n                        <Link component={ReactLink} to=\"/sign-in\" variant=\"body2\" className={classes.redirectLink}>\r\n                            {'Already have an account? Sign in'}\r\n                        </Link>\r\n                    </Grid>\r\n                </Grid>\r\n            </form>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        errorMessage: state.auth.errorMessage,\r\n        userId: state.auth.id,\r\n        authStart: state.auth.authStart\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        onSignUp: (newUser) => dispatch(signUpAction(newUser)),\r\n        finishLoading: () => { dispatch(finishLoadingActionCreator()) }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignUpForm);","import React from 'react';\r\n\r\nimport SignUpForm from './SignUpForm/SignUpForm';\r\nimport AuthContainer from '../AuthContainer/AuthContainer';\r\n\r\nconst SignUp = () => {\r\n  return (\r\n    <AuthContainer>\r\n      <SignUpForm />\r\n    </AuthContainer>\r\n  );\r\n}\r\n\r\nexport default SignUp;","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    backdrop: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n        background: '#FFFFFF',\r\n      },\r\n}));\r\n\r\nexport default useStyles;","import React from 'react';\r\nimport { Backdrop, CircularProgress } from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\n\r\nimport useStyles from './styles';\r\n\r\nconst Loading = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Backdrop className={classes.backdrop} open={props.isLoading}>\r\n            <CircularProgress color=\"primary\" />\r\n        </Backdrop>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isLoading: state.auth.loading,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Loading);","import React, { useEffect } from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport AppSceleton from '../AppSkeleton/AppSceleton';\r\nimport SignIn from '../Authorization/SignIn/SignIn';\r\nimport SignUp from '../Authorization/SignUp/SignUp';\r\nimport Loading from '../UI/Loading/Loading';\r\nimport { signInLocalAction, refreshTokenAction } from '../../store/actions/authorization';\r\nimport AnimatedSwitch from '../UI/AnimatedSwitch/AnimatedSwitch';\r\n\r\nconst Layout = (props) => {\r\n  useEffect(() => {\r\n    if (localStorage.getItem('token')) {\r\n      const expiresIn = localStorage.getItem('expirationTime') - 30;\r\n\r\n      if (+Math.floor((new Date().getTime() / 1000)) >= expiresIn) {\r\n        const token = {\r\n          token: localStorage.getItem('token')\r\n        }\r\n\r\n        props.refreshTokenAndSignIn(token);\r\n      } else {\r\n        props.signInByLocalData();\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  if (props.userId) {\r\n    return (\r\n      <React.Fragment>\r\n        <Loading />\r\n        <AnimatedSwitch>\r\n          <Route path=\"/pulp\" component={AppSceleton} />\r\n          <Route path=\"/\" render={() => <Redirect to=\"/pulp\" />} />\r\n        </AnimatedSwitch>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Loading />\r\n      <AnimatedSwitch>\r\n        <Route path=\"/sign-in\" component={SignIn} exact />\r\n        <Route path=\"/sign-up\" component={SignUp} exact />\r\n        <Route path=\"/\" render={() => <Redirect to=\"/sign-in\" />} />\r\n      </AnimatedSwitch>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    userId: state.auth.id\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    signInByLocalData: () => { dispatch(signInLocalAction()) },\r\n    refreshTokenAndSignIn: (token) => { dispatch(refreshTokenAction(token)) }\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Layout);","import React from 'react';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport Layout from './component/Layout/Layout';\nimport './App.module.css';\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <div className=\"App\">\n        <Layout />\n      </div>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import jwt from 'jsonwebtoken';\r\n\r\nimport * as actionTypes from '../actions/actionTypes';\r\n\r\nconst initialState = {\r\n    id: null,\r\n    email: null,\r\n    token: null,\r\n    expirationTime: null,\r\n    errorMessage: null,\r\n    authStart: false,\r\n    loading: true,\r\n    refreshTimerId: null\r\n}\r\n\r\nconst saveToLocalStorage = (data) => {\r\n    localStorage.setItem('id', data.id);\r\n    localStorage.setItem('email', data.email);\r\n    localStorage.setItem('token', data.token);\r\n    localStorage.setItem('expirationTime', data.expirationTime);\r\n}\r\n\r\nconst clearLocalStorage = () => {\r\n    localStorage.clear();\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.AUTH_START: {\r\n            return {\r\n                errorMessage: null,\r\n                authStart: true,\r\n                loading: false\r\n            }\r\n        }\r\n\r\n        case actionTypes.SIGN_IN: {\r\n            const decoded = jwt.decode(action.token.data);\r\n\r\n            const userData = {\r\n                id: decoded.id,\r\n                email: decoded.email,\r\n                token: action.token.data,\r\n                expirationTime: decoded.exp\r\n            }\r\n\r\n            if (action.remember) saveToLocalStorage(userData);\r\n\r\n            return {\r\n                ...userData,\r\n                loading: true\r\n            };\r\n        }\r\n\r\n        case actionTypes.SIGN_UP: {\r\n            const decoded = jwt.decode(action.token.data);\r\n\r\n            const userData = {\r\n                id: decoded.id,\r\n                email: decoded.email,\r\n                token: action.token.data,\r\n                expirationTime: decoded.exp\r\n            }\r\n\r\n            return {\r\n                ...userData,\r\n                loading: true\r\n            };\r\n        }\r\n\r\n        case actionTypes.AUTH_ERROR: {\r\n            if (action.err.response === undefined)\r\n                return {\r\n                    errorMessage: 'Service is unavailable. Please, try later...',\r\n                    authStart: false,\r\n                    loading: false\r\n                }\r\n            return {\r\n                errorMessage: action.err.response.data.message,\r\n                authStart: false,\r\n                loading: false\r\n            }\r\n        }\r\n\r\n        case actionTypes.LOAD_FINISH: {\r\n            return {\r\n                ...state,\r\n                loading: false\r\n            }\r\n        }\r\n\r\n        case actionTypes.REFRESH_TOKEN: {\r\n            const decoded = jwt.decode(action.token.data);\r\n\r\n            const userData = {\r\n                id: decoded.id,\r\n                email: decoded.email,\r\n                token: action.token.data,\r\n                expirationTime: decoded.exp\r\n            }\r\n\r\n            saveToLocalStorage(userData);\r\n\r\n            return {\r\n                ...userData,\r\n                loading: false\r\n            };\r\n        }\r\n\r\n        case actionTypes.SIGN_IN_LOCALY: {\r\n            const userData = {\r\n                id: localStorage.getItem('id'),\r\n                email: localStorage.getItem('email'),\r\n                token: localStorage.getItem('token'),\r\n                expirationTime: localStorage.getItem('expirationTime')\r\n            }\r\n\r\n            return {\r\n                ...userData,\r\n                loading: false\r\n            };\r\n        }\r\n\r\n        case actionTypes.RESET_TIMEOUT_ID: {\r\n            return {\r\n                ...state,\r\n                refreshTimerId: action.id\r\n            };\r\n        }\r\n\r\n        case actionTypes.LOGOUT: {\r\n            clearLocalStorage();\r\n\r\n            return { ...initialState }\r\n        }\r\n\r\n        default: return state;\r\n    }\r\n}\r\n\r\nexport default reducer;\r\n","import * as actionTypes from '../actions/actionTypes';\r\n\r\nconst initialState = {\r\n    topics: [],\r\n    openedTopicId: null,\r\n    loading: false,\r\n    error: false,\r\n    wasFetched: false,\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.START_FETCHING: {\r\n            return {\r\n                ...state,\r\n                loading: true,\r\n                error: false\r\n            }\r\n        }\r\n\r\n        case actionTypes.GET_TOPICS: {\r\n            return {\r\n                ...state\r\n            }\r\n        }\r\n\r\n        case actionTypes.TOPICS_ERROR: {\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                error: true\r\n            }\r\n        }\r\n\r\n        case actionTypes.FINISH_FETCHING: {\r\n            const topics = action.topics.map(item => {\r\n                const humanDate = new Date(item.date * 1000).toLocaleDateString();\r\n                item.date = humanDate;\r\n\r\n                action.socket.emit('join-to-topic', item._id);  //subscribe user\r\n                return item;\r\n            });\r\n\r\n            return {\r\n                loading: false,\r\n                error: false,\r\n                topics: [...topics],\r\n                wasFetched: true,\r\n            }\r\n        }\r\n\r\n        case actionTypes.ADD_TOPIC: {\r\n            const humanDate = new Date(action.topic.date * 1000).toLocaleDateString();\r\n\r\n            action.socket.emit('join-to-topic', action.topic._id);\r\n\r\n            return {\r\n                ...state,\r\n                topics: [\r\n                    ...state.topics,\r\n                    {\r\n                        ...action.topic,\r\n                        date: humanDate,\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n\r\n        case actionTypes.EDIT_TOPIC: {\r\n            const updateTopic = state.topics.filter(item => item._id === action.topic._id);\r\n            const topics = state.topics.filter(item => item._id !== action.topic._id);\r\n\r\n            return {\r\n                ...state,\r\n                topics: [\r\n                    {\r\n                        ...updateTopic[0],\r\n                        ...action.topic\r\n                    },\r\n                    ...topics,\r\n                ]\r\n            }\r\n        }\r\n\r\n        case actionTypes.SET_CURRENT_TOPIC: {\r\n            return {\r\n                ...state,\r\n                openedTopicId: action.topicId,\r\n            }\r\n        }\r\n\r\n        case actionTypes.DELETE_TOPIC: {\r\n            action.socket.emit('leave-the-topic', action.topicId);\r\n\r\n            return {\r\n                ...state,\r\n                topics: state.topics.filter(item => item._id !== action.topicId),\r\n            }\r\n        }\r\n\r\n        case actionTypes.LOGOUT_TOPICS: {\r\n            return { ...initialState }\r\n        }\r\n\r\n        default: return state;\r\n    }\r\n}\r\n\r\nexport default reducer;\r\n","import io from 'socket.io-client';\r\nimport * as actionTypes from '../actions/actionTypes';\r\n\r\nconst initialState = {\r\n    socket: null,\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.CONNECT_SOCKET: {\r\n            if (state.socket !== null) break;\r\n            const socket = io.connect('https://pill-plate.herokuapp.com');\r\n\r\n            return {\r\n                socket: socket,\r\n            }\r\n        }\r\n\r\n        case actionTypes.DISCONNECT_SOCKET: {\r\n            state.socket.close();\r\n\r\n            return { ...initialState }\r\n        }\r\n\r\n        default: return state;\r\n    }\r\n}\r\n\r\nexport default reducer;\r\n","import * as actionTypes from '../actions/actionTypes';\r\n\r\nconst initialState = {\r\n    savingMessages: false,\r\n    recivingMessage: false,\r\n    topics: {},\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.START_MESSAGES_SAVING: {\r\n            return {\r\n                ...state,\r\n                savingMessages: true,\r\n            }\r\n        }\r\n\r\n        case actionTypes.FINISH_MESSAGES_SAVING: {\r\n            return {\r\n                ...state,\r\n                savingMessages: false,\r\n            }\r\n        }\r\n\r\n        case actionTypes.START_MESSAGES_RECIVE: {\r\n            return {\r\n                ...state,\r\n                recivingMessage: true,\r\n            }\r\n        }\r\n\r\n        case actionTypes.FINISH_MESSAGES_RECIVE: {\r\n            return {\r\n                ...state,\r\n                recivingMessage: false,\r\n            }\r\n        }\r\n\r\n        case actionTypes.MESSAGE_SAVE: {\r\n            let topicMessages = [\r\n                { ...action.message }\r\n            ]\r\n\r\n            if (state.topics[action.message.topicId] && state.topics[action.message.topicId].messages)\r\n                topicMessages = [\r\n                    ...state.topics[action.message.topicId].messages,\r\n                    {\r\n                        ...action.message\r\n                    }\r\n                ]\r\n\r\n            return {\r\n                ...state,\r\n                topics: {\r\n                    ...state.topics,\r\n                    [action.message.topicId]: {\r\n                        ...state.topics[action.message.topicId],\r\n                        messages: [\r\n                            ...topicMessages,\r\n                        ]\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        case actionTypes.FETCH_MESSAGES: {\r\n            if (action.messages.length === 0) {\r\n                return state;\r\n            }\r\n\r\n            let topicMessages = [\r\n                ...action.messages\r\n            ]\r\n\r\n            if (state.topics[action.topicId] && state.topics[action.topicId].messages) {\r\n                topicMessages = [\r\n                    ...action.messages,\r\n                    ...state.topics[action.topicId].messages,\r\n                ]\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                topics: {\r\n                    ...state.topics,\r\n                    [action.topicId]: {\r\n                        ...state.topics[action.topicId],\r\n                        messages: [\r\n                            ...topicMessages,\r\n                        ],\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        case actionTypes.EDIT_MESSAGE: {\r\n            const topicId = action.message.topicId;\r\n\r\n            const topicMessages = state.topics[topicId].messages.map(message => {\r\n                if (message._id === action.message._id) {\r\n                    message.wasReadedBy = [...action.message.wasReadedBy];\r\n                    message.text = action.message.text;\r\n                }\r\n\r\n                return message;\r\n            })\r\n\r\n            return {\r\n                ...state,\r\n                topics: {\r\n                    ...state.topics,\r\n                    [topicId]: {\r\n                        ...state.topics[topicId],\r\n                        messages: [\r\n                            ...topicMessages,\r\n                        ],\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        case actionTypes.REMOVE_MESSAGE: {\r\n            const topicId = action.message.topicId;\r\n\r\n            return {\r\n                ...state,\r\n                topics: {\r\n                    ...state.topics,\r\n                    [topicId]: {\r\n                        ...state.topics[topicId],\r\n                        messages: state.topics[topicId].messages.filter(message => message._id !== action.message._id),\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        case actionTypes.LOGOUT_MESSAGES: {\r\n            return { ...initialState }\r\n        }\r\n\r\n        default: return state;\r\n    }\r\n}\r\n\r\nexport default reducer;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport deepOrange from '@material-ui/core/colors/deepOrange';\nimport { createMuiTheme, MuiThemeProvider } from '@material-ui/core/styles';\nimport { createStore, applyMiddleware, combineReducers, compose } from 'redux';\nimport { Provider } from 'react-redux';\nimport thunk from 'redux-thunk';\n\nimport authReducer from './store/reducers/authorization';\nimport topicReducer from './store/reducers/topics';\nimport socketReducer from './store/reducers/socket';\nimport messageReducer from './store/reducers/messages';\n\nconst reducers = combineReducers({\n    auth: authReducer,\n    tpc: topicReducer,\n    sckt: socketReducer,\n    msg: messageReducer,\n})\n\nconst theme = createMuiTheme({\n    palette: {\n        primary: {\n            light: '#ffec92',\n            main: '#FFE66D',\n            dark: '#F5B82E'\n        },\n        secondary: {\n            light: '#ffd473',\n            main: deepOrange[400]\n        },\n    }\n});\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunk)));\n\nReactDOM.render(\n    <MuiThemeProvider theme={theme}>\n        <Provider store={store}>\n            <App />\n        </Provider>\n    </MuiThemeProvider>,\n    document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}