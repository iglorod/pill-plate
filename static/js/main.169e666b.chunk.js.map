{"version":3,"sources":["component/AppSkeleton/DrawerBlock/DrawerItems/DrawerLogo/DrawerLogo.module.css","component/UI/AnimatedSwitch/AnimatedSwitch.module.css","assets/images/logo.png","assets/images/CardImage.png","assets/images/soon.png","assets/images/idea.png","App.module.css","component/AppSkeleton/styles.js","component/AppSkeleton/DrawerBlock/DrawerItems/DrawerLogo/DrawerLogo.js","component/AppSkeleton/DrawerBlock/DrawerItems/DrawerItem/DrawerItem.js","component/UI/Dialog/styles.js","utility/validation.js","utility/axios-instance.js","store/actions/topics.js","store/actions/actionTypes.js","component/UI/Dialog/CreateTopic.js","component/AppSkeleton/DrawerBlock/DrawerItems/DriwerItems.js","component/AppSkeleton/DrawerBlock/DrawerBlock.js","component/UI/Link/Link.js","component/AppSkeleton/AppBarBlock/AppBarLink/AppBarLink.js","component/AppSkeleton/AppBarBlock/MenuButton/MenuButton.js","store/actions/authorization.js","utility/filetype-check.js","store/actions/messages.js","utility/message-types.js","component/AppSkeleton/AppBarBlock/AppBarBlock.js","store/actions/socket.js","component/UI/AnimatedSwitch/AnimatedSwitch.js","component/DrawerPages/FilterType/styles.js","component/DrawerPages/FilterType/FilterMessages/MessageItems/MessageItem/MessageSceleton/MessageSceleton.js","component/DrawerPages/FilterType/FilterMessages/MessageItems/MessageItem/TextItem/TextItem.js","component/DrawerPages/FilterType/FilterMessages/MessageItems/MessageItem/LinkItem/LinkItem.js","component/DrawerPages/FilterType/FilterMessages/MessageItems/MessageItem/FileItem/FileItem.js","component/UI/ImageReview/styles.js","component/UI/ImageReview/ImageReview.js","component/DrawerPages/FilterType/FilterMessages/MessageItems/MessageItem/ImageItem/ImageItem.js","component/DrawerPages/FilterType/FilterMessages/MessageItems/MessageItem/VideoItem/VideoItem.js","component/DrawerPages/FilterType/FilterMessages/MessageItems/MessageItem/MessageItem.js","component/DrawerPages/FilterType/FilterMessages/MessageItems/MessageItems.js","component/DrawerPages/FilterType/FilterMessages/EmptyMessage/EmptyMessage.js","component/DrawerPages/FilterType/FilterMessages/LoadMessages/LoadMessages.js","component/DrawerPages/FilterType/FilterMessages/FilterMessages.js","component/DrawerPages/TopicContent/styles.js","component/DrawerPages/FilterType/Links/Links.js","component/DrawerPages/FilterType/Photos/Photos.js","component/DrawerPages/FilterType/Videos/Videos.js","component/DrawerPages/FilterType/Files/Files.js","component/DrawerPages/FilterType/Notes/Notes.js","component/DrawerPages/TopicContent/InputBlock/ActionSection/DropFile/DropFile.js","component/DrawerPages/TopicContent/InputBlock/ActionSection/ActionSection.js","component/DrawerPages/TopicContent/InputBlock/InputBlock.js","component/DrawerPages/TopicContent/MessageBlock/MessageItems/MessageItem/MessageSceleton/MessageSceleton.js","component/DrawerPages/TopicContent/MessageBlock/MessageItems/MessageItem/TextItem/TextItem.js","component/DrawerPages/TopicContent/MessageBlock/MessageItems/MessageItem/LinkItem/LinkItem.js","component/DrawerPages/TopicContent/MessageBlock/MessageItems/MessageItem/FileItem/FileItem.js","component/DrawerPages/TopicContent/MessageBlock/MessageItems/MessageItem/ImageItem/ImageItem.js","component/DrawerPages/TopicContent/MessageBlock/MessageItems/MessageItem/VideoItem/VideoItem.js","component/DrawerPages/TopicContent/MessageBlock/MessageItems/MessageItem/MessageItem.js","component/DrawerPages/TopicContent/MessageBlock/MessageItems/MessageItems.js","component/DrawerPages/TopicContent/MessageBlock/EmptyMessages/EmptyMessages.js","component/DrawerPages/TopicContent/MessageBlock/LoadMessages/LoadMessages.js","component/DrawerPages/TopicContent/MessageBlock/MessageBlock.js","component/DrawerPages/TopicContent/ActionsBlock/MessageActions/MessageActions.js","component/DrawerPages/TopicContent/ActionsBlock/FilterActions/FilterActions.js","component/DrawerPages/TopicContent/ActionsBlock/ActionsBlock.js","component/DrawerPages/TopicContent/TopicContent.js","component/DrawerPages/Topics/styles.js","component/DrawerPages/Topics/TopicsList/Topic/TopicMenu/TopicMenu.js","component/DrawerPages/Topics/TopicsList/Topic/Topic.js","component/UI/Dialog/EditTopic.js","component/UI/Dialog/ShareTopic.js","component/DrawerPages/Topics/TopicsList/TopicsNotFound/TopicsNotFound.js","component/DrawerPages/Topics/TopicsList/TopicsList.js","component/DrawerPages/Topics/Topics.js","component/DrawerPages/Draft/styles.js","component/DrawerPages/Draft/Draft.js","component/DrawerPages/4O4/styles.js","component/DrawerPages/4O4/NotFound.js","component/AppSkeleton/AppSceleton.js","component/Authorization/styles.js","component/Authorization/SignIn/SignInForm/SignInForm.js","component/UI/Copyright/Copyright.js","component/Authorization/AuthContainer/AuthContainer.js","component/Authorization/SignIn/SignIn.js","component/Authorization/SignUp/SignUpForm/SignUpForm.js","component/Authorization/SignUp/SignUp.js","component/UI/Loading/styles.js","component/UI/Loading/Loading.js","component/Layout/Layout.js","App.js","serviceWorker.js","store/reducers/authorization.js","store/reducers/topics.js","store/reducers/socket.js","store/reducers/messages.js","index.js"],"names":["module","exports","style","makeStyles","theme","root","display","drawer","breakpoints","up","width","flexShrink","appBar","marginLeft","shadows","menuButton","marginRight","spacing","appBarButton","borderRadius","padding","margin","appBarLink","toolbar","mixins","drawerPaper","background","palette","primary","main","border","boxShadow","content","flexGrow","activeLink","fontWeight","transition","nestedLink","paddingLeft","nestedLinkActive","DrawerLogo","classes","useStyles","className","src","Logo","alt","cssClasses","titleBlock","logoTitle","logoSubTitle","DrawerItem","props","RouterLink","React","forwardRef","routeProps","ref","to","activeClassName","isNested","ListItem","button","component","onClick","collapseToggle","ListItemIcon","icon","ListItemText","text","addTopicBtn","topicTitle","textAlign","fontFamily","paddingBottom","dialogColorHat","height","agreeBtn","color","dark","closeBtn","secondary","topicInput","marginTop","changeValidationMessage","isValid","message","currMessage","length","validation","string","validationRules","originalEmail","validationMessage","isRequred","isEmail","test","minLength","maxLength","shoudBeEqual","instance","axios","create","baseURL","setCurrentTopicActionCreator","topicId","type","Transition","Slide","direction","connect","state","userId","auth","id","socket","sckt","dispatch","startCreatingTopic","topic","handleOpenSnackbar","getState","post","then","createTopicActionCreator","data","catch","error","createTopicAction","useState","title","config","name","label","value","notes","stateInputs","setStateInputs","openSnackbar","setOpenSnackbar","clearState","prevState","onInputHandler","inputName","event","newValue","target","currentValid","newValidationMessage","inputs","fieldsIsValid","key","push","TextField","fullWidth","onInput","bind","helperText","Fragment","Dialog","open","TransitionComponent","keepMounted","maxWidth","onClose","handleClose","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogActions","Button","disabled","newTopic","creatorId","note","Snackbar","anchorOrigin","vertical","horizontal","DriwerItems","collapseOpen","setCollapseOpen","addTopicDialogOpen","setTopicDialogOpen","addTopicButton","ListItemSecondaryAction","IconButton","List","Collapse","in","timeout","unmountOnExit","disablePadding","Divider","DrawerBlock","container","aria-label","Hidden","smUp","implementation","Drawer","variant","isMobile","handleDrawerToggle","paper","ModalProps","xsDown","ReactLink","AppBarLink","edge","logout","Link","link","underline","Typography","noWrap","DrawerButton","errorActionCreator","err","signInLocalAction","defaults","headers","common","localStorage","getItem","resetTokenTimer","clearTimeout","refreshTimerId","delay","expirationTime","Math","floor","Date","getTime","timerId","setTimeout","token","refreshTokenAction","console","log","newTimeoutIdActionCreator","newToken","refreshTokenActionCreator","getExtension","filename","parts","split","editRecivedMessageActionCreator","sendFileMessageAction","changeProgress","formData","FormData","file","fileType","toLowerCase","fileTypeCheck","append","sender","tpc","openedTopicId","onUploadProgress","progressEvent","progress","round","loaded","total","emit","clearSocket","clearMessages","clearTopics","AppBar","position","Toolbar","MailOutline","ExitToApp","animatedSwitch","bounce","val","spring","stiffness","damping","bounceTransition","atEnter","opacity","scale","atLeave","atActive","switchClass","pageWrapper","classProp","mapStyles","styles","transform","children","paddingTop","overflow","down","backgroundColor","messagesBlock","justifyContent","flexDirection","emptyMessagesBlock","textArea","inputProp","fontSize","borderBottomColor","dropSection","dropArea","outline","dragDropArea","verticalAlign","freqEmoji","cursor","addFileBtn","addImageBtn","toggleSmilesBtn","addSmileBlock","sendBth","messageSecondaryAction","top","messagesList","downloadLink","textDecoration","downloadIcon","messageAuthorEmail","capitalizeEmail","textTransform","messageLiItem","paddingRight","messageLiWithAuthor","messageLiSelected","topLiFetching","actionsBlock","zIndex","topicName","membersCount","topicData","alignItems","topicNote","isChecked","left","avatarStyle","deleteButton","editButton","messageActionsBlock","secondaryActions","filterActionsBlock","expansionMenu","filterChip","MessageSceleton","author","emailName","emailEnd","showName","join","disableTypography","TextItem","email","LinkItem","urlMatches","match","LinkPreview","url","forEach","startIndex","indexOf","endIndex","obj","replace","character","index","insertTextAtIndices","dangerouslySetInnerHTML","__html","getFileName","path","pathContains","slice","FILE_PATH","ListItemAvatar","href","Avatar","GetApp","stopPropagation","modal","maxHeight","minHeight","minWidth","image","ImageReview","Modal","toggleView","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","Fade","imageSrc","openImage","setOpenImage","toggleImageReview","IMAGE_PATH","controls","MessageItem","humanDate","date","toLocaleTimeString","dataComponent","FileItem","ImageItem","VideoItem","listClasses","ContainerProps","gutterBottom","MessageItems","loadPrevMessages","isVisible","fetching","fetchPreviousMessages","useEffect","lastMessageDate","onChange","offset","delayedCall","CircularProgress","disableShrink","filterMessages","map","item","currentMessageDate","toLocaleDateString","shownTimeString","toDateString","_id","EmptyMessage","alignSelf","LoadMessages","scrollToTopPosition","topPosition","parent","Promise","resolve","reject","$","animate","scrollTop","getTopPostion","el","FilterMessages","setFilterMessages","setFetching","setAllowToFetch","setSkip","firstFetching","setFirstFetching","fetchFilterMessages","firstFetchingScroll","messages","document","querySelector","lastMessage","limit","queryChunks","fetchType","skip","getSkip","get","idUser","updateFilterMessages","reverse","newMessages","currentMessages","getLastMessages","prevSkip","allow","getLastAllowToFetch","getLastFetching","firstMessage","querySelectorAll","oldFirstMessageTopPosition","newFirstMessageTopPosition","prevFetchingScroll","inputBlock","notReadedDot","newMessagesBlock","DropFile","useDropzone","accept","imageDrop","onDrop","acceptedFiles","dispatchFiles","getRootProps","getInputProps","ActionSection","Note","PhotoCamera","smiles","emoji","set","size","addEmoji","sendOrEditMessage","msg","topics","sendTextMessage","messageType","messageData","sendTextMessageAction","editMessage","editableMessageId","patch","editMessageAction","textAreaValue","setTextAreaValue","showSmiles","setShowSmiles","freqSmiles","setFreqSmiles","inputRef","useRef","freqObj","JSON","parse","freqArr","getFreqSmiles","editingMessage","find","focusInput","current","focus","sendMessage","clearSelectedMessages","Zoom","onSelect","native","idEmoji","filter","splice","addNewSmileToFreq","sheetSize","multiline","autoFocus","rows","rowsMax","placeholder","onKeyDown","e","preventDefault","InputLabelProps","inputLabelProp","InputProps","endAdornment","InputAdornment","onBlur","disableRipple","disableFocusRipple","disableTouchRipple","showAuthor","prevType","prevAuthor","show","selectedMessages","messageId","includes","setListItemClasses","selectedMessagesId","changeSelectedMessage","CheckCircle","wasReadedBy","addToReaded","FiberManualRecord","currTopicId","savingMessages","readMessageAction","firstNotReaded","messageIndex","arrayLength","newMessagesLabelPosition","notReadedElement","messagesCount","photos","links","videos","files","LinearProgress","loadingFileProgress","EmptyMessages","topicIsExist","recivingMessage","fetchMessages","limitations","fetchMessagesActionCreator","fetchMessagesAction","setNewMessagesLabelPosition","count","displayCount","loadMessagesHistory","savingMessageScroll","goBack","scrollIntoView","isFirstLoad","removeMessage","delete","removeMessageAction","setContent","editingMessageStart","selectedsId","buttons","reduce","editable","someIsSelected","FilterActions","handleFile","startFilter","currentFilter","setFilter","handlePhoto","handleVideo","handleLink","Chip","InsertDriveFileRounded","clickable","onDelete","deleteIcon","Done","PhotoSizeSelectActualRounded","MovieRounded","LinkRounded","expanded","setExpanded","setTopicName","setTopicNote","setMembersCount","idTopic","getCurrentTopic","membersId","ExpansionPanel","isExpanded","ExpansionPanelSummary","expandIcon","aria-controls","ExpansionPanelDetails","openLoading","loading","setCurrentTopic","uploadFile","setLoadingFileProgress","setEditingMessage","setSelectedMessageId","editingMessageHandler","newCollection","newProgress","roomName","params","socketRoom","gridConatainer","topicInfo","topicLink","wordBreak","topicCreated","topicHat","borderTopLeftRadius","borderTopRightRadius","topicMenuButton","right","unreadedCount","bottom","topicsNotFoundImg","topicsNotFoundNote","marginBottom","leaveTopic","res","leaveTopicActionCreator","leaveTopicAction","anchorEl","setAnchorEl","Boolean","aria-haspopup","currentTarget","MenuItem","shareDialogOpen","edtiDialogOpen","withRouter","setUnreadedCount","newUnreadMessage","unreadMessageTopicId","transitionDelay","Grid","xs","sm","md","lg","ButtonBase","Badge","badgeContent","max","startEditingTopic","updatedData","editTopicAction","finishEditingTopic","editTopicActionCreator","clearTopic","toPropsTopic","updateTopic","ShareTopic","snackbarMessage","setSnackbarMessage","startShareTopic","newMemberData","response","currentMembers","TopicsNotFound","CardImage","wasFetched","getTopicsList","getTopicsActionCreator","getTopicsAction","reciveMessage","saveMessageActionCreator","saveMessageAction","changeMessage","deleteMessage","removeRecivedMessageActionCreator","editTopicDialogOpen","setEditTopicDialogOpen","shareTopicDialogOpen","setShareTopicDialogOpen","selectedTopicData","setSelectedTopicData","setNewUnreadMessage","on","dialogClose","Links","exact","Photos","Videos","Files","Notes","TopicContent","TopicsList","imageBlock","Draft","SoonMessage","NotFound","IdeaMessage","finishLoading","connectSocket","mobileOpen","setMobileOpen","history","CssBaseline","AnimatedSwitch","Topics","avatar","form","submit","wrapper","buttonWrapper","redirectLink","errorAlert","buttonProgress","errorMessage","authStart","onSignIn","loginData","rememberMe","user","rememberData","remember","signInActionCreator","setRememberMe","shoudBeUniqe","password","noValidate","Alert","severity","FormControlLabel","control","Checkbox","copyright","align","getFullYear","AuthContainer","Container","pt","Box","mt","pb","Copyright","SignIn","onSignUp","newUser","signUpActionCreator","emailIsCorrect","setEmailIsCorrect","emailTimeoutId","setEmailTimeoutId","emailConfirm","timeoutId","checkEmailIsCorrect","imputName","justify","SignUp","backdrop","isLoading","signInByLocalData","refreshTokenAndSignIn","expiresIn","AppSceleton","render","App","window","location","hostname","initialState","saveToLocalStorage","setItem","clearLocalStorage","clear","reducer","action","decoded","jwt","decode","userData","exp","undefined","io","close","topicMessages","reducers","combineReducers","authReducer","topicReducer","socketReducer","messageReducer","createMuiTheme","light","deepOrange","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.169e666b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"titleBlock\":\"DrawerLogo_titleBlock__3NOrA\",\"logoTitle\":\"DrawerLogo_logoTitle__dlb8j\",\"logoSubTitle\":\"DrawerLogo_logoSubTitle__3T0xB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pageWrapper\":\"AnimatedSwitch_pageWrapper__3ISJ1\",\"pageComponentWrapper\":\"AnimatedSwitch_pageComponentWrapper__1HjYM\"};","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/CardImage.fd386e2d.png\";","module.exports = __webpack_public_path__ + \"static/media/soon.4608d02c.png\";","module.exports = __webpack_public_path__ + \"static/media/idea.9f6804c4.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__2f1W5\"};","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst style = makeStyles(theme => ({\r\n    root: {\r\n        display: 'flex',\r\n    },\r\n    drawer: {\r\n        [theme.breakpoints.up('sm')]: {\r\n            width: drawerWidth,\r\n            flexShrink: 0,\r\n        },\r\n    },\r\n    appBar: {\r\n        [theme.breakpoints.up('sm')]: {\r\n            width: `calc(100% - ${drawerWidth}px)`,\r\n            marginLeft: drawerWidth,\r\n        },\r\n        boxShadow: theme.shadows[2],\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n        [theme.breakpoints.up('sm')]: {\r\n            display: 'none',\r\n        },\r\n    },\r\n    appBarButton: {\r\n        borderRadius: '0 !important',\r\n        padding: '0px !important',\r\n        margin: '0 5px !important'\r\n    },\r\n    appBarLink: {\r\n        display: 'inherit',\r\n        padding: '8px',\r\n    },\r\n    toolbar: theme.mixins.toolbar,\r\n    drawerPaper: {\r\n        width: drawerWidth,\r\n        background: theme.palette.primary.main,\r\n        border: 'none',\r\n        boxShadow: theme.shadows[3]\r\n    },\r\n    content: {\r\n        flexGrow: 1,\r\n    },\r\n    activeLink: {\r\n        background: 'white !important',\r\n        boxShadow: theme.shadows[3],\r\n        fontWeight: '600',\r\n        transition: '.2s all !important',\r\n        \"&:hover\": {\r\n            background: 'white !important',\r\n            boxShadow: theme.shadows[5],\r\n        }\r\n    },\r\n    nestedLink: {\r\n        paddingLeft: theme.spacing(4) + 'px !important',\r\n    },\r\n    nestedLinkActive: {\r\n        background: 'rgba(0, 0, 0, 0.08) !important',\r\n    }\r\n}));\r\n\r\nexport default style;","import React from 'react';\r\n\r\nimport Logo from '../../../../../assets/images/logo.png';\r\nimport useStyles from '../../../styles';\r\nimport cssClasses from './DrawerLogo.module.css';\r\n\r\nconst DrawerLogo = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.toolbar}>\r\n            <img src={Logo} alt='ICON' width='100%' />\r\n            <div className={cssClasses.titleBlock}>\r\n                <p className={cssClasses.logoTitle}>PILLPLATE</p>\r\n                <p className={cssClasses.logoSubTitle}>SORT YOUR GARBAGE</p>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DrawerLogo;","import React from 'react';\r\nimport { ListItem, ListItemIcon, ListItemText } from '@material-ui/core';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport useStyles from '../../../styles';\r\n\r\nconst DrawerItem = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const RouterLink = React.forwardRef((routeProps, ref) => (\r\n        <NavLink ref={ref} to={props.to} {...routeProps} activeClassName={props.isNested ? classes.nestedLinkActive : classes.activeLink} />\r\n    ));\r\n\r\n    return (\r\n        <ListItem\r\n            button\r\n            className={props.isNested ? classes.nestedLink : null}\r\n            to={props.to}\r\n            component={RouterLink}\r\n            onClick={props.collapseToggle}>\r\n            <ListItemIcon>{props.icon}</ListItemIcon>\r\n            <ListItemText primary={props.text} />\r\n            {props.addTopicBtn}\r\n        </ListItem>\r\n    )\r\n}\r\n\r\nexport default DrawerItem;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst style = makeStyles(theme => ({\r\n    topicTitle: {\r\n        textAlign: 'center',\r\n        fontFamily: 'Lato, sans-serif',\r\n        paddingBottom: 0,\r\n    },\r\n    dialogColorHat: {\r\n        background: theme.palette.primary.main,\r\n        height: '15px',\r\n    },\r\n    agreeBtn: {\r\n        color: theme.palette.primary.dark,\r\n    },\r\n    closeBtn: {\r\n        color: theme.palette.secondary.main,\r\n    },\r\n    topicInput: {\r\n        marginTop: theme.spacing(2),\r\n    }\r\n}));\r\n\r\nexport default style;\r\n","const changeValidationMessage = (isValid, message, currMessage) => {\r\n    if (!isValid && currMessage.length === 0) return message;\r\n    return currMessage;\r\n}\r\n\r\nexport const validation = (string, validationRules, originalEmail) => {\r\n    let isValid = true;\r\n    let validationMessage = '';\r\n\r\n    if (validationRules.isRequred && isValid) {\r\n        isValid = string.length > 0 && isValid;\r\n        validationMessage = changeValidationMessage(isValid, 'Please, fill this field', validationMessage);\r\n    }\r\n\r\n    if (validationRules.isEmail && isValid) {\r\n        const exp = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n        isValid = exp.test(string) && isValid;\r\n        validationMessage = changeValidationMessage(isValid, 'Email is incorrect', validationMessage);\r\n    }\r\n\r\n    if (validationRules.minLength && isValid) {\r\n        isValid = string.length > 3 && isValid;\r\n        validationMessage = changeValidationMessage(isValid, 'Min password length is 4 symbols', validationMessage);\r\n    }\r\n\r\n    if (validationRules.maxLength && isValid) {\r\n        isValid = string.length < validationRules.maxLength && isValid;\r\n        validationMessage = changeValidationMessage(isValid, 'Max length is ' + validationRules.maxLength + ' symbols', validationMessage);\r\n    }\r\n\r\n    if (validationRules.shoudBeEqual && isValid) {\r\n        isValid = string === originalEmail && isValid;\r\n        validationMessage = changeValidationMessage(isValid, 'Please, enter the valid email address', validationMessage);\r\n    }\r\n\r\n    return [isValid, validationMessage];\r\n}\r\n","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n    baseURL: 'https://pill-plate.herokuapp.com'\r\n});\r\n\r\nexport default instance;","import axios from '../../utility/axios-instance';\r\n\r\nimport * as actionTypes from '../actions/actionTypes';\r\n\r\nexport const fetchingStartActionCreator = () => {\r\n    return {\r\n        type: actionTypes.START_FETCHING\r\n    }\r\n}\r\n\r\nexport const errorActionCreator = () => {\r\n    return {\r\n        type: actionTypes.TOPICS_ERROR\r\n    }\r\n}\r\n\r\nexport const getTopicsActionCreator = (topics, socket) => {\r\n    return {\r\n        type: actionTypes.FINISH_FETCHING,\r\n        topics: topics,\r\n        socket: socket,\r\n    }\r\n}\r\n\r\nexport const createTopicActionCreator = (topic, socket) => {\r\n    return {\r\n        type: actionTypes.ADD_TOPIC,\r\n        topic: topic,\r\n        socket: socket,\r\n    }\r\n}\r\n\r\nexport const editTopicActionCreator = (topic, handleOpenSnackbar) => {\r\n    handleOpenSnackbar();\r\n\r\n    return {\r\n        type: actionTypes.EDIT_TOPIC,\r\n        topic: topic\r\n    }\r\n}\r\n\r\nexport const setCurrentTopicActionCreator = (topicId) => {\r\n    return {\r\n        type: actionTypes.SET_CURRENT_TOPIC,\r\n        topicId: topicId\r\n    }\r\n}\r\n\r\nexport const leaveTopicActionCreator = (topicId, socket) => {\r\n    return {\r\n        type: actionTypes.DELETE_TOPIC,\r\n        topicId: topicId,\r\n        socket: socket,\r\n    }\r\n}\r\n\r\nexport const onLogoutTopicsClearActionCreator = () => {\r\n    return {\r\n        type: actionTypes.LOGOUT_TOPICS,\r\n    }\r\n}\r\n\r\nexport const getTopicsAction = (socket) => {\r\n    return (dispatch, getState) => {\r\n        dispatch(fetchingStartActionCreator());\r\n\r\n        const userId = getState().auth.id;\r\n\r\n        axios.get('/topics/' + userId)\r\n            .then(topics => {\r\n                dispatch(getTopicsActionCreator(topics.data, socket));\r\n            })\r\n            .catch(error => dispatch(errorActionCreator()))\r\n    }\r\n}\r\n\r\nexport const createTopicAction = (topic, socket, handleOpenSnackbar) => {\r\n    return (dispatch, getState) => {\r\n        axios.post('/topics', topic)\r\n            .then(topic => {\r\n                dispatch(createTopicActionCreator(topic.data, socket));\r\n                handleOpenSnackbar();\r\n            })\r\n            .catch(error => dispatch(errorActionCreator()))\r\n    }\r\n}\r\n\r\nexport const editTopicAction = (topic) => {\r\n    return (dispatch, getState) => {\r\n        const updatedData = {\r\n            name: topic.name,\r\n            note: topic.note,\r\n        }\r\n\r\n        axios.patch('/topics/single/' + topic._id, updatedData)\r\n            .catch(error => dispatch(errorActionCreator()))\r\n    }\r\n}\r\n\r\nexport const leaveTopicAction = (topicId, handleOpenSnackbar, socket) => {\r\n    return (dispatch, getState) => {\r\n        const userId = getState().auth.id\r\n\r\n        axios.post('/topics/single/leave/' + topicId, { userId })\r\n            .then(res => {\r\n                dispatch(leaveTopicActionCreator(topicId, socket));\r\n                handleOpenSnackbar();\r\n            })\r\n            .catch(error => dispatch(errorActionCreator()))\r\n    }\r\n}\r\n","//authorization\r\nexport const SIGN_IN = 'SIGN_IN';\r\nexport const SIGN_UP = 'SIGN_UP';\r\nexport const SIGN_IN_LOCALY = 'SIGN_IN_LOCALY';\r\nexport const AUTH_ERROR = 'AUTH_ERROR';\r\nexport const AUTH_START = 'AUTH_START';\r\nexport const LOAD_FINISH = 'LOAD_FINISH';\r\nexport const REFRESH_TOKEN = 'REFRESH_TOKEN';\r\nexport const RESET_TIMEOUT_ID = 'RESET_TIMEOUT_ID';\r\nexport const LOGOUT = 'LOGOUT';\r\n\r\n//topics\r\nexport const GET_TOPICS = 'GET_TOPICS';\r\nexport const START_FETCHING = 'START_FETCHING';\r\nexport const TOPICS_ERROR = 'TOPICS_ERROR';\r\nexport const FINISH_FETCHING = 'FINISH_FETCHING';\r\nexport const ADD_TOPIC = 'ADD_TOPIC';\r\nexport const DELETE_TOPIC = 'DELETE_TOPIC';\r\nexport const EDIT_TOPIC = 'EDIT_TOPIC';\r\nexport const SET_CURRENT_TOPIC = 'SET_CURRENT_TOPIC';\r\nexport const SUBSCRIBE_USER_TO_ROOMS = 'SUBSCRIBE_USER_TO_ROOMS';\r\nexport const LOGOUT_TOPICS = 'LOGOUT_TOPICS';\r\n\r\n//socket.io\r\nexport const CONNECT_SOCKET = 'CONNECT_SOCKET';\r\nexport const DISCONNECT_SOCKET = 'DISCONNECT_SOCKET';\r\n\r\n//messages\r\nexport const MESSAGE_ERROR = 'MESSAGE_ERROR';\r\nexport const MESSAGE_SAVE = 'MESSAGE_SAVE';\r\nexport const START_MESSAGES_SAVING = 'START_MESSAGES_SAVING';\r\nexport const FINISH_MESSAGES_SAVING = 'FINISH_MESSAGES_SAVING';\r\nexport const START_MESSAGES_FETCHING = 'START_MESSAGES_FETCHING';\r\nexport const FINISH_MESSAGES_FETCHING = 'FINISH_MESSAGES_FETCHING';\r\nexport const FETCH_MESSAGES = 'FETCH_MESSAGES';\r\nexport const EDIT_MESSAGE = 'EDIT_MESSAGE';\r\nexport const REMOVE_MESSAGE = 'REMOVE_MESSAGE';\r\nexport const START_MESSAGES_RECIVE = 'START_MESSAGES_RECIVE';\r\nexport const FINISH_MESSAGES_RECIVE = 'FINISH_MESSAGES_RECIVE';\r\nexport const LOGOUT_MESSAGES = 'LOGOUT_MESSAGES';\r\n\r\n","import React, { useState } from 'react';\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Slide,\r\n    TextField,\r\n    Snackbar\r\n} from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\n\r\nimport useStyles from './styles';\r\nimport { validation } from '../../../utility/validation';\r\nimport { createTopicAction } from '../../../store/actions/topics';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst CreateTopic = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [stateInputs, setStateInputs] = useState({\r\n        title: {\r\n            config: {\r\n                name: 'title',\r\n                label: 'Title',\r\n            },\r\n            validationRules: {\r\n                isRequred: true,\r\n                maxLength: 20,\r\n            },\r\n            isValid: false,\r\n            validationMessage: '',\r\n            value: '',\r\n        },\r\n        notes: {\r\n            config: {\r\n                name: 'notes',\r\n                label: 'Notes',\r\n            },\r\n            validationRules: {\r\n                maxLength: 100,\r\n            },\r\n            isValid: true,\r\n            validationMessage: '',\r\n            value: '',\r\n        }\r\n    });\r\n\r\n    const [openSnackbar, setOpenSnackbar] = useState(false);\r\n\r\n    const handleCloseSnackbar = () => {\r\n        setOpenSnackbar(false);\r\n    }\r\n\r\n    const handleOpenSnackbar = () => {\r\n        setOpenSnackbar(true);\r\n    }\r\n\r\n    const clearState = () => {\r\n        setStateInputs(prevState => {\r\n            return {\r\n                ...prevState,\r\n                title: {\r\n                    ...prevState.title,\r\n                    isValid: false,\r\n                    validationMessage: '',\r\n                    value: '',\r\n                },\r\n                notes: {\r\n                    ...prevState.notes,\r\n                    isValid: true,\r\n                    validationMessage: '',\r\n                    value: '',\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    const createTopicHandler = () => {\r\n        const newTopic = {\r\n            creatorId: props.userId,\r\n            name: stateInputs.title.value,\r\n            note: stateInputs.notes.value,\r\n        }\r\n\r\n        //close and clear dialog\r\n        props.handleClose();\r\n        clearState();\r\n\r\n        //create topic\r\n        props.startCreatingTopic(newTopic, props.socket, handleOpenSnackbar);\r\n    }\r\n\r\n    const onInputHandler = (inputName, event) => {\r\n        const newValue = event.target.value;\r\n\r\n        const [currentValid, newValidationMessage] = validation(\r\n            newValue,\r\n            stateInputs[inputName].validationRules,\r\n            null\r\n        );\r\n\r\n        setStateInputs(prevState => ({\r\n            ...prevState,\r\n            [inputName]: {\r\n                ...prevState[inputName],\r\n                value: newValue,\r\n                isValid: currentValid,\r\n                validationMessage: newValidationMessage\r\n            }\r\n        }));\r\n    }\r\n\r\n    let inputs = [];\r\n    let fieldsIsValid = true;\r\n\r\n    for (let key in stateInputs) {\r\n        inputs.push(\r\n            <TextField\r\n                key={key}\r\n                className={classes.topicInput}\r\n                label={stateInputs[key].config.label}\r\n                name={stateInputs[key].config.name}\r\n                fullWidth\r\n                color=\"primary\"\r\n                value={stateInputs[key].value}\r\n                onInput={onInputHandler.bind(this, key)}\r\n                error={!stateInputs[key].isValid && stateInputs[key].value.length > 0}\r\n                helperText={stateInputs[key].validationMessage}\r\n            />\r\n        );\r\n\r\n        fieldsIsValid = stateInputs[key].isValid && fieldsIsValid;\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Dialog\r\n                open={props.open}\r\n                TransitionComponent={Transition}\r\n                keepMounted\r\n                maxWidth={'xs'}\r\n                onClose={() => {\r\n                    clearState();\r\n                    props.handleClose();\r\n                }}\r\n                aria-labelledby=\"alert-dialog-slide-title\"\r\n                aria-describedby=\"alert-dialog-slide-description\"\r\n            >\r\n                <div className={classes.dialogColorHat}></div>\r\n                <DialogTitle id=\"alert-dialog-slide-title\" className={classes.topicTitle}>{\"Create Topic\"}</DialogTitle>\r\n                <DialogContent>\r\n                    {inputs}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button className={classes.closeBtn} onClick={props.handleClose}>Disagree</Button>\r\n                    <Button disabled={!fieldsIsValid} className={classes.agreeBtn} onClick={createTopicHandler}>Agree</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n            <Snackbar\r\n                anchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\r\n                open={openSnackbar}\r\n                onClose={handleCloseSnackbar}\r\n                message={'Topic was created'}\r\n            />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        userId: state.auth.id,\r\n        socket: state.sckt.socket,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        startCreatingTopic: (topic, socket, handleOpenSnackbar) => { dispatch(createTopicAction(topic, socket, handleOpenSnackbar)) }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateTopic);\r\n","import React, { useState } from 'react';\r\nimport { Divider, List, Collapse } from '@material-ui/core';\r\nimport LinkRoundedIcon from '@material-ui/icons/LinkSharp';\r\nimport NoteRoundedIcon from '@material-ui/icons/NoteSharp';\r\nimport PhotoCameraRoundedIcon from '@material-ui/icons/PhotoCameraSharp';\r\nimport DescriptionRoundedIcon from '@material-ui/icons/DescriptionSharp';\r\nimport MenuOpenIcon from '@material-ui/icons/MenuOpenSharp';\r\nimport VideoLibraryRoundedIcon from '@material-ui/icons/VideoLibrarySharp';\r\nimport DeleteRoundedIcon from '@material-ui/icons/DeleteSharp';\r\nimport MenuIcon from '@material-ui/icons/MenuSharp';\r\nimport { IconButton, ListItemSecondaryAction } from '@material-ui/core';\r\nimport AddBoxIcon from '@material-ui/icons/AddBoxSharp';\r\n\r\nimport DrawerLogo from './DrawerLogo/DrawerLogo';\r\nimport DrawerItem from './DrawerItem/DrawerItem';\r\nimport CreateTopicDialog from '../../../UI/Dialog/CreateTopic';\r\n\r\nconst DriwerItems = () => {\r\n    const [collapseOpen, setCollapseOpen] = useState(false);\r\n\r\n    const [addTopicDialogOpen, setTopicDialogOpen] = useState(false);\r\n\r\n    const dialogOpen = () => {\r\n        setTopicDialogOpen(true)\r\n    }\r\n\r\n    const dialogClose = () => {\r\n        setTopicDialogOpen(false)\r\n    }\r\n\r\n    const addTopicButton = (\r\n        <ListItemSecondaryAction onClick={dialogOpen}>\r\n            <IconButton>\r\n                <AddBoxIcon />\r\n            </IconButton>\r\n        </ListItemSecondaryAction>\r\n    )\r\n\r\n    const collapseClickHandler = () => {\r\n        setCollapseOpen(prevState => !prevState);\r\n    }\r\n\r\n    const collapseCloseClickHandler = () => {\r\n        setCollapseOpen(false);\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <CreateTopicDialog open={addTopicDialogOpen} handleClose={dialogClose} />\r\n\r\n            <div>\r\n                <DrawerLogo />\r\n\r\n                <List>\r\n                    <DrawerItem\r\n                        text='Topics'\r\n                        to={'/pulp/topics'}\r\n                        icon={collapseOpen ? <MenuOpenIcon /> : <MenuIcon />}\r\n                        addTopicBtn={addTopicButton}\r\n                        collapseToggle={collapseClickHandler}\r\n                    />\r\n\r\n                    <Collapse in={collapseOpen} timeout=\"auto\" unmountOnExit>\r\n                        <List component=\"div\" disablePadding>\r\n                            <DrawerItem text='Links' to={'/pulp/topics/links'} icon={<LinkRoundedIcon />} isNested />\r\n                            <DrawerItem text='Photos' to={'/pulp/topics/photos'} icon={<PhotoCameraRoundedIcon />} isNested />\r\n                            <DrawerItem text='Videos' to={'/pulp/topics/videos'} icon={<VideoLibraryRoundedIcon />} isNested />\r\n                            <DrawerItem text='Files' to={'/pulp/topics/files'} icon={<DescriptionRoundedIcon />} isNested />\r\n                            <DrawerItem text='Notes' to={'/pulp/topics/notes'} icon={<NoteRoundedIcon />} isNested />\r\n                        </List>\r\n                    </Collapse>\r\n                </List>\r\n\r\n                <Divider />\r\n\r\n                <List>\r\n                    <DrawerItem text='Draft' to={'/pulp/draft'} icon={<DeleteRoundedIcon />} collapseToggle={collapseCloseClickHandler} />\r\n                </List>\r\n            </div>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default DriwerItems;","import React from 'react';\r\nimport { Drawer, Hidden } from '@material-ui/core';\r\n\r\nimport useStyles from '../styles';\r\nimport DrawerItems from './DrawerItems/DriwerItems';\r\n\r\nconst DrawerBlock = (props) => {\r\n    const classes = useStyles();\r\n    const { container } = props;\r\n\r\n    return (\r\n        <nav className={classes.drawer} aria-label=\"mailbox folders\">\r\n            <Hidden smUp implementation=\"css\">\r\n                <Drawer\r\n                    container={container}\r\n                    variant='temporary'\r\n                    open={props.isMobile}\r\n                    onClose={props.handleDrawerToggle}\r\n                    classes={{\r\n                        paper: classes.drawerPaper,\r\n                    }}\r\n                    ModalProps={{\r\n                        keepMounted: true,\r\n                    }}\r\n                >\r\n                    <DrawerItems />\r\n                </Drawer>\r\n            </Hidden>\r\n            <Hidden xsDown implementation=\"css\">\r\n                <Drawer\r\n                    classes={{\r\n                        paper: classes.drawerPaper,\r\n                    }}\r\n                    variant=\"permanent\"\r\n                    open\r\n                >\r\n                    <DrawerItems />\r\n                </Drawer>\r\n            </Hidden>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default DrawerBlock;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport const ReactLink = React.forwardRef((routeProps, ref) => (\r\n    <Link ref={ref} {...routeProps} />\r\n));","import React from 'react';\r\nimport { IconButton, Typography, Link } from '@material-ui/core';\r\n\r\nimport useStyles from '../../styles';\r\nimport { ReactLink } from '../../../UI/Link/Link';\r\n\r\nconst AppBarLink = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <IconButton\r\n            edge=\"start\"\r\n            onClick={props.logout}\r\n            className={classes.appBarButton}\r\n        >\r\n            <Link\r\n                component={ReactLink}\r\n                to={props.link}\r\n                color=\"inherit\"\r\n                underline=\"none\"\r\n                className={classes.appBarLink}\r\n            >\r\n                {props.icon}\r\n                <Typography variant=\"body1\" noWrap>{props.text}</Typography>\r\n            </Link>\r\n        </IconButton>\r\n    )\r\n}\r\n\r\nexport default AppBarLink;","import React from 'react';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\n\r\nimport useStyles from '../../styles';\r\n\r\nconst DrawerButton = (props) => {\r\n    const classes = useStyles();\r\n    return (\r\n        <IconButton\r\n            color=\"inherit\"\r\n            aria-label=\"open drawer\"\r\n            edge=\"start\"\r\n            onClick={props.handleDrawerToggle}\r\n            className={classes.menuButton}\r\n        >\r\n            <MenuIcon />\r\n        </IconButton>\r\n    )\r\n}\r\n\r\nexport default DrawerButton;","import axios from '../../utility/axios-instance';\r\n\r\nimport * as actionTypes from './actionTypes';\r\n\r\nconst errorActionCreator = (error) => {\r\n    return {\r\n        type: actionTypes.AUTH_ERROR,\r\n        err: error\r\n    }\r\n}\r\n\r\nexport const startActionCreator = () => {\r\n    return {\r\n        type: actionTypes.AUTH_START\r\n    }\r\n}\r\n\r\nexport const finishLoadingActionCreator = () => {\r\n    return {\r\n        type: actionTypes.LOAD_FINISH\r\n    }\r\n}\r\n\r\nexport const signInActionCreator = (token, rememberData) => {\r\n    return {\r\n        type: actionTypes.SIGN_IN,\r\n        token: token,\r\n        remember: rememberData\r\n    }\r\n}\r\n\r\nexport const signUpActionCreator = (token) => {\r\n    return {\r\n        type: actionTypes.SIGN_UP,\r\n        token: token\r\n    }\r\n}\r\n\r\nexport const signInLocalActionCreator = () => {\r\n    return {\r\n        type: actionTypes.SIGN_IN_LOCALY\r\n    }\r\n}\r\n\r\nexport const refreshTokenActionCreator = (token) => {\r\n    return {\r\n        type: actionTypes.REFRESH_TOKEN,\r\n        token: token\r\n    }\r\n}\r\n\r\nexport const newTimeoutIdActionCreator = (timerId) => {\r\n    return {\r\n        type: actionTypes.RESET_TIMEOUT_ID,\r\n        id: timerId\r\n    }\r\n}\r\n\r\nexport const logoutActionCreator = () => {\r\n    return {\r\n        type: actionTypes.LOGOUT\r\n    }\r\n}\r\n\r\nexport const signInLocalAction = () => {\r\n    return dispatch => {\r\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + localStorage.getItem('token');\r\n\r\n        dispatch(signInLocalActionCreator())\r\n        dispatch(resetTokenTimer());\r\n    }\r\n}\r\n\r\nexport const signUpAction = (user) => {\r\n    return dispatch => {\r\n        dispatch(startActionCreator());\r\n\r\n        axios.post('/user/signup', user)\r\n            .then(token => {\r\n                axios.defaults.headers.common['Authorization'] = 'Bearer ' + token.data;\r\n\r\n                dispatch(signUpActionCreator(token));\r\n                dispatch(resetTokenTimer());\r\n            })\r\n            .catch(err => {\r\n                dispatch(errorActionCreator(err))\r\n            });\r\n    }\r\n}\r\n\r\nexport const signInAction = (user, rememberData) => {\r\n    return dispatch => {\r\n        dispatch(startActionCreator());\r\n\r\n        axios.post('/user/signin', user)\r\n            .then(token => {\r\n                axios.defaults.headers.common['Authorization'] = 'Bearer ' + token.data;\r\n\r\n                dispatch(signInActionCreator(token, rememberData));\r\n                dispatch(resetTokenTimer());\r\n            })\r\n            .catch(err => {\r\n                dispatch(errorActionCreator(err))\r\n            });\r\n    }\r\n}\r\n\r\nexport const resetTokenTimer = () => { //set token auto-refreshing\r\n    return (dispatch, getState) => {\r\n        clearTimeout(getState().auth.refreshTimerId);\r\n\r\n        let delay = (getState().auth.expirationTime - Math.floor((new Date().getTime() / 1000))) * 1000 - 30 * 1000;\r\n\r\n        if (delay < 0) delay = 15 * 1000;\r\n\r\n        const timerId = setTimeout(\r\n            () => {\r\n                const token = {\r\n                    token: getState().auth.token\r\n                }\r\n\r\n                try {\r\n                    dispatch(refreshTokenAction(token));\r\n                } catch (error) {\r\n                    console.log(error)\r\n                }\r\n            }, delay\r\n        );\r\n        dispatch(newTimeoutIdActionCreator(timerId));\r\n    }\r\n}\r\n\r\nexport const refreshTokenAction = (token) => {\r\n    return (dispatch, getState) => {\r\n        axios.post('/user/refresh-token', token)\r\n            .then(newToken => {\r\n                axios.defaults.headers.common['Authorization'] = 'Bearer ' + newToken.data;\r\n\r\n                dispatch(refreshTokenActionCreator(newToken)); //refreshing token\r\n\r\n                if (!getState().auth.id) dispatch(signInLocalAction()); //if user is not auth we try to login auto\r\n                else dispatch(resetTokenTimer());\r\n            })\r\n            .catch(err => {\r\n                dispatch(errorActionCreator(err));\r\n                dispatch(logoutActionCreator());\r\n            });\r\n    }\r\n}","export const getExtension = (filename) => {\r\n    var parts = filename.split('.');\r\n    return parts[parts.length - 1];\r\n}\r\n\r\nexport const isVideo = (filename) => {\r\n    var ext = getExtension(filename);\r\n    switch (ext.toLowerCase()) {\r\n        case 'm4v':\r\n        case 'avi':\r\n        case 'mpg':\r\n        case 'mp4':\r\n            return true;\r\n\r\n        default:\r\n            return false;\r\n    }\r\n}\r\n\r\nexport const isImage = (filename) => {\r\n    var ext = getExtension(filename);\r\n    switch (ext.toLowerCase()) {\r\n        case 'jpg':\r\n        case 'jpeg':\r\n        case 'gif':\r\n        case 'bmp':\r\n        case 'png':\r\n            return true;\r\n\r\n        default:\r\n            return false;\r\n    }\r\n}","import axios from '../../utility/axios-instance';\r\n\r\nimport * as actionTypes from '../actions/actionTypes';\r\nimport * as fileTypeCheck from '../../utility/filetype-check';\r\nimport * as messageTypes from '../../utility/message-types';\r\n\r\nexport const errorActionCreator = (error) => {\r\n    return {\r\n        type: actionTypes.MESSAGE_ERROR,\r\n        err: error\r\n    }\r\n}\r\n\r\nexport const startMessageFetchActionCreator = () => {\r\n    return {\r\n        type: actionTypes.START_MESSAGES_FETCHING,\r\n    }\r\n}\r\n\r\nexport const finishMessageFetchActionCreator = () => {\r\n    return {\r\n        type: actionTypes.FINISH_MESSAGES_FETCHING,\r\n    }\r\n}\r\n\r\nexport const startMessageReciveActionCreator = () => {\r\n    return {\r\n        type: actionTypes.START_MESSAGES_RECIVE,\r\n    }\r\n}\r\n\r\nexport const finishMessageReciveActionCreator = () => {\r\n    return {\r\n        type: actionTypes.FINISH_MESSAGES_RECIVE,\r\n    }\r\n}\r\n\r\nexport const saveMessageActionCreator = (message) => {\r\n    return {\r\n        type: actionTypes.MESSAGE_SAVE,\r\n        message: message,\r\n    }\r\n}\r\n\r\nexport const fetchMessagesActionCreator = (messages, topicId) => {\r\n    return {\r\n        type: actionTypes.FETCH_MESSAGES,\r\n        messages: messages,\r\n        topicId: topicId,\r\n    }\r\n}\r\n\r\nexport const startSendingMessageActionCreator = () => {\r\n    return {\r\n        type: actionTypes.START_MESSAGES_SAVING,\r\n    }\r\n}\r\n\r\nexport const finishSendingMessageActionCreator = () => {\r\n    return {\r\n        type: actionTypes.FINISH_MESSAGES_SAVING,\r\n    }\r\n}\r\n\r\nexport const editRecivedMessageActionCreator = (message) => {\r\n    return {\r\n        type: actionTypes.EDIT_MESSAGE,\r\n        message: message,\r\n    }\r\n}\r\n\r\nexport const removeRecivedMessageActionCreator = (message) => {\r\n    return {\r\n        type: actionTypes.REMOVE_MESSAGE,\r\n        message: message,\r\n    }\r\n}\r\n\r\nexport const onLogoutMessagesClearActionCreator = () => {\r\n    return {\r\n        type: actionTypes.LOGOUT_MESSAGES,\r\n    }    \r\n}\r\n\r\nexport const sendTextMessageAction = (message, socket, messageType) => {\r\n    return (dispatch, getState) => {\r\n        const messageData = {\r\n            creatorId: message.sender,\r\n            text: message.text,\r\n            type: messageType,\r\n            date: Math.floor((new Date().getTime() / 1000)),\r\n        }\r\n\r\n        const topicId = getState().tpc.openedTopicId;\r\n\r\n        axios.post('/topic/messages/text/' + topicId, messageData)\r\n            .then(message => {\r\n                socket.emit('save-message', topicId, message.data);\r\n            })\r\n            .catch(err => {\r\n                dispatch(errorActionCreator(err));\r\n            });\r\n    }\r\n}\r\n\r\nexport const sendFileMessageAction = (message, socket, changeProgress) => {\r\n    return (dispatch, getState) => {\r\n        dispatch(startSendingMessageActionCreator());\r\n        let formData = new FormData();\r\n\r\n        const filename = message.file.name;\r\n\r\n        let fileType = messageTypes.FILE;\r\n        if (fileTypeCheck.isImage(filename)) {\r\n            formData.append('image', message.file, message.file.name);\r\n            formData.append('type', messageTypes.IMAGE);\r\n            fileType = messageTypes.IMAGE;\r\n        }\r\n        else if (fileTypeCheck.isVideo(filename)) {\r\n            formData.append('video', message.file, message.file.name);\r\n            formData.append('type', messageTypes.VIDEO);\r\n            fileType = messageTypes.VIDEO;\r\n        }\r\n        else {\r\n            formData.append('file', message.file, message.file.name);\r\n            formData.append('type', messageTypes.FILE);\r\n        }\r\n\r\n        formData.append('creatorId', message.sender);\r\n        formData.append('date', Math.floor((new Date().getTime() / 1000)));\r\n\r\n        const topicId = getState().tpc.openedTopicId;\r\n\r\n        axios.post('/topic/messages/' + fileType + '/' + topicId, formData, {\r\n            onUploadProgress: progressEvent => {\r\n                const progress = Math.round(progressEvent.loaded / progressEvent.total * 100);\r\n                changeProgress(progress);\r\n            }\r\n        })\r\n            .then(message => {\r\n                dispatch(finishSendingMessageActionCreator());\r\n                socket.emit('save-message', topicId, message.data);\r\n            })\r\n            .catch(err => {\r\n                dispatch(errorActionCreator(err));\r\n            });\r\n    }\r\n}\r\n\r\nexport const fetchMessagesAction = (data) => {\r\n    return dispatch => {\r\n        dispatch(startMessageFetchActionCreator());\r\n\r\n        const limitations = '?skip=' + data.skip + '&limit=' + data.limit;\r\n\r\n        axios.get('/topic/messages/' + data.currTopicId + limitations)\r\n            .then(messages => {\r\n                dispatch(finishMessageFetchActionCreator());\r\n\r\n                if (messages.data.length < 15) data.setAllowToFetch(false);\r\n                dispatch(fetchMessagesActionCreator(messages.data.reverse(), data.currTopicId));\r\n\r\n                data.setSkip(prevState => prevState + messages.data.length);\r\n                data.resolve();\r\n            })\r\n            .catch(err => {\r\n                dispatch(errorActionCreator(err));\r\n            });\r\n    }\r\n}\r\n\r\nexport const editMessageAction = (message, socket, editableMessageId) => {\r\n    return (dispatch, getState) => {\r\n        const topicId = getState().tpc.openedTopicId;\r\n\r\n        axios.patch('/topic/messages/single/text/' + editableMessageId, message)\r\n            .then(message => {\r\n                socket.emit('edit-message', topicId, message.data);\r\n            })\r\n            .catch(err => {\r\n                dispatch(errorActionCreator(err));\r\n            });\r\n    }\r\n}\r\n\r\nexport const removeMessageAction = (messageId, socket) => {\r\n    return (dispatch, getState) => {\r\n        const topicId = getState().tpc.openedTopicId;\r\n\r\n        axios.delete('/topic/messages/single/' + messageId)\r\n            .then(message => {\r\n                socket.emit('delete-message', topicId, message.data);\r\n            })\r\n            .catch(err => {\r\n                dispatch(errorActionCreator(err));\r\n            });\r\n    }\r\n}\r\n\r\nexport const saveMessageAction = (message) => {\r\n    return dispatch => {\r\n        dispatch(startMessageReciveActionCreator());\r\n        dispatch(saveMessageActionCreator(message))\r\n        dispatch(finishMessageReciveActionCreator());\r\n    }\r\n}\r\n\r\nexport const readMessageAction = (userId, messageId) => {\r\n    return dispatch => {\r\n        axios.patch('/topic/messages/single/readers/' + messageId, { wasReadedBy: userId })\r\n            .then(message => {\r\n                dispatch(editRecivedMessageActionCreator(message.data));\r\n            })\r\n            .catch(err => {\r\n                dispatch(errorActionCreator(err));\r\n            })\r\n    }\r\n}\r\n\r\n","export const TEXT = 'text';\r\nexport const LINK = 'link';\r\nexport const FILE = 'file';\r\nexport const IMAGE = 'image';\r\nexport const VIDEO = 'video';","import React from 'react';\r\nimport { AppBar, Toolbar } from '@material-ui/core';\r\nimport { ExitToApp, MailOutline } from '@material-ui/icons';\r\nimport { connect } from 'react-redux';\r\n\r\nimport useStyles from '../styles';\r\nimport AppBarLink from './AppBarLink/AppBarLink';\r\nimport DrawerButton from './MenuButton/MenuButton';\r\nimport { logoutActionCreator } from '../../../store/actions/authorization';\r\nimport { onLogoutMessagesClearActionCreator } from '../../../store/actions/messages';\r\nimport { disconnectSocketActionCreator } from '../../../store/actions/socket';\r\nimport { onLogoutTopicsClearActionCreator } from '../../../store/actions/topics';\r\n\r\nconst AppBarBlock = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const logoutHandler = () => {\r\n        props.logout();\r\n        props.clearSocket();\r\n        props.clearMessages();\r\n        props.clearTopics();\r\n    }\r\n\r\n    return (\r\n        <AppBar position=\"fixed\" className={classes.appBar} color={'inherit'}>\r\n            <Toolbar>\r\n                <DrawerButton handleDrawerToggle={props.handleDrawerToggle} />\r\n                <div style={{ marginLeft: 'auto' }}>\r\n                    <AppBarLink text='Contact us' icon={<MailOutline />} link='/pulp/contact-us' />\r\n                    <AppBarLink text='Logout' icon={<ExitToApp />} link='/sign-in' logout={logoutHandler} />\r\n                </div>\r\n            </Toolbar>\r\n        </AppBar>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        userId: state.auth.id\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        logout: () => { dispatch(logoutActionCreator()) },\r\n        clearSocket: () => { dispatch(disconnectSocketActionCreator()) },\r\n        clearMessages: () => { dispatch(onLogoutMessagesClearActionCreator()) },\r\n        clearTopics: () => { dispatch(onLogoutTopicsClearActionCreator()) },\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AppBarBlock);\r\n","import * as actionTypes from '../actions/actionTypes';\r\n\r\nexport const connectSocketActionCreator = () => {\r\n    return {\r\n        type: actionTypes.CONNECT_SOCKET,\r\n    }\r\n}\r\n\r\nexport const disconnectSocketActionCreator = () => {\r\n    return {\r\n        type: actionTypes.DISCONNECT_SOCKET,\r\n    }\r\n}","import React from 'react';\r\nimport { spring, AnimatedSwitch } from 'react-router-transition';\r\n\r\nimport classes from './AnimatedSwitch.module.css';\r\n\r\nconst animatedSwitch = (props) => {\r\n    const mapStyles = (styles) => {\r\n        return {\r\n            opacity: styles.opacity,\r\n            transform: `scale(${styles.scale})`,\r\n        };\r\n    }\r\n\r\n    const bounce = (val) => {\r\n        return spring(val, {\r\n            stiffness: 100,\r\n            damping: 20,\r\n        });\r\n    }\r\n\r\n    const bounceTransition = {\r\n        // start in a transparent, upscaled state\r\n        atEnter: {\r\n            opacity: 0,\r\n            scale: 0.8,\r\n        },\r\n        // leave in a transparent, downscaled state\r\n        atLeave: {\r\n            opacity: bounce(0),\r\n            scale: bounce(0.8),\r\n        },\r\n        // and rest at an opaque, normally-scaled state\r\n        atActive: {\r\n            opacity: bounce(1),\r\n            scale: bounce(1),\r\n        },\r\n    };\r\n\r\n    let switchClass = classes.pageWrapper;\r\n    if (props.classProp) switchClass = classes[props.classProp]; \r\n\r\n    return (\r\n        <AnimatedSwitch\r\n            atEnter={bounceTransition.atEnter}\r\n            atLeave={bounceTransition.atLeave}\r\n            atActive={bounceTransition.atActive}\r\n            mapStyles={mapStyles}\r\n            className={switchClass}\r\n        >\r\n            {props.children}\r\n        </AnimatedSwitch>\r\n    )\r\n}\r\n\r\nexport default animatedSwitch;","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst style = makeStyles(theme => ({\r\n    root: {\r\n        height: '100%',\r\n        width: '100%',\r\n        paddingTop: '0',\r\n        margin: 'auto',\r\n        overflow: 'auto',\r\n        background: '#FFFFFF',\r\n        boxShadow: theme.shadows[3],\r\n        [theme.breakpoints.down('sm')]: {\r\n            padding: theme.spacing(0.5),\r\n        },\r\n        \"&::-webkit-scrollbar-track\": {\r\n            borderRadius: '10px',\r\n        },\r\n        \"&::-webkit-scrollbar\": {\r\n            width: '8px',\r\n            backgroundColor: 'transparent',\r\n        },\r\n        \"&::-webkit-scrollbar-thumb\": {\r\n            borderRadius: '10px',\r\n            backgroundColor: '#fff6ca',\r\n            opacity: '0.3',\r\n        },\r\n        [theme.breakpoints.up('md')]: {\r\n            width: '80%',\r\n        },\r\n        [theme.breakpoints.up('lg')]: {\r\n            width: '60%',\r\n        },\r\n    },\r\n    messagesBlock: {\r\n        height: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'flex-end',\r\n        flexDirection: 'column',\r\n    },\r\n    emptyMessagesBlock: {\r\n        height: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        flexDirection: 'column',\r\n    },\r\n    textArea: {\r\n        \"&::-webkit-scrollbar-track\": {\r\n            borderRadius: '10px',\r\n        },\r\n        \"&::-webkit-scrollbar\": {\r\n            width: '8px',\r\n            backgroundColor: 'transparent',\r\n        },\r\n        \"&::-webkit-scrollbar-thumb\": {\r\n            borderRadius: '10px',\r\n            backgroundColor: '#fff6ca',\r\n            opacity: '0.3',\r\n        },\r\n    },\r\n    inputProp: {\r\n        fontFamily: 'Lato, sans-serif',\r\n        fontSize: '14px',\r\n        \"&:after\": {\r\n            borderBottomColor: theme.palette.primary.dark,\r\n        },\r\n    },\r\n    dropSection: {\r\n        height: '100%',\r\n    },\r\n    dropArea: {\r\n        outline: 'none',\r\n        height: '100%',\r\n        position: 'relative',\r\n    },\r\n    dragDropArea: {\r\n        outline: 'none',\r\n        height: '100%',\r\n        '& > svg': {\r\n            verticalAlign: 'bottom',\r\n        }\r\n    },\r\n    freqEmoji: {\r\n        margin: '5px',\r\n        display: 'inline-block',\r\n        '& > button': {\r\n            outline: 'none !important',\r\n            cursor: 'pointer !important',\r\n            verticalAlign: '2px',\r\n        },\r\n        '& > button > span': {\r\n            verticalAlign: 'middle !important',\r\n        }\r\n    },\r\n    addFileBtn: {\r\n        cursor: 'pointer',\r\n        color: '#adadad',\r\n        marginTop: '5px',\r\n        marginRight: '25px',\r\n        '&:hover': {\r\n            color: theme.palette.primary.dark,\r\n        }\r\n    },\r\n    addImageBtn: {\r\n        cursor: 'pointer',\r\n        color: '#adadad',\r\n        marginTop: '6px',\r\n        marginRight: '25px',\r\n        '&:hover': {\r\n            color: theme.palette.primary.dark,\r\n        }\r\n    },\r\n    toggleSmilesBtn: {\r\n        background: 'transparent !important',\r\n        transition: '.3s all',\r\n        '&:hover': {\r\n            color: 'darkgrey',\r\n        }\r\n    },\r\n    addSmileBlock: {\r\n        flexDirection: 'column',\r\n        justifyContent: 'flex-end',\r\n    },\r\n    sendBth: {\r\n        color: theme.palette.primary.dark,\r\n        fontWeight: '700',\r\n        '&:hover': {\r\n            background: 'transparent',\r\n        }\r\n    },\r\n    messageSecondaryAction: {\r\n        top: '9px',\r\n        transform: 'none',\r\n        '& > span': {\r\n            color: 'grey'\r\n        },\r\n    },\r\n    messagesList: {\r\n        overflow: 'auto',\r\n        \"&::-webkit-scrollbar-track\": {\r\n            borderRadius: '10px',\r\n        },\r\n        \"&::-webkit-scrollbar\": {\r\n            width: '8px',\r\n            backgroundColor: 'transparent',\r\n        },\r\n        \"&::-webkit-scrollbar-thumb\": {\r\n            borderRadius: '10px',\r\n            backgroundColor: '#fff6ca',\r\n            opacity: '0.3',\r\n        },\r\n    },\r\n    downloadLink: {\r\n        color: 'grey',\r\n        textDecoration: 'none',\r\n        '&:hover': {\r\n            textDecoration: 'underline',\r\n        }\r\n    },\r\n    downloadIcon: {\r\n        backgroundColor: '#4e4e4e',\r\n        cursor: 'pointer',\r\n    },\r\n    messageAuthorEmail: {\r\n        fontFamily: 'Nunito, sans-serif',\r\n        fontSize: '14px',\r\n        fontWeight: '600',\r\n        margin: '0',\r\n        color: '#5d5d5d',\r\n        display: 'inline',\r\n    },\r\n    capitalizeEmail: {\r\n        textTransform: 'capitalize',\r\n        display: 'inline',\r\n    },\r\n    messageLiItem: {\r\n        paddingLeft: theme.spacing(3),\r\n        paddingRight: theme.spacing(3),\r\n        cursor: 'pointer',\r\n    },\r\n    messageLiWithAuthor: {\r\n        paddingTop: '0',\r\n        paddingBottom: '0',\r\n    },\r\n    messageLiSelected: {\r\n        background: '#fff8d7',\r\n    },\r\n    topLiFetching: {\r\n        textAlign: 'center',\r\n        paddingTop: '30px',\r\n    },\r\n    actionsBlock: {\r\n        position: 'absolute',\r\n        width: '100%',\r\n        top: '0',\r\n        zIndex: '1',\r\n    },\r\n    topicName: {\r\n        fontSize: '18px',\r\n        fontFamily: 'Poppins, sans-serif',\r\n    },\r\n    membersCount: {\r\n        fontSize: '12px',\r\n        fontFamily: 'Poppins, sans-serif',\r\n        paddingLeft: '25px',\r\n        color: 'rgba(0,0,0,.4)',\r\n        height: 'min-content',\r\n    },\r\n    topicData: {\r\n        boxShadow: theme.shadows[1],\r\n        '& > div': {\r\n            alignItems: 'center',\r\n        }\r\n    },\r\n    topicNote: {\r\n        fontSize: '12px',\r\n        fontFamily: 'Poppins, sans-serif',\r\n        color: 'rgba(0,0,0,.8)',\r\n    },\r\n    isChecked: {\r\n        position: 'absolute',\r\n        left: '10px',\r\n        top: '50%',\r\n        transform: 'translateY(-50%)',\r\n        color: theme.palette.primary.dark,\r\n        margin: '0',\r\n    },\r\n    avatarStyle: {\r\n        background: theme.palette.primary.dark,\r\n    },\r\n    deleteButton: {\r\n        margin: theme.spacing(.5),\r\n        fontFamily: 'Lato, sans-serif',\r\n    },\r\n    editButton: {\r\n        margin: theme.spacing(.5),\r\n        fontFamily: 'Lato, sans-serif',\r\n        color: 'rgba(0,0,0,.4)',\r\n    },\r\n    messageActionsBlock: {\r\n        marginLeft: 'auto',\r\n    },\r\n    secondaryActions: {\r\n        flexDirection: 'column',\r\n        background: 'rgb(250, 250, 250)',\r\n    },\r\n    filterActionsBlock: {\r\n        display: 'flex',\r\n        justifyContent: 'space-around',\r\n        marginTop: '20px',\r\n    },\r\n    expansionMenu: {\r\n        background: theme.palette.primary.main,\r\n        borderRadius: '0',\r\n    },\r\n    filterChip: {\r\n        boxShadow: theme.shadows[1],\r\n    }\r\n}));\r\n\r\nexport default style;\r\n","import React from 'react';\r\nimport { ListItemText } from '@material-ui/core';\r\n\r\nimport useStyles from '../../../../styles';\r\n\r\nconst MessageSceleton = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [emailName, emailEnd] = props.author.split('@');\r\n\r\n    return (\r\n        <ListItemText\r\n            primary={\r\n                props.showName ?\r\n                    <React.Fragment>\r\n                        <p className={[classes.capitalizeEmail, classes.messageAuthorEmail].join(' ')}>{emailName}</p>\r\n                        <p className={classes.messageAuthorEmail}>{'@' + emailEnd}</p>\r\n                    </React.Fragment> : null\r\n            }\r\n            disableTypography\r\n            secondary={props.content}\r\n        />\r\n    )\r\n}\r\n\r\nexport default MessageSceleton;","import React from 'react';\r\n\r\nimport MessageSceleton from '../MessageSceleton/MessageSceleton';\r\n\r\nconst TextItem = (props) => {\r\n    return (\r\n        <MessageSceleton\r\n            showName={props.showName}\r\n            author={props.message.creatorId.email}\r\n            content={\r\n                <p style={{\r\n                    color: 'black',\r\n                    margin: '0',\r\n                    marginTop: '5px',\r\n                }}>{props.message.text}</p>\r\n            }\r\n        />\r\n    )\r\n}\r\n\r\nexport default TextItem;\r\n","import React from 'react';\r\nimport MicrolinkCard from '@microlink/react';\r\n\r\nimport MessageSceleton from '../MessageSceleton/MessageSceleton';\r\n\r\nconst insertTextAtIndices = (text, obj) => {\r\n    return text.replace(/./g, function (character, index) {\r\n        return obj[index] ? obj[index] + character : character;\r\n    });\r\n};\r\n\r\n\r\nconst LinkItem = (props) => {\r\n    const urlMatches = props.message.text.match(/\\b(http|https)?:\\/\\/\\S+/gi) || [];\r\n\r\n    const LinkPreview = <MicrolinkCard url={urlMatches[0]} />;\r\n\r\n    let { text } = props.message;\r\n    urlMatches.forEach(link => {\r\n        const startIndex = text.indexOf(link);\r\n        const endIndex = startIndex + link.length;\r\n        text = insertTextAtIndices(text, {\r\n            [startIndex]: `<a href=\"${link}\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: cornflowerblue; word-break: break-word;\" >`,\r\n            [endIndex]: \"</a>\"\r\n        });\r\n    });\r\n\r\n    return (\r\n        <MessageSceleton\r\n            showName={props.showName}\r\n            author={props.message.creatorId.email}\r\n            content={\r\n                <div style={{\r\n                    color: 'black',\r\n                    margin: '0',\r\n                    marginTop: '5px',\r\n                }}\r\n                >\r\n                    <p dangerouslySetInnerHTML={{\r\n                        __html: text\r\n                    }}\r\n                    />\r\n                    {LinkPreview}\r\n                </div>\r\n            }\r\n        />\r\n    )\r\n}\r\n\r\nexport default LinkItem;\r\n","import React from 'react';\r\nimport { Avatar, List, ListItem, ListItemText, ListItemAvatar } from '@material-ui/core';\r\nimport { GetApp } from '@material-ui/icons';\r\n\r\nimport useStyles from '../../../../styles';\r\nimport MessageSceleton from '../MessageSceleton/MessageSceleton';\r\n\r\nconst getFileName = (path) => {\r\n    const pathContains = path.split('/');\r\n    return pathContains[pathContains.length - 1].slice(13);\r\n}\r\n\r\nconst TextItem = (props) => {\r\n    const classes = useStyles();\r\n    const FILE_PATH = props.message.path;\r\n\r\n    return (\r\n        <MessageSceleton\r\n            showName={props.showName}\r\n            author={props.message.creatorId.email}\r\n            content={\r\n                <List style={{ paddingTop: '0' }}>\r\n                    <ListItem alignItems=\"flex-start\" style={{ padding: '0' }}>\r\n                        <ListItemAvatar>\r\n                            <a href={FILE_PATH}>\r\n                                <Avatar className={classes.downloadIcon}>\r\n                                    <GetApp />\r\n                                </Avatar>\r\n                            </a>\r\n                        </ListItemAvatar>\r\n                        <ListItemText\r\n                            primary={\r\n                                <p style={{\r\n                                    fontFamily: 'Nunito, sans-serif',\r\n                                    fontSize: '14px',\r\n                                    fontWeight: '600',\r\n                                    margin: '0',\r\n                                    cursor: 'default',\r\n                                }}\r\n                                >{getFileName(FILE_PATH)}</p>\r\n                            }\r\n                            disableTypography\r\n                            secondary={\r\n                                <div style={{\r\n                                    paddingTop: '5px',\r\n                                }}>\r\n                                    <a\r\n                                        href={FILE_PATH}\r\n                                        className={classes.downloadLink}\r\n                                        onClick={(event) => event.stopPropagation() }\r\n                                    >Download</a>\r\n                                </div>\r\n                            }\r\n                        />\r\n                    </ListItem>\r\n                </List>\r\n            } />\r\n    )\r\n}\r\n\r\nexport default TextItem;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    modal: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n    },\r\n    paper: {\r\n        backgroundColor: theme.palette.background.paper,\r\n        padding: theme.spacing(1),\r\n        maxHeight: '60vh',\r\n        maxWidth: '50vw',\r\n        minHeight: '25vh',\r\n        minWidth: '35vw',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        outline: 'none',\r\n        [theme.breakpoints.down('sm')]: {\r\n            maxHeight: '70vh',\r\n            maxWidth: '100vw',        \r\n        }\r\n    },\r\n    image: {\r\n        maxHeight: '58vh',\r\n        maxWidth: '48vw',\r\n        [theme.breakpoints.down('sm')]: {\r\n            maxHeight: '68vh',\r\n            maxWidth: '98vw',        \r\n        }\r\n    }\r\n}));\r\n\r\nexport default useStyles;","import React from 'react';\r\nimport { Modal, Backdrop, Fade } from '@material-ui/core';\r\n\r\nimport useStyles from './styles';\r\n\r\nconst ImageReview = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div>\r\n            <Modal\r\n                aria-labelledby=\"transition-modal-title\"\r\n                aria-describedby=\"transition-modal-description\"\r\n                className={classes.modal}\r\n                open={props.open}\r\n                onClose={props.toggleView}\r\n                closeAfterTransition\r\n                BackdropComponent={Backdrop}\r\n                BackdropProps={{\r\n                    timeout: 500,\r\n                }}\r\n            >\r\n                <Fade in={props.open}>\r\n                    <div className={classes.paper}>\r\n                        <img src={props.imageSrc} className={classes.image} alt={'review'} />\r\n                    </div>\r\n                </Fade>\r\n            </Modal>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ImageReview;\r\n","import React, { useState } from 'react';\r\n\r\nimport ImageReview from '../../../../../../UI/ImageReview/ImageReview';\r\nimport MessageSceleton from '../MessageSceleton/MessageSceleton';\r\n\r\nconst TextItem = (props) => {\r\n    const [openImage, setOpenImage] = useState(false);\r\n\r\n    const toggleImageReview = (event) => {\r\n        event.stopPropagation();\r\n        setOpenImage(prevState => !prevState);\r\n    }\r\n\r\n    const IMAGE_PATH = props.message.path;\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <ImageReview open={openImage} imageSrc={IMAGE_PATH} toggleView={toggleImageReview} />\r\n\r\n            <MessageSceleton\r\n                showName={props.showName}\r\n                author={props.message.creatorId.email}\r\n                content={\r\n                    <div style={{ width: '70%', paddingTop: '10px' }}>\r\n                        <img\r\n                            src={IMAGE_PATH}\r\n                            style={{\r\n                                maxHeight: '30vh',\r\n                                maxWidth: '100%',\r\n                                cursor: 'pointer',\r\n                            }}\r\n                            onClick={toggleImageReview}\r\n                            alt={'saved'} />\r\n                    </div>\r\n                } />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default TextItem;\r\n","import React from 'react';\r\n\r\nimport MessageSceleton from '../MessageSceleton/MessageSceleton';\r\n\r\nconst TextItem = (props) => {\r\n    return (\r\n        <MessageSceleton\r\n            showName={props.showName}\r\n            author={props.message.creatorId.email}\r\n            content={\r\n                <div style={{ width: '70%', paddingTop: '10px', }}>\r\n                    <video\r\n                        style={{\r\n                            maxHeight: '30vh',\r\n                            maxWidth: '100%',\r\n                        }}\r\n                        onClick={(event) => event.stopPropagation()}\r\n                        controls>\r\n                        <source src={props.message.path} type=\"video/mp4\" />\r\n                    </video>\r\n                </div>\r\n            }\r\n        />\r\n    )\r\n}\r\n\r\nexport default TextItem;\r\n","import React from 'react';\r\nimport {\r\n    ListItem,\r\n    ListItemAvatar,\r\n    Avatar,\r\n    ListItemSecondaryAction,\r\n    Typography,\r\n} from '@material-ui/core';\r\n\r\nimport useStyles from '../../../styles';\r\nimport * as messageTypes from '../../../../../../utility/message-types';\r\nimport TextItem from './TextItem/TextItem';\r\nimport LinkItem from './LinkItem/LinkItem';\r\nimport FileItem from './FileItem/FileItem';\r\nimport ImageItem from './ImageItem/ImageItem';\r\nimport VideoItem from './VideoItem/VideoItem';\r\n\r\nconst displayedDataByType = (message) => {\r\n    if (message.type === messageTypes.TEXT) {\r\n        return <TextItem message={message} showName={true} />\r\n    }\r\n    if (message.type === messageTypes.LINK) {\r\n        return <LinkItem message={message} showName={true} />\r\n    }\r\n    else if (message.type === messageTypes.FILE)\r\n        return <FileItem message={message} showName={true} />\r\n\r\n    else if (message.type === messageTypes.IMAGE)\r\n        return <ImageItem message={message} showName={true} />\r\n\r\n    return <VideoItem message={message} showName={true} />\r\n}\r\n\r\nconst MessageItem = (props) => {\r\n    const classes = useStyles();\r\n    const humanDate = new Date(props.message.date * 1000).toLocaleTimeString();\r\n\r\n    const dataComponent = displayedDataByType(props.message);\r\n\r\n    const listClasses = [classes.messageLiItem, classes.messageLiWithAuthor];\r\n\r\n    return (\r\n        <ListItem\r\n            alignItems=\"flex-start\"\r\n            className={listClasses.join(' ')}\r\n            ContainerProps={{\r\n                className: 'message'\r\n            }}\r\n        >\r\n            <ListItemAvatar>\r\n                <Avatar alt=\"LETTER\" className={classes.avatarStyle}>{props.message.creatorId.email.slice(0, 2)}</Avatar>\r\n            </ListItemAvatar>\r\n            {dataComponent}\r\n            <ListItemSecondaryAction className={classes.messageSecondaryAction}>\r\n                <Typography variant=\"caption\" display=\"block\" gutterBottom>{humanDate}</Typography>\r\n            </ListItemSecondaryAction>\r\n        </ListItem>\r\n    )\r\n}\r\n\r\nexport default MessageItem;\r\n","import React, { useEffect } from 'react';\r\nimport { List, CircularProgress } from '@material-ui/core';\r\nimport VisibilitySensor from 'react-visibility-sensor';\r\n\r\nimport MessageItem from './MessageItem/MessageItem';\r\nimport useStyles from '../../styles';\r\n\r\nconst MessageItems = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const loadPrevMessages = (isVisible = true) => {\r\n        if (!props.fetching && isVisible) {\r\n            props.fetchPreviousMessages();\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadPrevMessages();\r\n    }, [])\r\n\r\n    let lastMessageDate = null;\r\n    return (\r\n        <List className={[classes.messagesList, 'type-messages'].join(' ')}>\r\n            <VisibilitySensor\r\n                onChange={(isVisible) => loadPrevMessages(isVisible)}\r\n                offset={{ top: 10 }}\r\n                delayedCall={true} >\r\n                <li className={classes.topLiFetching} >\r\n                    {props.fetching ? <CircularProgress disableShrink /> : null}\r\n                </li>\r\n            </VisibilitySensor>\r\n            {\r\n                props.filterMessages.map((item, index) => {\r\n                    const currentMessageDate = new Date(item.date * 1000).toLocaleDateString();\r\n\r\n                    if (lastMessageDate !== currentMessageDate) {\r\n                        lastMessageDate = currentMessageDate;\r\n\r\n                        const shownTimeString = new Date(item.date * 1000).toDateString();\r\n\r\n                        return (\r\n                            <React.Fragment key={item._id}>\r\n                                <li\r\n                                    style={\r\n                                        {\r\n                                            textAlign: 'center',\r\n                                            color: 'grey',\r\n                                            paddingTop: '20px',\r\n                                        }\r\n                                    }>{shownTimeString}</li>\r\n                                <MessageItem message={item} />\r\n                            </React.Fragment>\r\n                        )\r\n                    }\r\n                    return (\r\n                        <MessageItem\r\n                            key={item._id}\r\n                            message={item} />\r\n                    )\r\n                })\r\n            }\r\n        </List>\r\n    )\r\n}\r\n\r\nexport default MessageItems;\r\n","import React from 'react';\r\n\r\nconst EmptyMessage = () => {\r\n    return (\r\n        <div style={\r\n            {\r\n                alignSelf: 'center',\r\n                color: 'grey',\r\n            }\r\n        }>Messages not found</div>\r\n    )\r\n}\r\n\r\nexport default EmptyMessage;","import React from 'react';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nconst LoadMessages = () => {\r\n    return (\r\n        <div style={\r\n            {\r\n                alignSelf: 'center',\r\n                position: 'absolute',\r\n                top: '50%',\r\n                transform: 'translateY(-50%)',\r\n            }\r\n        }><CircularProgress disableShrink /></div>\r\n    )\r\n}\r\n\r\nexport default LoadMessages;\r\n","import React, { useEffect, useState } from 'react';\r\nimport axios from '../../../../utility/axios-instance';\r\nimport $ from 'jquery';\r\n\r\nimport useStyles from '../styles';\r\nimport MessageItems from './MessageItems/MessageItems';\r\nimport EmptyMessage from './EmptyMessage/EmptyMessage';\r\nimport LoadMessages from './LoadMessages/LoadMessages';\r\n\r\nconst scrollToTopPosition = (topPosition, parent, delay = 0) => {\r\n    return new Promise((resolve, reject) => {\r\n        $(parent).animate({ scrollTop: topPosition }, delay, () => {\r\n            resolve();\r\n        });\r\n    });\r\n}\r\n\r\nconst getTopPostion = (el) => {\r\n    return $(el).offset().top\r\n}\r\n\r\nconst FilterMessages = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [filterMessages, setFilterMessages] = useState([]);\r\n    const [fetching, setFetching] = useState(false);\r\n    const [, setAllowToFetch] = useState(false);\r\n    const [, setSkip] = useState(0);\r\n    const [firstFetching, setFirstFetching] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchFilterMessages(15).then(() => {\r\n            firstFetchingScroll();\r\n        });\r\n    }, [])\r\n\r\n    const getSkip = () => {\r\n        let skip = null;\r\n        setSkip(prevState => {\r\n            skip = prevState;\r\n            return prevState;\r\n        });\r\n        return skip;\r\n    }\r\n\r\n    const getLastMessages = () => {\r\n        let messages = [];\r\n        setFilterMessages(prevState => {\r\n            messages = prevState;\r\n            return prevState;\r\n        });\r\n        return messages;\r\n    }\r\n\r\n    const getLastAllowToFetch = () => {\r\n        let allow = null;\r\n        setAllowToFetch(prevState => {\r\n            allow = prevState;\r\n            return prevState;\r\n        });\r\n        return allow;\r\n    }\r\n\r\n    const getLastFetching = () => {\r\n        let fetching = null;\r\n        setFetching(prevState => {\r\n            fetching = prevState;\r\n            return prevState;\r\n        });\r\n        return fetching;\r\n    }\r\n\r\n    const firstFetchingScroll = () => {\r\n        setFirstFetching(false);\r\n\r\n        let messages = document.querySelector(\".type-messages\")\r\n        let lastMessage = document.querySelector(\".type-messages .message:last-child\");\r\n\r\n        if (lastMessage) {\r\n            scrollToTopPosition(getTopPostion(lastMessage), messages, 300)\r\n                .then(() => setAllowToFetch(true));\r\n        } else {\r\n            setAllowToFetch(true);\r\n        }\r\n    }\r\n\r\n    const prevFetchingScroll = (firstMessage, oldFirstMessageTopPosition) => {\r\n        const messages = document.querySelector(\".type-messages\");\r\n        let newFirstMessageTopPosition = getTopPostion(firstMessage);\r\n\r\n        if (firstMessage) {\r\n            scrollToTopPosition(newFirstMessageTopPosition - oldFirstMessageTopPosition, messages)\r\n                .then(() => setFetching(false))\r\n        } else {\r\n            setFetching(false);\r\n        }\r\n    }\r\n\r\n    const fetchPreviousMessages = () => {\r\n        if (!getLastAllowToFetch() || getLastFetching()) return;\r\n        const firstMessage = document.querySelectorAll(\".type-messages .message\")[1];\r\n        if (!firstMessage) return;\r\n\r\n        const oldFirstMessageTopPosition = getTopPostion(firstMessage);\r\n        \r\n        setFetching(true);\r\n        fetchFilterMessages(15).then(() => {\r\n            if (!firstMessage) return;\r\n            prevFetchingScroll(firstMessage, oldFirstMessageTopPosition);\r\n        });\r\n    }\r\n\r\n    const fetchFilterMessages = (limit) => {\r\n        return new Promise((resolve, reject) => {\r\n            const queryChunks =\r\n                '?type=' + props.fetchType\r\n                + '&skip=' + getSkip()\r\n                + '&limit=' + limit;\r\n\r\n            axios.get('/topic/messages/filter/' + props.idUser + queryChunks)\r\n                .then(messages => {\r\n                    updateFilterMessages(messages.data.reverse(), resolve);\r\n                })\r\n                .catch(err => {\r\n                    setFetching(false);\r\n                    console.log(err);\r\n                    reject(err);\r\n                })\r\n        })\r\n    }\r\n\r\n    const updateFilterMessages = (newMessages, resolve) => {\r\n        if (newMessages.length < 15) setAllowToFetch(false);\r\n\r\n        let currentMessages = [...getLastMessages()];\r\n        setFilterMessages([\r\n            ...newMessages,\r\n            ...currentMessages,\r\n        ]);\r\n\r\n        setSkip(prevSkip => prevSkip + 15);\r\n        resolve();\r\n    }\r\n\r\n    let messages = <EmptyMessage />\r\n    if (filterMessages.length > 0) {\r\n        messages = <MessageItems\r\n            filterMessages={filterMessages}\r\n            fetchPreviousMessages={fetchPreviousMessages}\r\n            fetching={fetching} />\r\n    }\r\n    if (firstFetching) messages = <LoadMessages />\r\n\r\n    return (\r\n        <div className={filterMessages.length > 0 ? classes.messagesBlock : classes.emptyMessagesBlock}>\r\n            {messages}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FilterMessages;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst style = makeStyles(theme => ({\r\n    root: {\r\n        height: '100%',\r\n        width: '100%',\r\n        paddingTop: '0',\r\n        margin: 'auto',\r\n        overflow: 'auto',\r\n        background: '#FFFFFF',\r\n        boxShadow: theme.shadows[3],\r\n        [theme.breakpoints.down('sm')]: {\r\n            padding: theme.spacing(0.5),\r\n        },\r\n        \"&::-webkit-scrollbar-track\": {\r\n            borderRadius: '10px',\r\n        },\r\n        \"&::-webkit-scrollbar\": {\r\n            width: '8px',\r\n            backgroundColor: 'transparent',\r\n        },\r\n        \"&::-webkit-scrollbar-thumb\": {\r\n            borderRadius: '10px',\r\n            backgroundColor: '#fff6ca',\r\n            opacity: '0.3',\r\n        },\r\n        [theme.breakpoints.up('md')]: {\r\n            width: '80%',\r\n        },\r\n        [theme.breakpoints.up('lg')]: {\r\n            width: '60%',\r\n        },\r\n    },\r\n    messagesBlock: {\r\n        height: '83%',\r\n        display: 'flex',\r\n        justifyContent: 'flex-end',\r\n        flexDirection: 'column',\r\n    },\r\n    inputBlock: {\r\n        height: '17%',\r\n        position: 'relative',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'flex-end',\r\n        padding: '0 ' + theme.spacing(2) + 'px',\r\n        paddingBottom: theme.spacing(0.5),\r\n    },\r\n    textArea: {\r\n        \"&::-webkit-scrollbar-track\": {\r\n            borderRadius: '10px',\r\n        },\r\n        \"&::-webkit-scrollbar\": {\r\n            width: '8px',\r\n            backgroundColor: 'transparent',\r\n        },\r\n        \"&::-webkit-scrollbar-thumb\": {\r\n            borderRadius: '10px',\r\n            backgroundColor: '#fff6ca',\r\n            opacity: '0.3',\r\n        },\r\n    },\r\n    inputProp: {\r\n        fontFamily: 'Lato, sans-serif',\r\n        fontSize: '14px',\r\n        \"&:after\": {\r\n            borderBottomColor: theme.palette.primary.dark,\r\n        },\r\n    },\r\n    dropSection: {\r\n        height: '100%',\r\n    },\r\n    dropArea: {\r\n        outline: 'none',\r\n        height: '100%',\r\n        position: 'relative',\r\n    },\r\n    dragDropArea: {\r\n        outline: 'none',\r\n        height: '100%',\r\n        '& > svg': {\r\n            verticalAlign: 'bottom',\r\n        }\r\n    },\r\n    freqEmoji: {\r\n        margin: '5px',\r\n        display: 'inline-block',\r\n        '& > button': {\r\n            outline: 'none !important',\r\n            cursor: 'pointer !important',\r\n            verticalAlign: '2px',\r\n        },\r\n        '& > button > span': {\r\n            verticalAlign: 'middle !important',\r\n        }\r\n    },\r\n    addFileBtn: {\r\n        cursor: 'pointer',\r\n        color: '#adadad',\r\n        marginTop: '5px',\r\n        marginRight: '25px',\r\n        '&:hover': {\r\n            color: theme.palette.primary.dark,\r\n        }\r\n    },\r\n    addImageBtn: {\r\n        cursor: 'pointer',\r\n        color: '#adadad',\r\n        marginTop: '6px',\r\n        marginRight: '25px',\r\n        '&:hover': {\r\n            color: theme.palette.primary.dark,\r\n        }\r\n    },\r\n    toggleSmilesBtn: {\r\n        background: 'transparent !important',\r\n        transition: '.3s all',\r\n        '&:hover': {\r\n            color: 'darkgrey',\r\n        }\r\n    },\r\n    addSmileBlock: {\r\n        flexDirection: 'column',\r\n        justifyContent: 'flex-end',\r\n    },\r\n    sendBth: {\r\n        color: theme.palette.primary.dark,\r\n        fontWeight: '700',\r\n        '&:hover': {\r\n            background: 'transparent',\r\n        }\r\n    },\r\n    messageSecondaryAction: {\r\n        top: '9px',\r\n        transform: 'none',\r\n        '& > span': {\r\n            color: 'grey'\r\n        },\r\n    },\r\n    messagesList: {\r\n        overflow: 'auto',\r\n        paddingTop: '57px',\r\n        \"&::-webkit-scrollbar-track\": {\r\n            borderRadius: '10px',\r\n        },\r\n        \"&::-webkit-scrollbar\": {\r\n            width: '8px',\r\n            backgroundColor: 'transparent',\r\n        },\r\n        \"&::-webkit-scrollbar-thumb\": {\r\n            borderRadius: '10px',\r\n            backgroundColor: '#fff6ca',\r\n            opacity: '0.3',\r\n        },\r\n    },\r\n    downloadLink: {\r\n        color: 'grey',\r\n        textDecoration: 'none',\r\n        '&:hover': {\r\n            textDecoration: 'underline',\r\n        }\r\n    },\r\n    downloadIcon: {\r\n        backgroundColor: '#4e4e4e',\r\n        cursor: 'pointer',\r\n    },\r\n    messageAuthorEmail: {\r\n        fontFamily: 'Nunito, sans-serif',\r\n        fontSize: '14px',\r\n        fontWeight: '600',\r\n        margin: '0',\r\n        color: '#5d5d5d',\r\n        display: 'inline',\r\n    },\r\n    capitalizeEmail: {\r\n        textTransform: 'capitalize',\r\n        display: 'inline',\r\n    },\r\n    messageLiItem: {\r\n        paddingLeft: theme.spacing(6),\r\n        paddingRight: theme.spacing(3),\r\n        cursor: 'pointer',\r\n    },\r\n    messageLiWithAuthor: {\r\n        paddingTop: '0',\r\n        paddingBottom: '0',\r\n    },\r\n    messageLiSelected: {\r\n        background: '#fff8d7',\r\n    },\r\n    topLiFetching: {\r\n        textAlign: 'center',\r\n        paddingTop: '30px',\r\n    },\r\n    actionsBlock: {\r\n        position: 'absolute',\r\n        width: '100%',\r\n        top: '0',\r\n        zIndex: '1',\r\n    },\r\n    topicName: {\r\n        fontSize: '18px',\r\n        fontFamily: 'Poppins, sans-serif',\r\n    },\r\n    membersCount: {\r\n        fontSize: '12px',\r\n        fontFamily: 'Poppins, sans-serif',\r\n        paddingLeft: '25px',\r\n        color: 'rgba(0,0,0,.4)',\r\n        height: 'min-content',\r\n    },\r\n    topicData: {\r\n        boxShadow: theme.shadows[1],\r\n        '& > div': {\r\n            alignItems: 'center',\r\n        }\r\n    },\r\n    topicNote: {\r\n        fontSize: '12px',\r\n        fontFamily: 'Poppins, sans-serif',\r\n        color: 'rgba(0,0,0,.8)',\r\n    },\r\n    isChecked: {\r\n        position: 'absolute',\r\n        left: '10px',\r\n        top: '50%',\r\n        transform: 'translateY(-50%)',\r\n        color: theme.palette.primary.dark,\r\n        margin: '0',\r\n    },\r\n    avatarStyle: {\r\n        background: theme.palette.primary.dark,\r\n    },\r\n    deleteButton: {\r\n        margin: theme.spacing(.5),\r\n        fontFamily: 'Lato, sans-serif',\r\n    },\r\n    editButton: {\r\n        margin: theme.spacing(.5),\r\n        fontFamily: 'Lato, sans-serif',\r\n        color: 'rgba(0,0,0,.4)',\r\n    },\r\n    messageActionsBlock: {\r\n        marginLeft: 'auto',\r\n    },\r\n    secondaryActions: {\r\n        flexDirection: 'column',\r\n        background: 'rgb(250, 250, 250)',\r\n    },\r\n    filterActionsBlock: {\r\n        display: 'flex',\r\n        justifyContent: 'space-around',\r\n        marginTop: '20px',\r\n    },\r\n    expansionMenu: {\r\n        background: theme.palette.primary.main,\r\n        borderRadius: '0',\r\n    },\r\n    filterChip: {\r\n        boxShadow: theme.shadows[1],\r\n    },\r\n    notReadedDot: {\r\n        fontSize: '12px',\r\n        position: 'absolute',\r\n        left: '10px',\r\n        top: '50%',\r\n        transform: 'translateY(-50%)',\r\n        color: theme.palette.primary.dark,\r\n        margin: '0',\r\n    },\r\n    newMessagesBlock: {\r\n        textAlign: 'center',\r\n        color: 'grey',\r\n        paddingTop: '16px',\r\n    }\r\n}));\r\n\r\nexport default style;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport FilterMessages from '../FilterMessages/FilterMessages';\r\nimport useStyles from '../../TopicContent/styles';\r\n\r\nconst Links = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <FilterMessages\r\n                fetchType={'link'}\r\n                idUser={props.idUser}\r\n                token={props.token} />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        idUser: state.auth.id,\r\n        token: state.auth.token,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Links);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport FilterMessages from '../FilterMessages/FilterMessages';\r\nimport useStyles from '../../TopicContent/styles';\r\n\r\nconst Photos = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <FilterMessages\r\n                fetchType={'image'}\r\n                idUser={props.idUser}\r\n                token={props.token} />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        idUser: state.auth.id,\r\n        token: state.auth.token,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Photos);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport FilterMessages from '../FilterMessages/FilterMessages';\r\nimport useStyles from '../../TopicContent/styles';\r\n\r\nconst Videos = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <FilterMessages\r\n                fetchType={'video'}\r\n                idUser={props.idUser}\r\n                token={props.token} />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        idUser: state.auth.id,\r\n        token: state.auth.token,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Videos);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport FilterMessages from '../FilterMessages/FilterMessages';\r\nimport useStyles from '../../TopicContent/styles';\r\n\r\nconst Files = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <FilterMessages\r\n                fetchType={'file'}\r\n                idUser={props.idUser}\r\n                token={props.token} />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        idUser: state.auth.id,\r\n        token: state.auth.token,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Files);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport FilterMessages from '../FilterMessages/FilterMessages';\r\nimport useStyles from '../../TopicContent/styles';\r\n\r\nconst Notes = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <FilterMessages\r\n                fetchType={'text'}\r\n                idUser={props.idUser}\r\n                token={props.token} />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        idUser: state.auth.id,\r\n        token: state.auth.token,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Notes);\r\n","import React from 'react';\r\nimport { useDropzone } from 'react-dropzone';\r\n\r\nimport useStyles from '../../../styles';\r\n\r\nconst DropFile = (props) => {\r\n    const classes = useStyles();\r\n\r\n    let { getRootProps, getInputProps } = useDropzone({\r\n        accept: props.imageDrop ? 'image/*' : null,\r\n        onDrop: acceptedFiles => { props.dispatchFiles(acceptedFiles, props.imageDrop) },\r\n    });\r\n\r\n    return (\r\n        <div {...getRootProps({ onDrop: event => event.stopPropagation() })} className={classes.dragDropArea}>\r\n            <input {...getInputProps()} />\r\n            {props.icon}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default (DropFile);\r\n","import React from 'react';\r\nimport { Note, PhotoCamera } from '@material-ui/icons';\r\nimport { Emoji } from 'emoji-mart';\r\nimport { Button } from '@material-ui/core';\r\n\r\nimport useStyles from '../../styles';\r\nimport DropFile from './DropFile/DropFile';\r\n\r\nconst ActionSection = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <section style={{ display: 'flex', justifyContent: 'space-between', }}>\r\n\r\n            <DropFile\r\n                icon={<Note className={classes.addFileBtn} />} \r\n                changeProgress={props.changeProgress}\r\n                dispatchFiles={props.dispatchFiles} />\r\n            <DropFile\r\n                icon={<PhotoCamera className={classes.addImageBtn} />}\r\n                changeProgress={props.changeProgress}\r\n                dispatchFiles={props.dispatchFiles}\r\n                imageDrop />\r\n\r\n            <div style={{ overflow: 'hidden', display: 'flex', width: '100%', }}>\r\n                {\r\n                    props.smiles.map(item => {\r\n                        return (\r\n                            <div\r\n                                key={item}\r\n                                className={classes.freqEmoji}\r\n                            >\r\n                                <Emoji\r\n                                    emoji={item}\r\n                                    set='twitter'\r\n                                    size={20}\r\n                                    onClick={props.addEmoji}\r\n                                />\r\n                            </div>\r\n                        )\r\n                    })\r\n                }\r\n            </div>\r\n\r\n            <div style={{ marginLeft: '20px' }}>\r\n                <Button className={classes.sendBth} component=\"span\" onClick={props.sendOrEditMessage}>SEND</Button>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default ActionSection;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { TextField, InputAdornment, IconButton, Zoom } from '@material-ui/core';\r\nimport 'emoji-mart/css/emoji-mart.css'\r\nimport { Picker } from 'emoji-mart'\r\nimport InsertEmoticonIcon from '@material-ui/icons/InsertEmoticon';\r\nimport { connect } from 'react-redux';\r\n\r\nimport useStyles from '../styles';\r\nimport './InputBlock.css';\r\nimport ActionSection from './ActionSection/ActionSection';\r\nimport { sendTextMessageAction, editMessageAction } from '../../../../store/actions/messages';\r\nimport * as messageTypes from '../../../../utility/message-types';\r\n\r\nconst getFreqSmiles = () => {\r\n    const freqObj = JSON.parse(localStorage.getItem('emoji-mart.frequently'));\r\n    let freqArr = [];\r\n\r\n    for (let key in freqObj) {\r\n        freqArr.push(key);\r\n    }\r\n\r\n    return freqArr.reverse().slice(0, 15);\r\n}\r\n\r\nconst addNewSmileToFreq = (freqSmiles, idEmoji) => {\r\n    const freqSmilesCount = freqSmiles.length;\r\n    freqSmiles = freqSmiles.filter(item => item !== idEmoji);\r\n\r\n    if (freqSmilesCount === freqSmiles.length && freqSmiles.length === 15) {\r\n        freqSmiles.splice(freqSmiles.length - 1, 1);\r\n    }\r\n\r\n    return [\r\n        idEmoji,\r\n        ...freqSmiles\r\n    ]\r\n}\r\n\r\nconst InputBlock = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [textAreaValue, setTextAreaValue] = useState('');\r\n\r\n    const [showSmiles, setShowSmiles] = useState(false);\r\n\r\n    const [freqSmiles, setFreqSmiles] = useState([]);\r\n\r\n    const inputRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        setFreqSmiles([...getFreqSmiles()]);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!props.editingMessage) return;\r\n        const message = props.topic.messages.find(item => item._id === props.editingMessage);\r\n        setTextAreaValue(message.text);\r\n        focusInput();\r\n    }, [props.editingMessage])\r\n\r\n    const focusInput = () => {\r\n        inputRef.current.focus();\r\n    }\r\n\r\n    const onInputChange = (event) => {\r\n        const newValue = event.target.value;\r\n        setTextAreaValue(newValue);\r\n    }\r\n\r\n    const addNewEmoji = (emoji) => {\r\n        setTextAreaValue(prevState => prevState + emoji.native);\r\n        focusInput();\r\n        setFreqSmiles(prevState => [...addNewSmileToFreq([...prevState], emoji.id)]);\r\n    }\r\n\r\n    const addFreqEmoji = (emoji) => {\r\n        setTextAreaValue(prevState => prevState + emoji.native);    \r\n        focusInput();\r\n    }\r\n\r\n    const handleClickShowSmiles = () => {\r\n        setShowSmiles(prevState => !prevState);\r\n    }\r\n\r\n    const handleEnterKeyPress = (e) => {\r\n        if (e.key === 'Enter') {\r\n            e.preventDefault();\r\n            sendOrEditMessage();\r\n        }\r\n    }\r\n\r\n    const sendOrEditMessage = () => {\r\n        props.editingMessage ? editMessage() : sendMessage();\r\n    }\r\n\r\n    const sendMessage = () => {\r\n        if (textAreaValue === '') return;\r\n\r\n        const messageData = {\r\n            text: textAreaValue,\r\n            sender: props.userId\r\n        }\r\n        const urlMatches = textAreaValue.match(/\\b(http|https)?:\\/\\/\\S+/gi) || [];\r\n\r\n        if (urlMatches.length === 0)\r\n            props.sendTextMessage(messageData, props.socket, messageTypes.TEXT);\r\n        else\r\n            props.sendTextMessage(messageData, props.socket, messageTypes.LINK);\r\n\r\n        setTextAreaValue('');\r\n    }\r\n\r\n    const editMessage = () => {\r\n        if (textAreaValue === '') return;\r\n\r\n        props.editMessage({ text: textAreaValue }, props.socket, props.editingMessage);\r\n        setTextAreaValue('');\r\n        props.clearSelectedMessages();\r\n    }\r\n\r\n    const smileLostFocusHandler = () => setShowSmiles(false);\r\n\r\n    return (\r\n        <div className={classes.inputBlock}>\r\n            <div style={{ position: 'relative' }}>\r\n                <Zoom in={showSmiles}>\r\n                    <Picker\r\n                        set='twitter'\r\n                        onSelect={addNewEmoji}\r\n                        color={'#FFE66D'}\r\n                        sheetSize={20}\r\n                    />\r\n                </Zoom>\r\n\r\n                <TextField\r\n                    id=\"filled-multiline-flexible\"\r\n                    className={classes.textArea}\r\n                    fullWidth\r\n                    multiline\r\n                    autoFocus \r\n                    inputRef={inputRef}\r\n                    rows={2}\r\n                    rowsMax={4}\r\n                    placeholder={'Start to write...'}\r\n                    value={textAreaValue}\r\n                    onChange={onInputChange}\r\n                    onKeyDown={handleEnterKeyPress}\r\n                    InputLabelProps={{\r\n                        className: classes.inputLabelProp\r\n                    }}\r\n                    InputProps={{\r\n                        className: classes.inputProp,\r\n                        endAdornment: (\r\n                            <InputAdornment position=\"end\" className={classes.addSmileBlock} onBlur={smileLostFocusHandler}>\r\n                                <IconButton\r\n                                    aria-label=\"toggle password visibility\"\r\n                                    onClick={handleClickShowSmiles}\r\n                                    disableRipple={true}\r\n                                    disableFocusRipple={true}\r\n                                    disableTouchRipple={true}\r\n                                    className={classes.toggleSmilesBtn}\r\n                                >\r\n                                    <InsertEmoticonIcon />\r\n                                </IconButton>\r\n                            </InputAdornment>\r\n                        )\r\n                    }}\r\n                />\r\n            </div>\r\n\r\n            <ActionSection\r\n                smiles={freqSmiles}\r\n                addEmoji={addFreqEmoji}\r\n                sendOrEditMessage={sendOrEditMessage}\r\n                changeProgress={props.changeProgress}\r\n                dispatchFiles={props.dispatchFiles}\r\n                focusInput={focusInput}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        userId: state.auth.id,\r\n        socket: state.sckt.socket,\r\n        topic: state.msg.topics[state.tpc.openedTopicId],\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        sendTextMessage: (message, socket, messageType) => { dispatch(sendTextMessageAction(message, socket, messageType)) },\r\n        editMessage: (message, socket, editableMessageId) => { dispatch(editMessageAction(message, socket, editableMessageId)) },\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InputBlock);\r\n","import React from 'react';\r\nimport { ListItemText } from '@material-ui/core';\r\n\r\nimport useStyles from '../../../../styles';\r\n\r\nconst MessageSceleton = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [emailName, emailEnd] = props.author.split('@');\r\n\r\n    return (\r\n        <ListItemText\r\n            primary={\r\n                props.showName ?\r\n                    <React.Fragment>\r\n                        <p className={[classes.capitalizeEmail, classes.messageAuthorEmail].join(' ')}>{emailName}</p>\r\n                        <p className={classes.messageAuthorEmail}>{'@' + emailEnd}</p>\r\n                    </React.Fragment> : null\r\n            }\r\n            disableTypography\r\n            secondary={props.content}\r\n        />\r\n    )\r\n}\r\n\r\nexport default MessageSceleton;","import React from 'react';\r\n\r\nimport MessageSceleton from '../MessageSceleton/MessageSceleton';\r\n\r\nconst TextItem = (props) => {\r\n    return (\r\n        <MessageSceleton\r\n            showName={props.showName}\r\n            author={props.message.creatorId.email}\r\n            content={\r\n                <p style={{\r\n                    color: 'black',\r\n                    margin: '0',\r\n                    marginTop: '5px',\r\n                }}>{props.message.text}</p>\r\n            }\r\n        />\r\n    )\r\n}\r\n\r\nexport default TextItem;\r\n","import React from 'react';\r\nimport MicrolinkCard from '@microlink/react';\r\n\r\nimport MessageSceleton from '../MessageSceleton/MessageSceleton';\r\n\r\nconst insertTextAtIndices = (text, obj) => {\r\n    return text.replace(/./g, function (character, index) {\r\n        return obj[index] ? obj[index] + character : character;\r\n    });\r\n};\r\n\r\n\r\nconst LinkItem = (props) => {\r\n    const urlMatches = props.message.text.match(/\\b(http|https)?:\\/\\/\\S+/gi) || [];\r\n\r\n    const LinkPreview = <MicrolinkCard url={urlMatches[0]} />;\r\n\r\n    let { text } = props.message;\r\n    urlMatches.forEach(link => {\r\n        const startIndex = text.indexOf(link);\r\n        const endIndex = startIndex + link.length;\r\n        text = insertTextAtIndices(text, {\r\n            [startIndex]: `<a href=\"${link}\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: cornflowerblue; word-break: break-word;\" >`,\r\n            [endIndex]: \"</a>\"\r\n        });\r\n    });\r\n\r\n    return (\r\n        <MessageSceleton\r\n            showName={props.showName}\r\n            author={props.message.creatorId.email}\r\n            content={\r\n                <div style={{\r\n                    color: 'black',\r\n                    margin: '0',\r\n                    marginTop: '5px',\r\n                }}\r\n                >\r\n                    <p dangerouslySetInnerHTML={{\r\n                        __html: text\r\n                    }}\r\n                    />\r\n                    {LinkPreview}\r\n                </div>\r\n            }\r\n        />\r\n    )\r\n}\r\n\r\nexport default LinkItem;\r\n","import React from 'react';\r\nimport { Avatar, List, ListItem, ListItemText, ListItemAvatar } from '@material-ui/core';\r\nimport { GetApp } from '@material-ui/icons';\r\n\r\nimport useStyles from '../../../../styles';\r\nimport MessageSceleton from '../MessageSceleton/MessageSceleton';\r\n\r\nconst getFileName = (path) => {\r\n    const pathContains = path.split('/');\r\n    return pathContains[pathContains.length - 1].slice(13);\r\n}\r\n\r\nconst TextItem = (props) => {\r\n    const classes = useStyles();\r\n    const FILE_PATH = props.message.path;\r\n\r\n    return (\r\n        <MessageSceleton\r\n            showName={props.showName}\r\n            author={props.message.creatorId.email}\r\n            content={\r\n                <List style={{ paddingTop: '0' }}>\r\n                    <ListItem alignItems=\"flex-start\" style={{ padding: '0' }}>\r\n                        <ListItemAvatar>\r\n                            <a href={FILE_PATH}>\r\n                                <Avatar className={classes.downloadIcon}>\r\n                                    <GetApp />\r\n                                </Avatar>\r\n                            </a>\r\n                        </ListItemAvatar>\r\n                        <ListItemText\r\n                            primary={\r\n                                <p style={{\r\n                                    fontFamily: 'Nunito, sans-serif',\r\n                                    fontSize: '14px',\r\n                                    fontWeight: '600',\r\n                                    margin: '0',\r\n                                    cursor: 'default',\r\n                                }}\r\n                                >{getFileName(FILE_PATH)}</p>\r\n                            }\r\n                            disableTypography\r\n                            secondary={\r\n                                <div style={{\r\n                                    paddingTop: '5px',\r\n                                }}>\r\n                                    <a\r\n                                        href={FILE_PATH}\r\n                                        className={classes.downloadLink}\r\n                                        onClick={(event) => event.stopPropagation() }\r\n                                    >Download</a>\r\n                                </div>\r\n                            }\r\n                        />\r\n                    </ListItem>\r\n                </List>\r\n            } />\r\n    )\r\n}\r\n\r\nexport default TextItem;\r\n","import React, { useState } from 'react';\r\n\r\nimport ImageReview from '../../../../../../UI/ImageReview/ImageReview';\r\nimport MessageSceleton from '../MessageSceleton/MessageSceleton';\r\n\r\nconst TextItem = (props) => {\r\n    const [openImage, setOpenImage] = useState(false);\r\n\r\n    const toggleImageReview = (event) => {\r\n        event.stopPropagation();\r\n        setOpenImage(prevState => !prevState);\r\n    }\r\n\r\n    const IMAGE_PATH = props.message.path;\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <ImageReview open={openImage} imageSrc={IMAGE_PATH} toggleView={toggleImageReview} />\r\n\r\n            <MessageSceleton\r\n                showName={props.showName}\r\n                author={props.message.creatorId.email}\r\n                content={\r\n                    <div style={{ width: '70%', paddingTop: '10px' }}>\r\n                        <img\r\n                            src={IMAGE_PATH}\r\n                            style={{\r\n                                maxHeight: '30vh',\r\n                                maxWidth: '100%',\r\n                                cursor: 'pointer',\r\n                            }}\r\n                            onClick={toggleImageReview}\r\n                            alt={'saved'} />\r\n                    </div>\r\n                } />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default TextItem;\r\n","import React from 'react';\r\n\r\nimport MessageSceleton from '../MessageSceleton/MessageSceleton';\r\n\r\nconst TextItem = (props) => {\r\n    return (\r\n        <MessageSceleton\r\n            showName={props.showName}\r\n            author={props.message.creatorId.email}\r\n            content={\r\n                <div style={{ width: '70%', paddingTop: '10px', }}>\r\n                    <video\r\n                        style={{\r\n                            maxHeight: '30vh',\r\n                            maxWidth: '100%',\r\n                        }}\r\n                        onClick={(event) => event.stopPropagation()}\r\n                        controls>\r\n                        <source src={props.message.path} type=\"video/mp4\" />\r\n                    </video>\r\n                </div>\r\n            }\r\n        />\r\n    )\r\n}\r\n\r\nexport default TextItem;\r\n","import React from 'react';\r\nimport {\r\n    ListItem,\r\n    ListItemAvatar,\r\n    Avatar,\r\n    ListItemSecondaryAction,\r\n    Typography,\r\n    ListItemIcon\r\n} from '@material-ui/core';\r\nimport { CheckCircle, FiberManualRecord } from '@material-ui/icons';\r\nimport VisibilitySensor from 'react-visibility-sensor';\r\n\r\nimport useStyles from '../../../styles';\r\nimport * as messageTypes from '../../../../../../utility/message-types';\r\nimport TextItem from './TextItem/TextItem';\r\nimport LinkItem from './LinkItem/LinkItem';\r\nimport FileItem from './FileItem/FileItem';\r\nimport ImageItem from './ImageItem/ImageItem';\r\nimport VideoItem from './VideoItem/VideoItem';\r\n\r\nconst displayedDataByType = (message, show) => {\r\n    if (message.type === messageTypes.TEXT) {\r\n        return <TextItem message={message} showName={show} />\r\n    }\r\n    if (message.type === messageTypes.LINK) {\r\n        return <LinkItem message={message} showName={show} />\r\n    }\r\n    else if (message.type === messageTypes.FILE)\r\n        return <FileItem message={message} showName={show} />\r\n\r\n    else if (message.type === messageTypes.IMAGE)\r\n        return <ImageItem message={message} showName={show} />\r\n\r\n    return <VideoItem message={message} showName={show} />\r\n}\r\n\r\nconst setListItemClasses = (classes, showAuthor, selectedMessages, messageId) => {\r\n    const listClasses = [classes.messageLiItem];\r\n    if (!showAuthor) {\r\n        listClasses.push(classes.messageLiWithAuthor);\r\n    }\r\n    if (selectedMessages.includes(messageId)) {\r\n        listClasses.push(classes.messageLiSelected);\r\n    }\r\n\r\n    return listClasses;\r\n}\r\n\r\nconst MessageItem = (props) => {\r\n    const classes = useStyles();\r\n    const humanDate = new Date(props.message.date * 1000).toLocaleTimeString();\r\n\r\n    let showAuthor = false;\r\n\r\n    if (\r\n        props.prevType !== props.message.type\r\n        || props.prevAuthor !== props.message.creatorId._id\r\n        || props.showAuthor\r\n    ) {\r\n        showAuthor = true;\r\n    }\r\n\r\n    const dataComponent = displayedDataByType(props.message, showAuthor);\r\n\r\n    const listClasses = setListItemClasses(classes, showAuthor, props.selectedMessagesId, props.message._id);\r\n\r\n    const isVisibleHandler = () => {\r\n        setTimeout(() => {\r\n            props.addToReaded(props.userId, props.message._id);\r\n        }, 500);\r\n    }\r\n\r\n    return (\r\n        <ListItem\r\n            alignItems=\"flex-start\"\r\n            className={listClasses.join(' ')}\r\n            onClick={props.changeSelectedMessage}\r\n            ContainerProps={{\r\n                className: 'message'\r\n            }}\r\n        >\r\n            {\r\n                (props.selectedMessagesId.includes(props.message._id))\r\n                    ? <ListItemIcon className={classes.isChecked}>\r\n                        <CheckCircle />\r\n                    </ListItemIcon>\r\n                    : null\r\n            }\r\n\r\n            {\r\n                !props.message.wasReadedBy.includes(props.userId) ?\r\n                    <ListItemIcon className={classes.isChecked}>\r\n                        <VisibilitySensor onChange={isVisibleHandler}>\r\n                            <FiberManualRecord className={classes.notReadedDot} />\r\n                        </VisibilitySensor>\r\n                    </ListItemIcon>\r\n                    : null\r\n            }\r\n            <ListItemAvatar>\r\n                {\r\n                    showAuthor\r\n                        ? <Avatar alt=\"LETTER\" className={classes.avatarStyle}>{props.message.creatorId.email.slice(0, 2)}</Avatar>\r\n                        : <div></div>\r\n                }\r\n            </ListItemAvatar>\r\n            {dataComponent}\r\n            <ListItemSecondaryAction className={classes.messageSecondaryAction}>\r\n                <Typography variant=\"caption\" display=\"block\" gutterBottom>{humanDate}</Typography>\r\n            </ListItemSecondaryAction>\r\n        </ListItem>\r\n    )\r\n}\r\n\r\nexport default MessageItem;\r\n","import React, { useEffect } from 'react';\r\nimport { List, CircularProgress, LinearProgress } from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\nimport VisibilitySensor from 'react-visibility-sensor';\r\n\r\nimport MessageItem from './MessageItem/MessageItem';\r\nimport useStyles from '../../styles';\r\nimport * as messageTypes from '../../../../../utility/message-types';\r\nimport { readMessageAction } from '../../../../../store/actions/messages';\r\n\r\nconst filterCheck = (message, filter) => {\r\n    if (!filter.photos && !filter.links && !filter.videos && !filter.files) return true;\r\n\r\n    if (message.type === messageTypes.IMAGE && filter.photos === true) return true;\r\n    if (message.type === messageTypes.LINK && filter.links === true) return true;\r\n    if (message.type === messageTypes.VIDEO && filter.videos === true) return true;\r\n    if (message.type === messageTypes.FILE && filter.files === true) return true;\r\n\r\n    return false;\r\n}\r\n\r\nconst MessageItems = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const loadPrevMessages = (isVisible = true) => {\r\n        if (!props.fetching && isVisible) {\r\n            props.fetchPreviousMessages();\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadPrevMessages();\r\n    }, [])\r\n\r\n    const firstNotReaded = (messageIndex, arrayLength) => {\r\n        const reverseMessageIndex = arrayLength - messageIndex;\r\n        return reverseMessageIndex === props.newMessagesLabelPosition && props.newMessagesLabelPosition !== 0;\r\n    }\r\n\r\n    const notReadedElement = (messageIndex, arrayLength) => {\r\n        return firstNotReaded(messageIndex, arrayLength)\r\n            ? <li className={[classes.newMessagesBlock, 'not-readed-message'].join(' ')}>New messages</li>\r\n            : null;\r\n    }\r\n\r\n    let lastMessageDate = null;\r\n    const messagesCount = props.topics[props.currTopicId].messages.length;\r\n    return (\r\n        <List className={[classes.messagesList, 'messages'].join(' ')}>\r\n            <VisibilitySensor\r\n                onChange={(isVisible) => loadPrevMessages(isVisible) }\r\n                offset={{ top: 120 }}\r\n                delayedCall={true} >\r\n                <li className={classes.topLiFetching} >\r\n                    {props.fetching ? <CircularProgress disableShrink /> : null}\r\n                </li>\r\n            </VisibilitySensor>\r\n            {\r\n                props.topics[props.currTopicId].messages.map((item, index) => {\r\n                    if (!filterCheck(item, props.filter)) return null;\r\n                    const currentMessageDate = new Date(item.date * 1000).toLocaleDateString();\r\n\r\n                    if (lastMessageDate !== currentMessageDate) {\r\n                        lastMessageDate = currentMessageDate;\r\n\r\n                        const shownTimeString = new Date(item.date * 1000).toDateString();\r\n                        return (\r\n                            <React.Fragment key={item._id}>\r\n                                {notReadedElement(index, messagesCount)}\r\n                                <li\r\n                                    style={\r\n                                        {\r\n                                            textAlign: 'center',\r\n                                            color: 'grey',\r\n                                            paddingTop: '20px',\r\n                                        }\r\n                                    }>{shownTimeString}</li>\r\n                                <MessageItem\r\n                                    message={item}\r\n                                    userId={props.userId}\r\n                                    addToReaded={props.addToReaded}\r\n                                    selectedMessagesId={props.selectedMessagesId}\r\n                                    showAuthor={firstNotReaded(index, messagesCount)}\r\n                                    changeSelectedMessage={props.changeSelectedMessage.bind(this, item._id)} />\r\n                            </React.Fragment>\r\n                        )\r\n                    }\r\n\r\n                    const [prevType, prevAuthor] = index !== 0 ? [\r\n                        props.topics[props.currTopicId].messages[index - 1].type,\r\n                        props.topics[props.currTopicId].messages[index - 1].creatorId._id,\r\n                    ] : null;\r\n\r\n                    return (\r\n                        <React.Fragment key={item._id}>\r\n                            {notReadedElement(index, messagesCount)}\r\n                            <MessageItem\r\n                                message={item}\r\n                                userId={props.userId}\r\n                                addToReaded={props.addToReaded}\r\n                                prevType={prevType}\r\n                                prevAuthor={prevAuthor}\r\n                                selectedMessagesId={props.selectedMessagesId}\r\n                                showAuthor={firstNotReaded(index, messagesCount)}\r\n                                changeSelectedMessage={props.changeSelectedMessage.bind(this, item._id)} />\r\n                        </React.Fragment>\r\n                    )\r\n                })\r\n            }\r\n            <li style={{ textAlign: 'center', padding: '0 10%' }} className={'message'}>\r\n                {props.savingMessages\r\n                    ? <LinearProgress variant=\"determinate\" value={props.loadingFileProgress} />\r\n                    : null}\r\n            </li>\r\n        </List>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        topics: state.msg.topics,\r\n        userId: state.auth.id,\r\n        currTopicId: state.tpc.openedTopicId,\r\n        savingMessages: state.msg.savingMessages,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        addToReaded: (userId, messageId) => { dispatch(readMessageAction(userId, messageId)) }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MessageItems);\r\n","import React from 'react';\r\n\r\nconst EmptyMessages = () => {\r\n    return (\r\n        <div style={\r\n            {\r\n                alignSelf: 'center',\r\n                color: 'grey',\r\n                position: 'absolute',\r\n                top: '50%',\r\n                transform: 'translateY(-50%)',\r\n            }\r\n        }>No messages yet...</div>\r\n    )\r\n}\r\n\r\nexport default EmptyMessages;","import React from 'react';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nconst LoadMessages = () => {\r\n    return (\r\n        <div style={\r\n            {\r\n                alignSelf: 'center',\r\n                position: 'absolute',\r\n                top: '50%',\r\n                transform: 'translateY(-50%)',\r\n            }\r\n        }><CircularProgress disableShrink /></div>\r\n    )\r\n}\r\n\r\nexport default LoadMessages;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport $ from 'jquery';\r\nimport axios from '../../../../utility/axios-instance';\r\n\r\nimport useStyles from '../styles';\r\nimport MessageItems from './MessageItems/MessageItems';\r\nimport EmptyMessages from './EmptyMessages/EmptyMessages';\r\nimport LoadMessages from './LoadMessages/LoadMessages';\r\nimport { fetchMessagesAction } from '../../../../store/actions/messages';\r\n\r\nconst scrollToTopPosition = (topPosition, parent, delay = 0) => {\r\n    return new Promise((resolve, reject) => {\r\n        $(parent).animate({ scrollTop: topPosition }, delay, () => {\r\n            resolve();\r\n        });\r\n    });\r\n}\r\n\r\nconst getTopPostion = (el) => {\r\n    return $(el).offset().top\r\n}\r\n\r\nconst topicIsExist = (topic) => {\r\n    return topic && topic.messages;\r\n}\r\n\r\nconst MessageBlock = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [fetching, setFetching] = useState(false);\r\n    const [, setAllowToFetch] = useState(false);\r\n    const [, setSkip] = useState(0);\r\n    const [newMessagesLabelPosition, setNewMessagesLabelPosition] = useState(0);\r\n    const [firstFetching, setFirstFetching] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (props.currTopicId) {\r\n            axios.post('/topic/messages/single/readers/' + props.currTopicId, { userId: props.userId })\r\n                .then(count => {\r\n                    setNewMessagesLabelPosition(count.data);\r\n\r\n                    let displayCount = count.data;\r\n                    displayCount += 5;\r\n                    if (displayCount < 15) displayCount += 15 - displayCount;    //prepend 5 messages to unreaded messages\r\n                    loadMessagesHistory(displayCount, true).then(() => {\r\n                        firstFetchingScroll();\r\n                    });\r\n                })\r\n        }\r\n    }, [props.currTopicId])\r\n\r\n    useEffect(() => {\r\n        if (props.savingMessages === true) savingMessageScroll();\r\n        else {\r\n            setNewMessagesLabelPosition(0);\r\n            props.changeProgress(0);\r\n            setTimeout(() => savingMessageScroll(), 300);\r\n        }\r\n    }, [props.savingMessages])\r\n\r\n    useEffect(() => {\r\n        if (props.recivingMessage === false) {\r\n            setNewMessagesLabelPosition(0);\r\n            setTimeout(() => savingMessageScroll(), 300);\r\n        }\r\n        else setSkip(prevState => prevState + 1);\r\n    }, [props.recivingMessage])\r\n\r\n    const getSkip = () => {\r\n        let skip = null;\r\n        setSkip(prevState => {\r\n            skip = prevState;\r\n            return prevState;\r\n        });\r\n        return skip;\r\n    }\r\n\r\n    const getLastAllowToFetch = () => {\r\n        let allow = null;\r\n        setAllowToFetch(prevState => {\r\n            allow = prevState;\r\n            return prevState;\r\n        });\r\n        return allow;\r\n    }\r\n\r\n    const getLastFetching = () => {\r\n        let fetching = null;\r\n        setFetching(prevState => {\r\n            fetching = prevState;\r\n            return prevState;\r\n        });\r\n        return fetching;\r\n    }\r\n\r\n    const firstFetchingScroll = () => {\r\n        setFirstFetching(false);\r\n\r\n        let messages = document.querySelector(\".messages\");\r\n        let message = document.querySelector(\".messages .not-readed-message\");\r\n        let goBack = 110;\r\n\r\n        if (!message) {\r\n            goBack = 0;\r\n            message = document.querySelector(\".messages .message:last-of-type\");\r\n        }\r\n\r\n        setTimeout(() => {\r\n            if (message) {\r\n                scrollToTopPosition(getTopPostion(message) - goBack, messages, 300)\r\n                    .then(() => setAllowToFetch(true));\r\n            } else {\r\n                setAllowToFetch(true);\r\n            }\r\n        }, 500)\r\n    }\r\n\r\n    const savingMessageScroll = () => {\r\n        let lastMessage = document.querySelector(\".messages .message:last-of-type\");\r\n        if (lastMessage) {\r\n            lastMessage.scrollIntoView();\r\n        }\r\n    }\r\n\r\n    const prevFetchingScroll = (firstMessage, oldFirstMessageTopPosition) => {\r\n        const messages = document.querySelector(\".messages\");\r\n        let newFirstMessageTopPosition = getTopPostion(firstMessage);\r\n\r\n        if (firstMessage) {\r\n            scrollToTopPosition(newFirstMessageTopPosition - oldFirstMessageTopPosition, messages)\r\n                .then(() => setFetching(false));\r\n        } else {\r\n            setFetching(false);\r\n        }\r\n    }\r\n\r\n    const fetchPreviousMessages = () => {\r\n        if (!getLastAllowToFetch() || getLastFetching()) return;\r\n        const firstMessage = document.querySelectorAll(\".messages .message\")[1];\r\n        if (!firstMessage) return;\r\n\r\n        const oldFirstMessageTopPosition = getTopPostion(firstMessage);\r\n\r\n        setFetching(true);\r\n        loadMessagesHistory(15).then(() => {\r\n            if (!firstMessage) return;\r\n            prevFetchingScroll(firstMessage, oldFirstMessageTopPosition);\r\n        });\r\n    }\r\n\r\n    const loadMessagesHistory = (limit, isFirstLoad) => {\r\n        return new Promise((resolve, reject) => {\r\n            if (isFirstLoad && topicIsExist(props.topic)) {\r\n                setSkip(props.topic.messages.length);\r\n                resolve();\r\n                return;\r\n            }\r\n\r\n            const data = {\r\n                skip: getSkip(),\r\n                limit,\r\n                currTopicId: props.currTopicId,\r\n                resolve,\r\n                setAllowToFetch,\r\n                setSkip,\r\n            }\r\n            props.fetchMessages(data);\r\n        })\r\n    }\r\n\r\n    let messages = <EmptyMessages />\r\n    if (topicIsExist(props.topic)) {\r\n        messages = <MessageItems\r\n            fetchPreviousMessages={fetchPreviousMessages}\r\n            fetching={fetching}\r\n            loadingFileProgress={props.loadingFileProgress}\r\n            changeSelectedMessage={props.changeSelectedMessage}\r\n            selectedMessagesId={props.selectedMessagesId}\r\n            filter={props.filter}\r\n            newMessagesLabelPosition={newMessagesLabelPosition} />\r\n    }\r\n\r\n    if (firstFetching) messages = <LoadMessages />\r\n\r\n    return (\r\n        <div className={classes.messagesBlock}>\r\n            {messages}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        topic: state.msg.topics[state.tpc.openedTopicId],\r\n        currTopicId: state.tpc.openedTopicId,\r\n        savingMessages: state.msg.savingMessages,\r\n        recivingMessage: state.msg.recivingMessage,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        fetchMessages: (data) => { dispatch(fetchMessagesAction(data)) }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MessageBlock);\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Button } from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\n\r\nimport useStyles from '../../styles';\r\nimport * as messageTypes from '../../../../../utility/message-types';\r\nimport { removeMessageAction } from '../../.././../../store/actions/messages';\r\n\r\nconst someIsSelected = (selectedsId) => {\r\n    if (selectedsId.length > 0) return true;\r\n    return false;\r\n}\r\n\r\nconst selectedIsEditable = (selectedsId, messages) => {\r\n    if (selectedsId.length !== 1) return false;\r\n    const isEditable = selectedsId.reduce((editable, item) => {\r\n        const message = messages.find(message => message._id === item);\r\n\r\n        if (!message) return editable;\r\n\r\n        if (message.type === messageTypes.TEXT || message.type === messageTypes.LINK)\r\n            return editable && true;\r\n        else\r\n            return editable && false;\r\n    }, true)\r\n\r\n    return isEditable;\r\n}\r\n\r\nconst MessageActions = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [content, setContent] = useState([]);\r\n\r\n    const editMessageHandler = (event) => {\r\n        event.stopPropagation();\r\n        props.editingMessageStart();\r\n    }\r\n\r\n    const removeMessageHandler = (event) => {\r\n        event.stopPropagation();\r\n\r\n        props.selectedMessagesId.map(messageId => {\r\n            return props.removeMessage(messageId, props.socket);\r\n        })\r\n        \r\n        props.clearSelectedMessages();\r\n    }\r\n\r\n    const deleteButton = <Button\r\n        key={'delete'}\r\n        size=\"small\"\r\n        color={'secondary'}\r\n        className={classes.deleteButton}\r\n        onClick={removeMessageHandler} >Delete</Button>\r\n\r\n    const editButton = <Button\r\n        key={'edit'}\r\n        size=\"small\"\r\n        className={classes.editButton}\r\n        onClick={editMessageHandler} >Edit</Button>\r\n\r\n    useEffect(() => {\r\n        const buttons = [];\r\n        if (props.topic && selectedIsEditable(props.selectedMessagesId, props.topic.messages)) {\r\n            buttons.push(editButton);\r\n        }\r\n        if (props.topic && someIsSelected(props.selectedMessagesId)) {\r\n            buttons.push(deleteButton);\r\n        }\r\n\r\n        setContent([...buttons]);\r\n    }, [props.topic, props.selectedMessagesId])\r\n\r\n    return (\r\n        <div className={classes.messageActionsBlock}>\r\n            {content}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        topic: state.msg.topics[state.tpc.openedTopicId],\r\n        socket: state.sckt.socket,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        removeMessage: (messageId, socket) => { dispatch(removeMessageAction(messageId, socket)) }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MessageActions);\r\n","import React from 'react';\r\nimport { Chip } from '@material-ui/core';\r\nimport {\r\n    InsertDriveFileRounded,\r\n    PhotoSizeSelectActualRounded,\r\n    MovieRounded,\r\n    LinkRounded,\r\n    Done\r\n} from '@material-ui/icons';\r\n\r\nimport useStyles from '../../styles';\r\n\r\nconst FilterActions = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const handleFile = (startFilter) => {\r\n        const currentFilter = { ...props.filter };\r\n        currentFilter.files = startFilter;\r\n        props.setFilter({ ...currentFilter });\r\n    }\r\n\r\n    const handlePhoto = (startFilter) => {\r\n        const currentFilter = { ...props.filter };\r\n        currentFilter.photos = startFilter;\r\n        props.setFilter({ ...currentFilter });\r\n    }\r\n\r\n    const handleVideo = (startFilter) => {\r\n        const currentFilter = { ...props.filter };\r\n        currentFilter.videos = startFilter;\r\n        props.setFilter({ ...currentFilter });\r\n    }\r\n\r\n    const handleLink = (startFilter) => {\r\n        const currentFilter = { ...props.filter };\r\n        currentFilter.links = startFilter;\r\n        props.setFilter({ ...currentFilter });\r\n    }\r\n\r\n    return (\r\n        <div className={classes.filterActionsBlock}>\r\n            <Chip\r\n                icon={<InsertDriveFileRounded />}\r\n                label=\"By Files\"\r\n                clickable\r\n                className={classes.filterChip}\r\n                color=\"primary\"\r\n                onClick={handleFile.bind(this, true)}\r\n                onDelete={handleFile.bind(this, false)}\r\n                deleteIcon={props.filter.files ? null : <Done /> }\r\n                variant={props.filter.files ? 'default' : 'default'}\r\n            />\r\n            <Chip\r\n                icon={<PhotoSizeSelectActualRounded />}\r\n                label=\"By Photos\"\r\n                clickable\r\n                className={classes.filterChip}\r\n                color=\"primary\"\r\n                onClick={handlePhoto.bind(this, true)}\r\n                onDelete={handlePhoto.bind(this, false)}\r\n                deleteIcon={props.filter.photos ? null : <Done /> }\r\n                variant={props.filter.photos ? 'default' : 'default'}\r\n            />\r\n            <Chip\r\n                icon={<MovieRounded />}\r\n                label=\"By Videos\"\r\n                clickable\r\n                className={classes.filterChip}\r\n                color=\"primary\"\r\n                onClick={handleVideo.bind(this, true)}\r\n                onDelete={handleVideo.bind(this, false)}\r\n                deleteIcon={props.filter.videos ? null : <Done /> }\r\n                variant={props.filter.videos ? 'default' : 'default'}\r\n            />\r\n            <Chip\r\n                icon={<LinkRounded />}\r\n                label=\"By Links\"\r\n                clickable\r\n                className={classes.filterChip}\r\n                color=\"primary\"\r\n                onClick={handleLink.bind(this, true)}\r\n                onDelete={handleLink.bind(this, false)}\r\n                deleteIcon={props.filter.links ? null : <Done /> }\r\n                variant={props.filter.links ? 'default' : 'default'}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FilterActions;\r\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n    ExpansionPanel,\r\n    ExpansionPanelDetails,\r\n    ExpansionPanelSummary,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport { connect } from 'react-redux';\r\n\r\nimport useStyles from '../styles';\r\nimport MessageActions from './MessageActions/MessageActions';\r\nimport FilterActions from './FilterActions/FilterActions';\r\n\r\nconst getCurrentTopic = (topics, idTopic) => {\r\n    for (let topic of topics) {\r\n        if (topic._id === idTopic) return topic;\r\n    }\r\n}\r\n\r\nconst ActionsBlock = (props) => {\r\n    const classes = useStyles(useStyles);\r\n\r\n    const [expanded, setExpanded] = useState(false);\r\n\r\n    const handleChange = panel => (event, isExpanded) => {\r\n        setExpanded(isExpanded ? true : false);\r\n    };\r\n\r\n    const [topicName, setTopicName] = useState('');\r\n    const [topicNote, setTopicNote] = useState('');\r\n    const [membersCount, setMembersCount] = useState('');\r\n\r\n    useEffect(() => {\r\n        if (!props.openedTopicId) return;\r\n        const topic = getCurrentTopic(props.topics, props.openedTopicId);\r\n\r\n        setTopicName(topic.name);\r\n        setTopicNote(topic.note);\r\n        setMembersCount(topic.membersId.length);\r\n    }, [props.openedTopicId])\r\n\r\n    const handleBlur = () => {\r\n        setExpanded(false);\r\n    }\r\n\r\n    return (\r\n        <div className={classes.actionsBlock}>\r\n            <ExpansionPanel expanded={expanded} onChange={handleChange(expanded)} onBlur={handleBlur} className={classes.expansionMenu}>\r\n                <ExpansionPanelSummary\r\n                    expandIcon={<ExpandMoreIcon />}\r\n                    aria-controls=\"panel1bh-content\"\r\n                    id=\"panel1bh-header\"\r\n                    className={classes.topicData}\r\n                >\r\n                    <Typography className={classes.topicName}>{topicName}</Typography>\r\n                    <Typography className={classes.membersCount}>\r\n                        {membersCount +\r\n                            ((membersCount > 1)\r\n                                ? ' members'\r\n                                : ' member')}\r\n                    </Typography>\r\n                    <MessageActions\r\n                        selectedMessagesId={props.selectedMessagesId}\r\n                        editingMessageStart={props.editingMessageStart}\r\n                        clearSelectedMessages={props.clearSelectedMessages} />\r\n                </ExpansionPanelSummary>\r\n                <ExpansionPanelDetails className={classes.secondaryActions}>\r\n                    <Typography className={classes.topicNote}>{topicNote}</Typography>\r\n                    <FilterActions\r\n                        filter={props.filter}\r\n                        setFilter={props.setFilter} />\r\n                </ExpansionPanelDetails>\r\n            </ExpansionPanel>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        topics: state.tpc.topics,\r\n        openedTopicId: state.tpc.openedTopicId,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ActionsBlock);\r\n","import React, { useEffect, useState } from 'react';\r\nimport Dropzone from 'react-dropzone';\r\nimport { connect } from 'react-redux';\r\n\r\nimport useStyles from './styles';\r\nimport InputBlock from './InputBlock/InputBlock';\r\nimport MessageBlock from './MessageBlock/MessageBlock';\r\nimport ActionsBlock from './ActionsBlock/ActionsBlock';\r\nimport { setCurrentTopicActionCreator } from '../../../store/actions/topics';\r\nimport { sendFileMessageAction } from '../../../store/actions/messages';\r\n\r\nconst TopicContent = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [loadingFileProgress, setLoadingFileProgress] = useState(0);\r\n\r\n    const [editingMessage, setEditingMessage] = useState(null);\r\n\r\n    const [selectedMessagesId, setSelectedMessageId] = useState([]);\r\n\r\n    const [filter, setFilter] = useState({\r\n        files: false,\r\n        photos: false,\r\n        videos: false,\r\n        links: false,\r\n    });\r\n\r\n    const editingMessageHandler = () => {\r\n        if (selectedMessagesId.length === 1)\r\n            setEditingMessage(selectedMessagesId[0]);\r\n    }\r\n\r\n    const changeSelectedMessage = (messageId) => {\r\n        if (selectedMessagesId.includes(messageId)) {\r\n            const newCollection = selectedMessagesId.filter(item => item !== messageId);\r\n            setSelectedMessageId([...newCollection]);\r\n        }\r\n        else {\r\n            const newCollection = [...selectedMessagesId];\r\n            newCollection.push(messageId);\r\n            setSelectedMessageId([...newCollection]);\r\n        }\r\n\r\n        setEditingMessage(null);\r\n    }\r\n\r\n    const clearSelectedMessages = () => {\r\n        setSelectedMessageId([]);\r\n        setEditingMessage(null);\r\n    }\r\n\r\n    const changeProgress = (newProgress) => {\r\n        setLoadingFileProgress(newProgress);\r\n    }\r\n\r\n    const dispatchFiles = (files) => {\r\n        files.map(file => {\r\n            const messageData = {\r\n                file: file,\r\n                sender: props.userId,\r\n            }\r\n            return props.uploadFile(messageData, props.socket, changeProgress);\r\n        });\r\n    }\r\n\r\n    const roomName = props.match.params.id;\r\n\r\n    useEffect(() => {\r\n        props.setCurrentTopic(roomName);\r\n    }, [])\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Dropzone onDrop={acceptedFiles => { dispatchFiles(acceptedFiles, props.imageDrop) }}>\r\n                {({ getRootProps }) => (\r\n                    <section className={classes.dropSection}>\r\n                        <div {...getRootProps()} className={classes.dropArea}>\r\n                            <ActionsBlock\r\n                                selectedMessagesId={selectedMessagesId}\r\n                                editingMessageStart={editingMessageHandler}\r\n                                clearSelectedMessages={clearSelectedMessages}\r\n                                filter={filter}\r\n                                setFilter={setFilter} />\r\n                            <MessageBlock\r\n                                loadingFileProgress={loadingFileProgress}\r\n                                changeSelectedMessage={changeSelectedMessage}\r\n                                selectedMessagesId={selectedMessagesId}\r\n                                changeProgress={changeProgress}\r\n                                userId={props.userId}\r\n                                filter={filter} />\r\n                            <InputBlock\r\n                                socketRoom={roomName}\r\n                                changeProgress={changeProgress}\r\n                                dispatchFiles={dispatchFiles}\r\n                                editingMessage={editingMessage}\r\n                                clearSelectedMessages={clearSelectedMessages} />\r\n                        </div>\r\n                    </section>\r\n                )}\r\n            </Dropzone>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        openLoading: state.msg.loading,\r\n        savingMessages: state.msg.savingMessages,\r\n        socket: state.sckt.socket,\r\n        userId: state.auth.id,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        setCurrentTopic: (topicId) => { dispatch(setCurrentTopicActionCreator(topicId)) },\r\n        uploadFile: (messageData, socket, changeProgress) => { dispatch(sendFileMessageAction(messageData, socket, changeProgress)) }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TopicContent);\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst style = makeStyles(theme => ({\r\n    root: {\r\n        padding: theme.spacing(3),\r\n        height: '100%',\r\n        width: '100%',\r\n        overflow: 'auto',\r\n        \"&::-webkit-scrollbar-track\": {\r\n            borderRadius: '10px',\r\n        },\r\n        \"&::-webkit-scrollbar\": {\r\n            width: '8px',\r\n            backgroundColor: 'transparent',\r\n        },\r\n        \"&::-webkit-scrollbar-thumb\": {\r\n            borderRadius: '10px',\r\n            backgroundColor: '#fff6ca',\r\n            opacity: '0.3',\r\n        },\r\n    },\r\n    gridConatainer: {\r\n        width: '100%',\r\n        margin: '0',\r\n        flexGrow: 1\r\n    },\r\n    topic: {\r\n        borderRadius: '5px',\r\n        height: '180px',\r\n        width: '100%',\r\n        background: '#FFFFFF',\r\n        boxShadow: theme.shadows[3],\r\n        \"&:hover\": {\r\n            background: '#FCFCFC',\r\n        }\r\n    },\r\n    topicInfo: {\r\n        height: 'inherit',\r\n        width: '100%',\r\n        padding: '10px 10px 5px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        flexDirection: 'column',\r\n        justifyContent: 'space-around',\r\n    },\r\n    topicLink: {\r\n        textDecoration: 'none',\r\n        color: '#000000',\r\n        fontFamily: 'Lato, sans-serif',\r\n    },\r\n    topicName: {\r\n        fontFamily: 'Lato, sans-serif',\r\n        fontSize: '28px',\r\n        margin: '0',\r\n        wordBreak: 'break-word',\r\n    },\r\n    topicNote: {\r\n        fontSize: '14px',\r\n        color: 'grey',\r\n        overflow: 'auto',\r\n        \"&::-webkit-scrollbar-track\": {\r\n            borderRadius: '10px',\r\n        },\r\n        \"&::-webkit-scrollbar\": {\r\n            width: '8px',\r\n            backgroundColor: 'transparent',\r\n        },\r\n        \"&::-webkit-scrollbar-thumb\": {\r\n            borderRadius: '10px',\r\n            backgroundColor: '#fff6ca',\r\n            opacity: '0.3',\r\n        },\r\n    },\r\n    topicCreated: {\r\n        color: 'grey',\r\n        fontSize: '12px',\r\n        margin: '0',\r\n    },\r\n    topicHat: {\r\n        height: '10px',\r\n        width: '100%',\r\n        position: 'absolute',\r\n        top: '0',\r\n        background: '#FFE66D',\r\n        borderTopLeftRadius: '5px',\r\n        borderTopRightRadius: '5px',\r\n    },\r\n    topicMenuButton: {\r\n        zIndex: '1',\r\n        position: 'absolute',\r\n        top: '15px',\r\n        right: '0',\r\n        transition: 'all .3s',\r\n        \"&:hover\": {\r\n            background: 'none',\r\n            color: '#000000',\r\n        }\r\n    },\r\n    unreadedCount: {\r\n        position: 'absolute !important',\r\n        left: '20px',\r\n        bottom: '20px',\r\n    },\r\n    topicsNotFoundImg: {\r\n        maxWidth: '100%',\r\n        maxHeight: '95%',\r\n        display: 'block',\r\n        margin: 'auto',\r\n    },\r\n    topicsNotFoundNote: {\r\n        width: '100%',\r\n        maxHeight: '100%',\r\n        margin: '-24px',\r\n        position: 'absolute',\r\n        textAlign: 'center',\r\n        '& p:first-child': {\r\n            fontSize: '30px',\r\n            color: 'grey',\r\n            fontFamily: '\"Nunito\", sans-serif',\r\n            marginBottom: '0',\r\n        },\r\n        '& p:last-child': {\r\n            fontSize: '18px',\r\n            color: 'lightgray',\r\n            fontFamily: '\"Nunito\", sans-serif',\r\n        },\r\n    }\r\n}));\r\n\r\nexport default style;\r\n","import React from 'react';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport {\r\n    IconButton,\r\n    Menu,\r\n    MenuItem,\r\n    Fade,\r\n    Snackbar\r\n} from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\n\r\nimport useStyles from '../../../styles';\r\nimport { leaveTopicAction } from '../../../../../../store/actions/topics';\r\n\r\nconst TopicMenu = (props) => {\r\n    const classes = useStyles();\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const open = Boolean(anchorEl);\r\n    const handleClick = event => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const [openSnackbar, setOpenSnackbar] = React.useState(false);\r\n\r\n    const handleCloseSnackbar = () => {\r\n        setOpenSnackbar(false);\r\n    }\r\n\r\n    const handleOpenSnackbar = () => {\r\n        setOpenSnackbar(true);\r\n    }\r\n\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const closeAndEdit = () => {\r\n        handleClose();\r\n        props.edtiDialogOpen();\r\n    }\r\n\r\n    const closeAndLeave = () => {\r\n        handleClose();\r\n        props.leaveTopic(props.topic._id, handleOpenSnackbar, props.socket);\r\n    }\r\n\r\n    const closeAndShare = () => {\r\n        handleClose();\r\n        props.shareDialogOpen();\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <IconButton\r\n                aria-label=\"more\"\r\n                aria-controls=\"long-menu\"\r\n                aria-haspopup=\"true\"\r\n                className={classes.topicMenuButton}\r\n                disableRipple={true}\r\n                onClick={handleClick}\r\n            >\r\n                <MoreVertIcon />\r\n            </IconButton>\r\n\r\n            <Menu\r\n                id=\"fade-menu\"\r\n                anchorEl={anchorEl}\r\n                keepMounted\r\n                open={open}\r\n                onClose={handleClose}\r\n                TransitionComponent={Fade}\r\n            >\r\n                <MenuItem onClick={closeAndShare}>Share topic</MenuItem>\r\n                <MenuItem onClick={closeAndEdit}>Edit name</MenuItem>\r\n                <MenuItem onClick={closeAndLeave}>Leave</MenuItem>\r\n            </Menu>\r\n\r\n            <Snackbar\r\n                anchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\r\n                open={openSnackbar}\r\n                onClose={handleCloseSnackbar}\r\n                message={'Topic was leaved'}\r\n            />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        socket: state.sckt.socket,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        leaveTopic: (topicId, handleOpenSnackbar, socket) => { dispatch(leaveTopicAction(topicId, handleOpenSnackbar, socket)) }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TopicMenu);\r\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n    Grid,\r\n    Zoom,\r\n    ButtonBase,\r\n    Badge\r\n} from '@material-ui/core';\r\nimport { ReactLink as Link } from '../../../../UI/Link/Link';\r\nimport { withRouter } from 'react-router-dom';\r\nimport axios from '../../../../../utility/axios-instance';\r\n\r\nimport useStyles from '../../styles';\r\nimport TopicMenu from './TopicMenu/TopicMenu';\r\n\r\nconst Topic = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [unreadedCount, setUnreadedCount] = useState(0);\r\n\r\n    useEffect(() => {\r\n        axios.post('/topic/messages/single/readers/' + props.data._id, { userId: props.userId })\r\n            .then(count => {\r\n                setUnreadedCount(count.data);\r\n            })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (!props.newUnreadMessage) return;\r\n\r\n        const unreadMessageTopicId = props.newUnreadMessage.topicId;\r\n        if (unreadMessageTopicId === props.data._id) setUnreadedCount(prevState => prevState + 1);\r\n        console.log(unreadMessageTopicId);\r\n    }, [props.newUnreadMessage])\r\n\r\n    return (\r\n        <Zoom in={true} style={{ transitionDelay: 200 * props.delay + 'ms', position: 'relative' }}>\r\n            <Grid item xs={12} sm={6} md={4} lg={3} >\r\n                <TopicMenu\r\n                    edtiDialogOpen={props.edtiDialogOpen}\r\n                    shareDialogOpen={props.shareDialogOpen}\r\n                    topic={props.data} />\r\n\r\n                <Link className={classes.topicLink} to={props.match.url + '/' + props.data._id}>\r\n                    <ButtonBase className={classes.topic}>\r\n                        <div className={classes.topicHat}></div>\r\n                        <div className={classes.topicInfo}>\r\n                            <p className={classes.topicName}>{props.data.name}</p>\r\n\r\n                            {props.data.note\r\n                                ? <p className={classes.topicNote}>{props.data.note}</p>\r\n                                : null}\r\n\r\n                            <p className={classes.topicCreated}>{props.data.date}</p>\r\n                            {\r\n                                unreadedCount > 0\r\n                                    ? <Badge\r\n                                        className={classes.unreadedCount}\r\n                                        badgeContent={unreadedCount}\r\n                                        max={99}\r\n                                        color={'primary'} />\r\n                                    : null\r\n                            }\r\n                        </div>\r\n                    </ButtonBase>\r\n                </Link>\r\n            </Grid>\r\n        </Zoom>\r\n    )\r\n}\r\n\r\nexport default withRouter(Topic);\r\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Slide,\r\n    TextField,\r\n    Snackbar\r\n} from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\n\r\nimport useStyles from './styles';\r\nimport { validation } from '../../../utility/validation';\r\nimport { editTopicAction, editTopicActionCreator } from '../../../store/actions/topics';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst EditTopic = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [stateInputs, setStateInputs] = useState({\r\n        title: {\r\n            config: {\r\n                name: 'title',\r\n                label: 'Title',\r\n            },\r\n            validationRules: {\r\n                isRequred: true,\r\n                maxLength: 20,\r\n            },\r\n            isValid: true,\r\n            validationMessage: '',\r\n            value: '',\r\n        },\r\n        notes: {\r\n            config: {\r\n                name: 'notes',\r\n                label: 'Notes',\r\n            },\r\n            validationRules: {\r\n                maxLength: 100,\r\n            },\r\n            isValid: true,\r\n            validationMessage: '',\r\n            value: '',\r\n        }\r\n    });\r\n\r\n    const [openSnackbar, setOpenSnackbar] = useState(false);\r\n\r\n    const handleCloseSnackbar = () => {\r\n        setOpenSnackbar(false);\r\n    }\r\n\r\n    const handleOpenSnackbar = () => {\r\n        setOpenSnackbar(true);\r\n    }\r\n\r\n    useEffect(() => {\r\n        props.topic === null ? clearTopic() : toPropsTopic();\r\n    }, [props.topic])\r\n\r\n    const clearTopic = () => {\r\n        setStateInputs(prevState => {\r\n            return {\r\n                ...prevState,\r\n                title: {\r\n                    ...prevState.title,\r\n                    isValid: true,\r\n                    validationMessage: '',\r\n                    value: '',\r\n                },\r\n                notes: {\r\n                    ...prevState.notes,\r\n                    isValid: true,\r\n                    validationMessage: '',\r\n                    value: '',\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    const toPropsTopic = () => {\r\n        setStateInputs(prevState => {\r\n            return {\r\n                ...prevState,\r\n                title: {\r\n                    ...prevState.title,\r\n                    value: props.topic.name,\r\n                },\r\n                notes: {\r\n                    ...prevState.notes,\r\n                    value: props.topic.note,\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    const editTopicHandler = () => {\r\n        const updateTopic = {\r\n            _id: props.topic._id,\r\n            name: stateInputs.title.value,\r\n            note: stateInputs.notes.value,\r\n            date: new Date().toLocaleDateString(),\r\n        }\r\n\r\n        //close dialog\r\n        props.handleClose();\r\n\r\n        //send patch request to api\r\n        props.startEditingTopic(updateTopic);\r\n\r\n        //update state\r\n        props.finishEditingTopic(updateTopic, handleOpenSnackbar);\r\n    }\r\n\r\n    const onInputHandler = (inputName, event) => {\r\n        const newValue = event.target.value;\r\n\r\n        const [currentValid, newValidationMessage] = validation(\r\n            newValue,\r\n            stateInputs[inputName].validationRules,\r\n            null\r\n        );\r\n\r\n        setStateInputs(prevState => ({\r\n            ...prevState,\r\n            [inputName]: {\r\n                ...prevState[inputName],\r\n                value: newValue,\r\n                isValid: currentValid,\r\n                validationMessage: newValidationMessage\r\n            }\r\n        }));\r\n    }\r\n\r\n    let inputs = [];\r\n    let fieldsIsValid = true;\r\n\r\n    for (let key in stateInputs) {\r\n        inputs.push(\r\n            <TextField\r\n                key={key}\r\n                className={classes.topicInput}\r\n                label={stateInputs[key].config.label}\r\n                name={stateInputs[key].config.name}\r\n                fullWidth\r\n                color=\"primary\"\r\n                value={stateInputs[key].value}\r\n                onInput={onInputHandler.bind(this, key)}\r\n                error={!stateInputs[key].isValid && stateInputs[key].value.length > 0}\r\n                helperText={stateInputs[key].validationMessage}\r\n            />\r\n        );\r\n\r\n        fieldsIsValid = stateInputs[key].isValid && fieldsIsValid;\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Dialog\r\n                open={props.open}\r\n                TransitionComponent={Transition}\r\n                keepMounted\r\n                maxWidth={'xs'}\r\n                onClose={props.handleClose}\r\n                aria-labelledby=\"alert-dialog-slide-title\"\r\n                aria-describedby=\"alert-dialog-slide-description\"\r\n            >\r\n                <div className={classes.dialogColorHat}></div>\r\n                <DialogTitle id=\"alert-dialog-slide-title\" className={classes.topicTitle}>{\"Edit Topic\"}</DialogTitle>\r\n                <DialogContent>\r\n                    {inputs}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button className={classes.closeBtn} onClick={props.handleClose}>Disagree</Button>\r\n                    <Button disabled={!fieldsIsValid} className={classes.agreeBtn} onClick={editTopicHandler}>Agree</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n\r\n            <Snackbar\r\n                anchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\r\n                open={openSnackbar}\r\n                onClose={handleCloseSnackbar}\r\n                message={'Topic was edited'}\r\n            />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        startEditingTopic: (topic) => { dispatch(editTopicAction(topic)) },\r\n        finishEditingTopic: (topic, handleOpenSnackbar) => { dispatch(editTopicActionCreator(topic, handleOpenSnackbar)) }\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(EditTopic);\r\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Slide,\r\n    TextField,\r\n    Snackbar\r\n} from '@material-ui/core';\r\nimport axios from '../../../utility/axios-instance';\r\n\r\nimport useStyles from './styles';\r\nimport { validation } from '../../../utility/validation';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ShareTopic = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [stateInputs, setStateInputs] = useState({\r\n        email: {\r\n            config: {\r\n                name: 'email',\r\n                label: 'Email',\r\n            },\r\n            validationRules: {\r\n                isRequred: true,\r\n                isEmail: true,\r\n            },\r\n            isValid: false,\r\n            validationMessage: '',\r\n            value: '',\r\n        },\r\n    });\r\n\r\n    const [openSnackbar, setOpenSnackbar] = useState(false);\r\n    const [snackbarMessage, setSnackbarMessage] = useState(null);\r\n\r\n    const handleCloseSnackbar = () => {\r\n        setOpenSnackbar(false);\r\n        setSnackbarMessage(null);\r\n    }\r\n\r\n    useEffect(() => {\r\n        props.topic === null ? clearTopic() : toPropsTopic();\r\n    }, [props.topic])\r\n\r\n    const clearTopic = () => {\r\n        setStateInputs(prevState => {\r\n            return {\r\n                ...prevState,\r\n                email: {\r\n                    ...prevState.email,\r\n                    isValid: false,\r\n                    validationMessage: '',\r\n                    value: '',\r\n                },\r\n            }\r\n        })\r\n    }\r\n\r\n    const toPropsTopic = () => {\r\n        setStateInputs(prevState => {\r\n            return {\r\n                ...prevState,\r\n                email: {\r\n                    ...prevState.email,\r\n                    value: '',\r\n                },\r\n            }\r\n        })\r\n    }\r\n\r\n    const shareTopicHandler = () => {\r\n        const newMemberData = {\r\n            currentMembers: props.topic.membersId,\r\n            email: stateInputs.email.value,\r\n        }\r\n\r\n        props.handleClose();\r\n        startShareTopic(props.topic._id, newMemberData);\r\n\r\n    }\r\n\r\n    const startShareTopic = (topicId, newMemberData) => {\r\n        axios.patch('/topics/single/share/' + topicId, newMemberData)\r\n            .then(response => {\r\n                setOpenSnackbar(true);\r\n                setSnackbarMessage('Topic shared successfully');\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n                setOpenSnackbar(true);\r\n                setSnackbarMessage(err.response.data.message);\r\n            });\r\n    }\r\n\r\n    const onInputHandler = (inputName, event) => {\r\n        const newValue = event.target.value;\r\n\r\n        const [currentValid, newValidationMessage] = validation(\r\n            newValue,\r\n            stateInputs[inputName].validationRules,\r\n            null\r\n        );\r\n\r\n        setStateInputs(prevState => ({\r\n            ...prevState,\r\n            [inputName]: {\r\n                ...prevState[inputName],\r\n                value: newValue,\r\n                isValid: currentValid,\r\n                validationMessage: newValidationMessage\r\n            }\r\n        }));\r\n    }\r\n\r\n    let inputs = [];\r\n    let fieldsIsValid = true;\r\n\r\n    for (let key in stateInputs) {\r\n        inputs.push(\r\n            <TextField\r\n                key={key}\r\n                className={classes.topicInput}\r\n                label={stateInputs[key].config.label}\r\n                name={stateInputs[key].config.name}\r\n                fullWidth\r\n                color=\"primary\"\r\n                value={stateInputs[key].value}\r\n                onInput={onInputHandler.bind(this, key)}\r\n                error={!stateInputs[key].isValid && stateInputs[key].value.length > 0}\r\n                helperText={stateInputs[key].validationMessage}\r\n            />\r\n        );\r\n\r\n        fieldsIsValid = stateInputs[key].isValid && fieldsIsValid;\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Dialog\r\n                open={props.open}\r\n                TransitionComponent={Transition}\r\n                keepMounted\r\n                maxWidth={'sm'}\r\n                onClose={props.handleClose}\r\n                aria-labelledby=\"alert-dialog-slide-title\"\r\n                aria-describedby=\"alert-dialog-slide-description\"\r\n            >\r\n                <div className={classes.dialogColorHat}></div>\r\n                <DialogTitle id=\"alert-dialog-slide-title\" className={classes.topicTitle}>{\"Share Topic\"}</DialogTitle>\r\n                <DialogContent>\r\n                    {inputs}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button className={classes.closeBtn} onClick={props.handleClose}>Cancel</Button>\r\n                    <Button disabled={!fieldsIsValid} className={classes.agreeBtn} onClick={shareTopicHandler}>Share</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n            <Snackbar\r\n                anchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\r\n                open={openSnackbar}\r\n                onClose={handleCloseSnackbar}\r\n                message={snackbarMessage}\r\n            />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default ShareTopic;\r\n","import React from 'react';\r\n\r\nimport CardImage from '../../../../../assets/images/CardImage.png';\r\nimport useStyles from '../../styles';\r\n\r\nconst TopicsNotFound = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div className={classes.topicsNotFoundNote}>\r\n                <p>NOTHING!!!</p>\r\n                <p>Your topics list is empty.</p>\r\n            </div>\r\n            <img src={CardImage} className={classes.topicsNotFoundImg} alt={'card'} />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default TopicsNotFound;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Grid } from '@material-ui/core';\r\n\r\nimport { getTopicsAction } from '../../../../store/actions/topics';\r\nimport useStyles from '../styles';\r\nimport Topic from './Topic/Topic';\r\nimport EditTopicDialog from '../../../UI/Dialog/EditTopic';\r\nimport ShareTopicDialog from '../../../UI/Dialog/ShareTopic';\r\nimport { setCurrentTopicActionCreator } from '../../../../store/actions/topics';\r\nimport {\r\n    saveMessageAction,\r\n    editRecivedMessageActionCreator,\r\n    removeRecivedMessageActionCreator\r\n} from '../../../../store/actions/messages';\r\nimport TopicsNotFound from './TopicsNotFound/TopicsNotFound.js';\r\n\r\nconst TopicsList = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [editTopicDialogOpen, setEditTopicDialogOpen] = useState(false);\r\n    const [shareTopicDialogOpen, setShareTopicDialogOpen] = useState(false);\r\n\r\n    const [selectedTopicData, setSelectedTopicData] = useState(null);\r\n\r\n    const [newUnreadMessage, setNewUnreadMessage] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (!props.wasFetched) {\r\n            props.getTopicsList(props.socket);\r\n\r\n            props.socket.on('recive-message', message => {\r\n                props.reciveMessage(message);\r\n                setNewUnreadMessage(message);\r\n            });\r\n\r\n            props.socket.on('recive-edited-message', message => {\r\n                props.changeMessage(message);\r\n            })\r\n\r\n            props.socket.on('recive-delete-message', message => {\r\n                props.deleteMessage(message);\r\n            })\r\n        }\r\n\r\n        props.setCurrentTopic(null);\r\n    }, [])\r\n\r\n    const edtiDialogOpen = (topic) => {\r\n        setSelectedTopicData(topic);\r\n        setEditTopicDialogOpen(true);\r\n    }\r\n\r\n    const shareDialogOpen = (topic) => {\r\n        setSelectedTopicData(topic);\r\n        setShareTopicDialogOpen(true);\r\n    }\r\n\r\n    const dialogClose = () => {\r\n        setEditTopicDialogOpen(false);\r\n        setShareTopicDialogOpen(false);\r\n        setSelectedTopicData(null);\r\n    }\r\n\r\n    let content = <TopicsNotFound />;\r\n\r\n    if (props.topics.length) {\r\n        content = (\r\n            <Grid container spacing={3} className={classes.gridConatainer}>\r\n                {\r\n                    props.topics.map((item, index) => {\r\n                        return (\r\n                            <Topic\r\n                                key={index}\r\n                                data={item}\r\n                                delay={index}\r\n                                userId={props.userId}\r\n                                newUnreadMessage={newUnreadMessage}\r\n                                edtiDialogOpen={edtiDialogOpen.bind(this, item)}\r\n                                shareDialogOpen={shareDialogOpen.bind(this, item)}\r\n                            />\r\n                        )\r\n                    })\r\n                }\r\n            </Grid>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <EditTopicDialog open={editTopicDialogOpen} handleClose={dialogClose} topic={selectedTopicData} />\r\n            <ShareTopicDialog open={shareTopicDialogOpen} handleClose={dialogClose} topic={selectedTopicData} />\r\n\r\n            <div className={classes.root}>\r\n                {content}\r\n            </div>\r\n        </React.Fragment >\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        socket: state.sckt.socket,\r\n        topics: state.tpc.topics,\r\n        wasFetched: state.tpc.wasFetched,\r\n        userId: state.auth.id,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        getTopicsList: (socket) => { dispatch(getTopicsAction(socket)) },\r\n        reciveMessage: (message) => { dispatch(saveMessageAction(message)) },\r\n        changeMessage: (message) => { dispatch(editRecivedMessageActionCreator(message)) },\r\n        deleteMessage: (message) => { dispatch(removeRecivedMessageActionCreator(message)) },\r\n        setCurrentTopic: (topicId) => { dispatch(setCurrentTopicActionCreator(topicId)) },\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TopicsList);\r\n","import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\n\r\nimport Links from '../FilterType/Links/Links';\r\nimport Photos from '../FilterType/Photos/Photos';\r\nimport Videos from '../FilterType/Videos/Videos';\r\nimport Files from '../FilterType/Files/Files';\r\nimport Notes from '../FilterType/Notes/Notes';\r\nimport TopicContent from '../TopicContent/TopicContent';\r\nimport TopicsList from './TopicsList/TopicsList';\r\n\r\nconst topics = (props) => {\r\n    return (\r\n        <Switch>\r\n            <Route path={props.match.url + '/links'} component={Links} exact />\r\n            <Route path={props.match.url + '/photos'} component={Photos} exact />\r\n            <Route path={props.match.url + '/videos'} component={Videos} exact />\r\n            <Route path={props.match.url + '/files'} component={Files} exact />\r\n            <Route path={props.match.url + '/notes'} component={Notes} exact />\r\n            <Route path={props.match.url + '/:id'} component={TopicContent} exact />\r\n            <Route path={props.match.url} component={TopicsList} />\r\n        </Switch>\r\n    )\r\n}\r\n\r\nexport default topics;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst style = makeStyles(theme => ({\r\n    root: {\r\n        height: '100%',\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        flexDirection: 'column',\r\n    },\r\n    imageBlock: {\r\n        height: '60%',\r\n        textAlign: 'center',\r\n    },\r\n    image: {\r\n        height: '100%',\r\n    },\r\n    title: {\r\n        textAlign: 'center',\r\n        fontSize: '35px',\r\n        fontFamily: '\"Poppins\", sans-serif',\r\n        color: 'rgba(0, 0, 0, 0.26)',\r\n    }\r\n}));\r\n\r\nexport default style;\r\n","import React from 'react';\r\nimport SoonMessage from '../../../assets/images/soon.png';\r\n\r\nimport useStyles from './styles.js';\r\n\r\nconst Draft = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <div className={classes.imageBlock}>\r\n                <img\r\n                    src={SoonMessage}\r\n                    className={classes.image}\r\n                    alt={'coming soon'} />\r\n            </div>\r\n            <div className={classes.title}>COMING SOON</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Draft;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst style = makeStyles(theme => ({\r\n    root: {\r\n        height: '100%',\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        flexDirection: 'column',\r\n    },\r\n    imageBlock: {\r\n        height: '60%',\r\n        textAlign: 'center',\r\n    },\r\n    image: {\r\n        height: '100%',\r\n    },\r\n    title: {\r\n        textAlign: 'center',\r\n        fontSize: '35px',\r\n        fontFamily: '\"Poppins\", sans-serif',\r\n        color: 'rgba(0, 0, 0, 0.26)',\r\n    }\r\n}));\r\n\r\nexport default style;\r\n","import React from 'react';\r\nimport IdeaMessage from '../../../assets/images/idea.png';\r\n\r\nimport useStyles from './styles.js';\r\n\r\nconst NotFound = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <div className={classes.imageBlock}>\r\n                <img\r\n                    src={IdeaMessage}\r\n                    className={classes.image}\r\n                    alt={'select topic'} />\r\n            </div>\r\n            <div className={classes.title}>SAVE YOUR IDEAS</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NotFound;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { CssBaseline } from '@material-ui/core';\r\nimport { Route, withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport DrawerBlock from './DrawerBlock/DrawerBlock';\r\nimport AppBarBlock from './AppBarBlock/AppBarBlock';\r\nimport { finishLoadingActionCreator } from '../../store/actions/authorization';\r\nimport { connectSocketActionCreator } from '../../store/actions/socket';\r\nimport AnimatedSwitch from '../UI/AnimatedSwitch/AnimatedSwitch';\r\nimport useStyles from './styles';\r\n\r\n//pages components\r\nimport Topics from '../DrawerPages/Topics/Topics';\r\nimport Draft from '../DrawerPages/Draft/Draft';\r\nimport NotFound from '../DrawerPages/4O4/NotFound';\r\n\r\nconst AppSceleton = (props) => {\r\n    const [mobileOpen, setMobileOpen] = useState(false);\r\n\r\n    useEffect(() => {\r\n        props.finishLoading();\r\n        props.connectSocket();\r\n        props.history.push('/pulp/topics');\r\n    }, [])\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleDrawerToggle = () => {\r\n        setMobileOpen(!mobileOpen);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <CssBaseline />\r\n            <AppBarBlock handleDrawerToggle={handleDrawerToggle} />\r\n            <DrawerBlock isMobile={mobileOpen} handleDrawerToggle={handleDrawerToggle} />\r\n\r\n            <main className={classes.content}>\r\n                <div className={classes.toolbar} />\r\n                <AnimatedSwitch classProp={'pageComponentWrapper'}>\r\n                    <Route path={props.match.url + '/topics'} component={Topics} />\r\n                    <Route path={props.match.url + '/draft'} component={Draft} />\r\n                    <Route path={props.match.url} component={NotFound} />\r\n                </AnimatedSwitch>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        finishLoading: () => { dispatch(finishLoadingActionCreator()) },\r\n        connectSocket: () => { dispatch(connectSocketActionCreator()) },\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withRouter(AppSceleton));","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.primary.main,\r\n    },\r\n    form: {\r\n        width: '100%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    submit: {\r\n    },\r\n    wrapper: {\r\n        background: 'white',\r\n        boxShadow: theme.shadows[2]\r\n    },\r\n    buttonWrapper: {\r\n        position: 'relative',\r\n        margin: theme.spacing(3, 0, 2),\r\n    },\r\n    redirectLink: {\r\n        color: theme.palette.primary.dark\r\n    },\r\n    errorAlert: {\r\n        marginTop: '10px',\r\n    },\r\n    buttonProgress: {\r\n        color: theme.palette.primary.main,\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n      },\r\n}));\r\n\r\nexport default useStyles;","import React, { useState, useEffect } from 'react';\r\nimport { Grid, Button, Typography, Checkbox, Link, TextField, FormControlLabel, CircularProgress } from '@material-ui/core';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport useStyles from '../../styles';\r\nimport { signInAction } from '../../../../store/actions/authorization';\r\nimport { validation } from '../../../../utility/validation';\r\nimport { ReactLink } from '../../../UI/Link/Link';\r\nimport { finishLoadingActionCreator } from '../../../../store/actions/authorization';\r\n\r\nconst SignInForm = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [rememberMe, setRememberMe] = useState(false);\r\n\r\n    const [stateInputs, setStateInputs] = useState({\r\n        email: {\r\n            config: {\r\n                name: 'email',\r\n                label: 'Email',\r\n            },\r\n            validationRules: {\r\n                isRequred: true,\r\n                isEmail: true,\r\n                shoudBeUniqe: true\r\n            },\r\n            isValid: false,\r\n            validationMessage: '',\r\n            value: '',\r\n        },\r\n        password: {\r\n            config: {\r\n                type: 'password',\r\n                name: 'password',\r\n                label: 'Password',\r\n            },\r\n            validationRules: {\r\n                isRequred: true,\r\n                minLength: true,\r\n            },\r\n            isValid: false,\r\n            validationMessage: '',\r\n            value: '',\r\n        },\r\n    });\r\n\r\n    useEffect(() => {\r\n        props.finishLoading();\r\n    }, [])\r\n\r\n    const signInHandler = (event) => {\r\n        event.preventDefault();\r\n\r\n        const loginData = {\r\n            email: stateInputs.email.value,\r\n            password: stateInputs.password.value\r\n        };\r\n\r\n        try {\r\n            props.onSignIn(loginData, rememberMe);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    const rememberCheckboxHandler = () => {\r\n        setRememberMe(prevState => {\r\n            return !prevState\r\n        })\r\n    }\r\n\r\n    const onInputHandler = (inputName, event) => {\r\n        const newValue = event.target.value;\r\n\r\n        const [currentValid, newValidationMessage] = validation(\r\n            newValue,\r\n            stateInputs[inputName].validationRules,\r\n            stateInputs.email.value\r\n        );\r\n\r\n        setStateInputs(prevState => ({\r\n            ...prevState,\r\n            [inputName]: {\r\n                ...prevState[inputName],\r\n                value: newValue,\r\n                isValid: currentValid,\r\n                validationMessage: newValidationMessage\r\n            }\r\n        }));\r\n    }\r\n\r\n    let inputs = [];\r\n    let fieldsIsValid = true;\r\n\r\n    for (let key in stateInputs) {\r\n        inputs.push(\r\n            <Grid item key={key} xs={12}>\r\n                <TextField\r\n                    label={stateInputs[key].config.label}\r\n                    name={stateInputs[key].config.name}\r\n                    type={stateInputs[key].config.type}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    color=\"primary\"\r\n                    value={stateInputs[key].value}\r\n                    onInput={onInputHandler.bind(this, key)}\r\n                    error={!stateInputs[key].isValid && stateInputs[key].value.length > 0}\r\n                    helperText={stateInputs[key].validationMessage}\r\n                />\r\n            </Grid>\r\n        );\r\n\r\n        fieldsIsValid = stateInputs[key].isValid && fieldsIsValid;\r\n    }\r\n\r\n    if (props.userId) return (\r\n        <Redirect to={'/pulp'} />\r\n    )\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Typography component=\"h1\" variant=\"h5\">Sign in</Typography>\r\n            <form className={classes.form} noValidate>\r\n                <Grid container spacing={2}>\r\n                    {inputs}\r\n                </Grid>\r\n\r\n                {\r\n                    props.errorMessage !== null\r\n                        ? <Alert severity=\"error\" className={classes.errorAlert}>{props.errorMessage}</Alert>\r\n                        : null\r\n                }\r\n\r\n                <FormControlLabel\r\n                    control={<Checkbox value=\"remember\" color=\"primary\" onChange={rememberCheckboxHandler} />}\r\n                    label=\"Remember me\" />\r\n\r\n                <div className={classes.buttonWrapper}>\r\n                    <Button\r\n                        type=\"submit\"\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        disabled={!fieldsIsValid || props.authStart}\r\n                        className={classes.submit}\r\n                        onClick={signInHandler}>\r\n                        <Typography variant=\"subtitle1\">Sign In</Typography>\r\n                    </Button>\r\n\r\n                    {props.authStart && <CircularProgress size={24} className={classes.buttonProgress} />}\r\n                </div>\r\n\r\n                <Grid container>\r\n                    <Grid item xs>\r\n                        <Link href=\"#\" variant=\"body2\" className={classes.redirectLink}>Forgot password?</Link>\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <Link component={ReactLink} to=\"/sign-up\" variant=\"body2\" className={classes.redirectLink}>\r\n                            {\"Don't have an account? Sign Up\"}\r\n                        </Link>\r\n                    </Grid>\r\n                </Grid>\r\n            </form>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        errorMessage: state.auth.errorMessage,\r\n        userId: state.auth.id,\r\n        authStart: state.auth.authStart\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        onSignIn: (loginData, rememberMe) => { dispatch(signInAction(loginData, rememberMe)) },\r\n        finishLoading: () => { dispatch(finishLoadingActionCreator()) }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignInForm);","import React from 'react';\r\nimport { Typography, Link } from '@material-ui/core';\r\n\r\nconst copyright = () => {\r\n    return (\r\n        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n          {'Copyright © '}\r\n          <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n            Your Website\r\n          </Link>{' '}\r\n          {new Date().getFullYear()}\r\n          {'.'}\r\n        </Typography>\r\n      );\r\n}\r\n\r\nexport default copyright;","import React from 'react';\r\nimport { Avatar, CssBaseline, Box, Container } from '@material-ui/core';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\n\r\nimport useStyles from '../styles';\r\nimport Copyright from '../../UI/Copyright/Copyright';\r\n\r\nconst AuthContainer = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Container component=\"main\" maxWidth=\"xs\" className={classes.wrapper}>\r\n            <CssBaseline />\r\n\r\n            <div className={classes.paper}>\r\n                <Avatar className={classes.avatar} pt={2}>\r\n                    <LockOutlinedIcon />\r\n                </Avatar>\r\n                {props.children}\r\n            </div>\r\n\r\n            <Box mt={5} pb={2}>\r\n                <Copyright />\r\n            </Box>\r\n        </Container >\r\n    )\r\n}\r\n\r\nexport default AuthContainer;","import React from 'react';\r\n\r\nimport SignInForm from './SignInForm/SignInForm';\r\nimport AuthContainer from '../AuthContainer/AuthContainer';\r\n\r\nconst SignIn = () => {\r\n  return (\r\n    <AuthContainer>\r\n      <SignInForm />\r\n    </AuthContainer>\r\n  );\r\n}\r\n\r\nexport default SignIn;","import React, { useState, useEffect } from 'react';\r\nimport axios from '../../../../utility/axios-instance';\r\nimport { Grid, Button, Typography, Link, TextField, CircularProgress } from '@material-ui/core';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport useStyles from '../../styles';\r\nimport { signUpAction } from '../../../../store/actions/authorization';\r\nimport { validation } from '../../../../utility/validation';\r\nimport { ReactLink } from '../../../UI/Link/Link';\r\nimport { finishLoadingActionCreator } from '../../../../store/actions/authorization';\r\n\r\nconst SignUpForm = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [emailIsCorrect, setEmailIsCorrect] = useState(false);\r\n    const [emailTimeoutId, setEmailTimeoutId] = useState(null);\r\n\r\n    const [stateInputs, setStateInputs] = useState({\r\n        email: {\r\n            config: {\r\n                name: 'email',\r\n                label: 'Email',\r\n            },\r\n            validationRules: {\r\n                isRequred: true,\r\n                isEmail: true,\r\n                shoudBeUniqe: true\r\n            },\r\n            isValid: false,\r\n            validationMessage: '',\r\n            value: '',\r\n        },\r\n        emailConfirm: {\r\n            config: {\r\n                name: 'email1',\r\n                label: 'Confirm Email',\r\n            },\r\n            validationRules: {\r\n                isRequred: true,\r\n                shoudBeEqual: true,\r\n            },\r\n            isValid: false,\r\n            validationMessage: '',\r\n            value: '',\r\n        },\r\n        password: {\r\n            config: {\r\n                type: 'password',\r\n                name: 'password',\r\n                label: 'Password',\r\n            },\r\n            validationRules: {\r\n                isRequred: true,\r\n                minLength: true,\r\n            },\r\n            isValid: false,\r\n            validationMessage: '',\r\n            value: '',\r\n        },\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (!emailIsCorrect) return;\r\n\r\n        clearTimeout(emailTimeoutId);\r\n\r\n        const timeoutId = setTimeout(() => {\r\n            const data = {\r\n                email: stateInputs.email.value\r\n            }\r\n\r\n            axios.post('/user/email-exists', data)\r\n                .then(response => {\r\n\r\n                    if (response.data) {\r\n                        setStateInputs(prevState => ({\r\n                            ...prevState,\r\n                            email: {\r\n                                ...prevState.email,\r\n                                isValid: false,\r\n                                validationMessage: 'Email already exist',\r\n                            }\r\n                        }))\r\n\r\n                    }\r\n                })\r\n                .catch(err => console.log(err))\r\n\r\n        }, 800);\r\n        setEmailTimeoutId(timeoutId);\r\n    }, [stateInputs.email.value]);\r\n\r\n    useEffect(() => {\r\n        props.finishLoading();\r\n    }, [])\r\n\r\n    const signUpHandler = (event) => {\r\n        event.preventDefault();\r\n\r\n        const newUser = {\r\n            email: stateInputs.email.value,\r\n            password: stateInputs.password.value\r\n        };\r\n\r\n        try {\r\n            props.onSignUp(newUser);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    const onInputHandler = (inputName, event) => {\r\n        const newValue = event.target.value;\r\n\r\n        const [currentValid, newValidationMessage] = validation(\r\n            newValue,\r\n            stateInputs[inputName].validationRules,\r\n            stateInputs.email.value\r\n        );\r\n\r\n        checkEmailIsCorrect(inputName, currentValid);\r\n\r\n        setStateInputs(prevState => ({\r\n            ...prevState,\r\n            [inputName]: {\r\n                ...prevState[inputName],\r\n                value: newValue,\r\n                isValid: currentValid,\r\n                validationMessage: newValidationMessage\r\n            }\r\n        }));\r\n    }\r\n\r\n    const checkEmailIsCorrect = (imputName, isValid) => {\r\n        if (imputName === 'email') setEmailIsCorrect(isValid);\r\n    }\r\n\r\n    let inputs = [];\r\n    let fieldsIsValid = true;\r\n\r\n    for (let key in stateInputs) {\r\n        inputs.push(\r\n            <Grid item key={key} xs={12}>\r\n                <TextField\r\n                    label={stateInputs[key].config.label}\r\n                    name={stateInputs[key].config.name}\r\n                    type={stateInputs[key].config.type}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    color=\"primary\"\r\n                    value={stateInputs[key].value}\r\n                    onInput={onInputHandler.bind(this, key)}\r\n                    error={!stateInputs[key].isValid && stateInputs[key].value.length > 0}\r\n                    helperText={stateInputs[key].validationMessage}\r\n                />\r\n            </Grid>\r\n        );\r\n\r\n        fieldsIsValid = stateInputs[key].isValid && fieldsIsValid;\r\n    }\r\n\r\n    if (props.userId) return (\r\n        <Redirect to={'/pulp'} />\r\n    )\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Typography component=\"h1\" variant=\"h5\">Sign up</Typography>\r\n            <form className={classes.form} noValidate>\r\n                <Grid container spacing={2}>\r\n                    {inputs}\r\n                </Grid>\r\n\r\n                {\r\n                    props.errorMessage !== null\r\n                        ? <Alert severity=\"error\" className={classes.errorAlert}>{props.errorMessage}</Alert>\r\n                        : null\r\n                }\r\n\r\n                <div className={classes.buttonWrapper}>\r\n                    <Button\r\n                        type=\"submit\"\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        disabled={!fieldsIsValid || props.authStart}\r\n                        className={classes.submit}\r\n                        onClick={signUpHandler}\r\n                    >\r\n                        <Typography variant=\"subtitle1\">Sign Up</Typography>\r\n                    </Button>\r\n\r\n                    {props.authStart && <CircularProgress size={24} className={classes.buttonProgress} />}\r\n                </div>\r\n\r\n                <Grid container justify=\"flex-end\">\r\n                    <Grid item>\r\n                        <Link component={ReactLink} to=\"/sign-in\" variant=\"body2\" className={classes.redirectLink}>\r\n                            {'Already have an account? Sign in'}\r\n                        </Link>\r\n                    </Grid>\r\n                </Grid>\r\n            </form>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        errorMessage: state.auth.errorMessage,\r\n        userId: state.auth.id,\r\n        authStart: state.auth.authStart\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        onSignUp: (newUser) => dispatch(signUpAction(newUser)),\r\n        finishLoading: () => { dispatch(finishLoadingActionCreator()) }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignUpForm);","import React from 'react';\r\n\r\nimport SignUpForm from './SignUpForm/SignUpForm';\r\nimport AuthContainer from '../AuthContainer/AuthContainer';\r\n\r\nconst SignUp = () => {\r\n  return (\r\n    <AuthContainer>\r\n      <SignUpForm />\r\n    </AuthContainer>\r\n  );\r\n}\r\n\r\nexport default SignUp;","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    backdrop: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n        background: '#FFFFFF',\r\n      },\r\n}));\r\n\r\nexport default useStyles;","import React from 'react';\r\nimport { Backdrop, CircularProgress } from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\n\r\nimport useStyles from './styles';\r\n\r\nconst Loading = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Backdrop className={classes.backdrop} open={props.isLoading}>\r\n            <CircularProgress color=\"primary\" />\r\n        </Backdrop>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isLoading: state.auth.loading,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Loading);","import React, { useEffect } from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport AppSceleton from '../AppSkeleton/AppSceleton';\r\nimport SignIn from '../Authorization/SignIn/SignIn';\r\nimport SignUp from '../Authorization/SignUp/SignUp';\r\nimport Loading from '../UI/Loading/Loading';\r\nimport { signInLocalAction, refreshTokenAction } from '../../store/actions/authorization';\r\nimport AnimatedSwitch from '../UI/AnimatedSwitch/AnimatedSwitch';\r\n\r\nconst Layout = (props) => {\r\n  useEffect(() => {\r\n    if (localStorage.getItem('token')) {\r\n      const expiresIn = localStorage.getItem('expirationTime') - 30;\r\n\r\n      if (+Math.floor((new Date().getTime() / 1000)) >= expiresIn) {\r\n        const token = {\r\n          token: localStorage.getItem('token')\r\n        }\r\n\r\n        props.refreshTokenAndSignIn(token);\r\n      } else {\r\n        props.signInByLocalData();\r\n      }\r\n    } else console.log('here');\r\n  }, [])\r\n\r\n\r\n  if (props.userId) {\r\n    return (\r\n      <React.Fragment>\r\n        <Loading />\r\n        <AnimatedSwitch>\r\n          <Route path=\"/pulp\" component={AppSceleton} />\r\n          <Route path=\"/\" render={() => <Redirect to=\"/pulp\" />} />\r\n        </AnimatedSwitch>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Loading />\r\n      <AnimatedSwitch>\r\n        <Route path=\"/sign-in\" component={SignIn} exact />\r\n        <Route path=\"/sign-up\" component={SignUp} exact />\r\n        <Route path=\"/\" render={() => <Redirect to=\"/sign-in\" />} />\r\n      </AnimatedSwitch>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    userId: state.auth.id\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    signInByLocalData: () => { dispatch(signInLocalAction()) },\r\n    refreshTokenAndSignIn: (token) => { dispatch(refreshTokenAction(token)) }\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Layout);","import React from 'react';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport Layout from './component/Layout/Layout';\nimport './App.module.css';\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <div className=\"App\">\n        <Layout />\n      </div>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import jwt from 'jsonwebtoken';\r\n\r\nimport * as actionTypes from '../actions/actionTypes';\r\n\r\nconst initialState = {\r\n    id: null,\r\n    email: null,\r\n    token: null,\r\n    expirationTime: null,\r\n    errorMessage: null,\r\n    authStart: false,\r\n    loading: true,\r\n    refreshTimerId: null\r\n}\r\n\r\nconst saveToLocalStorage = (data) => {\r\n    localStorage.setItem('id', data.id);\r\n    localStorage.setItem('email', data.email);\r\n    localStorage.setItem('token', data.token);\r\n    localStorage.setItem('expirationTime', data.expirationTime);\r\n}\r\n\r\nconst clearLocalStorage = () => {\r\n    localStorage.clear();\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.AUTH_START: {\r\n            return {\r\n                errorMessage: null,\r\n                authStart: true,\r\n                loading: false\r\n            }\r\n        }\r\n\r\n        case actionTypes.SIGN_IN: {\r\n            const decoded = jwt.decode(action.token.data);\r\n\r\n            const userData = {\r\n                id: decoded.id,\r\n                email: decoded.email,\r\n                token: action.token.data,\r\n                expirationTime: decoded.exp\r\n            }\r\n\r\n            if (action.remember) saveToLocalStorage(userData);\r\n\r\n            return {\r\n                ...userData,\r\n                loading: true\r\n            };\r\n        }\r\n\r\n        case actionTypes.SIGN_UP: {\r\n            const decoded = jwt.decode(action.token.data);\r\n\r\n            const userData = {\r\n                id: decoded.id,\r\n                email: decoded.email,\r\n                token: action.token.data,\r\n                expirationTime: decoded.exp\r\n            }\r\n\r\n            return {\r\n                ...userData,\r\n                loading: true\r\n            };\r\n        }\r\n\r\n        case actionTypes.AUTH_ERROR: {\r\n            if (action.err.response === undefined)\r\n                return {\r\n                    errorMessage: 'Service is unavailable. Please, try later...',\r\n                    authStart: false,\r\n                    loading: false\r\n                }\r\n            return {\r\n                errorMessage: action.err.response.data.message,\r\n                authStart: false,\r\n                loading: false\r\n            }\r\n        }\r\n\r\n        case actionTypes.LOAD_FINISH: {\r\n            return {\r\n                ...state,\r\n                loading: false\r\n            }\r\n        }\r\n\r\n        case actionTypes.REFRESH_TOKEN: {\r\n            const decoded = jwt.decode(action.token.data);\r\n\r\n            const userData = {\r\n                id: decoded.id,\r\n                email: decoded.email,\r\n                token: action.token.data,\r\n                expirationTime: decoded.exp\r\n            }\r\n\r\n            saveToLocalStorage(userData);\r\n\r\n            return {\r\n                ...userData,\r\n                loading: false\r\n            };\r\n        }\r\n\r\n        case actionTypes.SIGN_IN_LOCALY: {\r\n            const userData = {\r\n                id: localStorage.getItem('id'),\r\n                email: localStorage.getItem('email'),\r\n                token: localStorage.getItem('token'),\r\n                expirationTime: localStorage.getItem('expirationTime')\r\n            }\r\n\r\n            return {\r\n                ...userData,\r\n                loading: false\r\n            };\r\n        }\r\n\r\n        case actionTypes.RESET_TIMEOUT_ID: {\r\n            return {\r\n                ...state,\r\n                refreshTimerId: action.id\r\n            };\r\n        }\r\n\r\n        case actionTypes.LOGOUT: {\r\n            clearLocalStorage();\r\n\r\n            return { ...initialState }\r\n        }\r\n\r\n        default: return state;\r\n    }\r\n}\r\n\r\nexport default reducer;\r\n","import * as actionTypes from '../actions/actionTypes';\r\n\r\nconst initialState = {\r\n    topics: [],\r\n    openedTopicId: null,\r\n    loading: false,\r\n    error: false,\r\n    wasFetched: false,\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.START_FETCHING: {\r\n            return {\r\n                ...state,\r\n                loading: true,\r\n                error: false\r\n            }\r\n        }\r\n\r\n        case actionTypes.GET_TOPICS: {\r\n            return {\r\n                ...state\r\n            }\r\n        }\r\n\r\n        case actionTypes.TOPICS_ERROR: {\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                error: true\r\n            }\r\n        }\r\n\r\n        case actionTypes.FINISH_FETCHING: {\r\n            const topics = action.topics.map(item => {\r\n                const humanDate = new Date(item.date * 1000).toLocaleDateString();\r\n                item.date = humanDate;\r\n\r\n                action.socket.emit('join-to-topic', item._id);  //subscribe user\r\n                return item;\r\n            });\r\n\r\n            return {\r\n                loading: false,\r\n                error: false,\r\n                topics: [...topics],\r\n                wasFetched: true,\r\n            }\r\n        }\r\n\r\n        case actionTypes.ADD_TOPIC: {\r\n            const humanDate = new Date(action.topic.date * 1000).toLocaleDateString();\r\n\r\n            action.socket.emit('join-to-topic', action.topic._id);\r\n\r\n            return {\r\n                ...state,\r\n                topics: [\r\n                    ...state.topics,\r\n                    {\r\n                        ...action.topic,\r\n                        date: humanDate,\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n\r\n        case actionTypes.EDIT_TOPIC: {\r\n            const updateTopic = state.topics.filter(item => item._id === action.topic._id);\r\n            const topics = state.topics.filter(item => item._id !== action.topic._id);\r\n\r\n            return {\r\n                ...state,\r\n                topics: [\r\n                    {\r\n                        ...updateTopic[0],\r\n                        ...action.topic\r\n                    },\r\n                    ...topics,\r\n                ]\r\n            }\r\n        }\r\n\r\n        case actionTypes.SET_CURRENT_TOPIC: {\r\n            return {\r\n                ...state,\r\n                openedTopicId: action.topicId,\r\n            }\r\n        }\r\n\r\n        case actionTypes.DELETE_TOPIC: {\r\n            action.socket.emit('leave-the-topic', action.topicId);\r\n\r\n            return {\r\n                ...state,\r\n                topics: state.topics.filter(item => item._id !== action.topicId),\r\n            }\r\n        }\r\n\r\n        case actionTypes.LOGOUT_TOPICS: {\r\n            return { ...initialState }\r\n        }\r\n\r\n        default: return state;\r\n    }\r\n}\r\n\r\nexport default reducer;\r\n","import io from 'socket.io-client';\r\nimport * as actionTypes from '../actions/actionTypes';\r\n\r\nconst initialState = {\r\n    socket: null,\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.CONNECT_SOCKET: {\r\n            if (state.socket !== null) break;\r\n            const socket = io.connect('https://pill-plate.herokuapp.com');\r\n\r\n            return {\r\n                socket: socket,\r\n            }\r\n        }\r\n\r\n        case actionTypes.DISCONNECT_SOCKET: {\r\n            state.socket.close();\r\n\r\n            return { ...initialState }\r\n        }\r\n\r\n        default: return state;\r\n    }\r\n}\r\n\r\nexport default reducer;\r\n","import * as actionTypes from '../actions/actionTypes';\r\n\r\nconst initialState = {\r\n    savingMessages: false,\r\n    recivingMessage: false,\r\n    topics: {},\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.START_MESSAGES_SAVING: {\r\n            return {\r\n                ...state,\r\n                savingMessages: true,\r\n            }\r\n        }\r\n\r\n        case actionTypes.FINISH_MESSAGES_SAVING: {\r\n            return {\r\n                ...state,\r\n                savingMessages: false,\r\n            }\r\n        }\r\n\r\n        case actionTypes.START_MESSAGES_RECIVE: {\r\n            return {\r\n                ...state,\r\n                recivingMessage: true,\r\n            }\r\n        }\r\n\r\n        case actionTypes.FINISH_MESSAGES_RECIVE: {\r\n            return {\r\n                ...state,\r\n                recivingMessage: false,\r\n            }\r\n        }\r\n\r\n        case actionTypes.MESSAGE_SAVE: {\r\n            let topicMessages = [\r\n                { ...action.message }\r\n            ]\r\n\r\n            if (state.topics[action.message.topicId] && state.topics[action.message.topicId].messages)\r\n                topicMessages = [\r\n                    ...state.topics[action.message.topicId].messages,\r\n                    {\r\n                        ...action.message\r\n                    }\r\n                ]\r\n\r\n            return {\r\n                ...state,\r\n                topics: {\r\n                    ...state.topics,\r\n                    [action.message.topicId]: {\r\n                        ...state.topics[action.message.topicId],\r\n                        messages: [\r\n                            ...topicMessages,\r\n                        ]\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        case actionTypes.FETCH_MESSAGES: {\r\n            if (action.messages.length === 0) {\r\n                return state;\r\n            }\r\n\r\n            let topicMessages = [\r\n                ...action.messages\r\n            ]\r\n\r\n            if (state.topics[action.topicId] && state.topics[action.topicId].messages) {\r\n                topicMessages = [\r\n                    ...action.messages,\r\n                    ...state.topics[action.topicId].messages,\r\n                ]\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                topics: {\r\n                    ...state.topics,\r\n                    [action.topicId]: {\r\n                        ...state.topics[action.topicId],\r\n                        messages: [\r\n                            ...topicMessages,\r\n                        ],\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        case actionTypes.EDIT_MESSAGE: {\r\n            const topicId = action.message.topicId;\r\n\r\n            const topicMessages = state.topics[topicId].messages.map(message => {\r\n                if (message._id === action.message._id) {\r\n                    message.wasReadedBy = [...action.message.wasReadedBy];\r\n                    message.text = action.message.text;\r\n                }\r\n\r\n                return message;\r\n            })\r\n\r\n            return {\r\n                ...state,\r\n                topics: {\r\n                    ...state.topics,\r\n                    [topicId]: {\r\n                        ...state.topics[topicId],\r\n                        messages: [\r\n                            ...topicMessages,\r\n                        ],\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        case actionTypes.REMOVE_MESSAGE: {\r\n            const topicId = action.message.topicId;\r\n\r\n            return {\r\n                ...state,\r\n                topics: {\r\n                    ...state.topics,\r\n                    [topicId]: {\r\n                        ...state.topics[topicId],\r\n                        messages: state.topics[topicId].messages.filter(message => message._id !== action.message._id),\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        case actionTypes.LOGOUT_MESSAGES: {\r\n            return { ...initialState }\r\n        }\r\n\r\n        default: return state;\r\n    }\r\n}\r\n\r\nexport default reducer;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport deepOrange from '@material-ui/core/colors/deepOrange';\nimport { createMuiTheme, MuiThemeProvider } from '@material-ui/core/styles';\nimport { createStore, applyMiddleware, combineReducers, compose } from 'redux';\nimport { Provider } from 'react-redux';\nimport thunk from 'redux-thunk';\n\nimport authReducer from './store/reducers/authorization';\nimport topicReducer from './store/reducers/topics';\nimport socketReducer from './store/reducers/socket';\nimport messageReducer from './store/reducers/messages';\n\nconst reducers = combineReducers({\n    auth: authReducer,\n    tpc: topicReducer,\n    sckt: socketReducer,\n    msg: messageReducer,\n})\n\nconst theme = createMuiTheme({\n    palette: {\n        primary: {\n            light: '#ffec92',\n            main: '#FFE66D',\n            dark: '#F5B82E'\n        },\n        secondary: {\n            light: '#ffd473',\n            main: deepOrange[400]\n        },\n    }\n});\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunk)));\n\nReactDOM.render(\n    <MuiThemeProvider theme={theme}>\n        <Provider store={store}>\n            <App />\n        </Provider>\n    </MuiThemeProvider>,\n    document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}