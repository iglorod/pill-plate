(this.webpackJsonppillplate=this.webpackJsonppillplate||[]).push([[0],{124:function(e,t,a){e.exports={titleBlock:"DrawerLogo_titleBlock__3NOrA",logoTitle:"DrawerLogo_logoTitle__dlb8j",logoSubTitle:"DrawerLogo_logoSubTitle__3T0xB"}},163:function(e,t,a){e.exports={pageWrapper:"AnimatedSwitch_pageWrapper__3ISJ1",pageComponentWrapper:"AnimatedSwitch_pageComponentWrapper__1HjYM"}},259:function(e,t){e.exports="data:image/png;base64,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"},282:function(e,t,a){e.exports=a.p+"static/media/soon.4608d02c.png"},283:function(e,t,a){e.exports=a.p+"static/media/idea.9f6804c4.png"},305:function(e,t,a){e.exports=a(524)},310:function(e,t,a){},355:function(e,t){},399:function(e,t,a){},400:function(e,t,a){e.exports={App:"App_App__2f1W5"}},402:function(e,t){},404:function(e,t){},441:function(e,t){},442:function(e,t){},521:function(e,t){},524:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),i=a.n(o),c=(a(310),a(38)),l=a(36),s=a(11),u=a(7),m=a(598),d=a(606),p=a(572),g=a(6),f=a(258),h=Object(f.a)((function(e){var t;return{root:{display:"flex"},drawer:Object(g.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:(t={},Object(g.a)(t,e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}),Object(g.a)(t,"boxShadow",e.shadows[2]),t),menuButton:Object(g.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),appBarButton:{borderRadius:"0 !important",padding:"0px !important",margin:"0 5px !important"},appBarLink:{display:"inherit",padding:"8px"},toolbar:e.mixins.toolbar,drawerPaper:{width:240,background:e.palette.primary.main,border:"none",boxShadow:e.shadows[3]},content:{flexGrow:1},activeLink:{background:"white !important",boxShadow:e.shadows[3],fontWeight:"600",transition:".2s all !important","&:hover":{background:"white !important",boxShadow:e.shadows[5]}},nestedLink:{paddingLeft:e.spacing(4)+"px !important"},nestedLinkActive:{background:"rgba(0, 0, 0, 0.08) !important"}}})),b=h,E=a(563),v=a(570),O=a(571),k=a(265),y=a.n(k),S=a(269),w=a.n(S),j=a(266),x=a.n(j),T=a(268),I=a.n(T),A=a(263),N=a.n(A),C=a(267),M=a.n(C),F=a(270),B=a.n(F),R=a(264),L=a.n(R),D=a(569),P=a(527),V=a(262),H=a.n(V),z=a(259),q=a.n(z),U=a(124),W=a.n(U),Y=function(){var e=b();return r.a.createElement("div",{className:e.toolbar},r.a.createElement("img",{src:q.a,alt:"ICON",width:"100%"}),r.a.createElement("div",{className:W.a.titleBlock},r.a.createElement("p",{className:W.a.logoTitle},"PILLPLATE"),r.a.createElement("p",{className:W.a.logoSubTitle},"SORT YOUR GARBAGE")))},G=a(525),Q=a(560),X=a(561),_=function(e){var t=b(),a=r.a.forwardRef((function(a,n){return r.a.createElement(c.c,Object.assign({ref:n,to:e.to},a,{activeClassName:e.isNested?t.nestedLinkActive:t.activeLink}))}));return r.a.createElement(G.a,{button:!0,className:e.isNested?t.nestedLink:null,to:e.to,component:a,onClick:e.collapseToggle},r.a.createElement(Q.a,null,e.icon),r.a.createElement(X.a,{primary:e.text}),e.addTopicBtn)},K=a(8),J=a(526),Z=a(602),$=a(564),ee=a(565),te=a(566),ae=a(567),ne=a(568),re=a(607),oe=Object(f.a)((function(e){return{topicTitle:{textAlign:"center",fontFamily:"Lato, sans-serif",paddingBottom:0},dialogColorHat:{background:e.palette.primary.main,height:"15px"},agreeBtn:{color:e.palette.primary.dark},closeBtn:{color:e.palette.secondary.main},topicInput:{marginTop:e.spacing(2)}}})),ie=oe,ce=function(e,t,a){return e||0!==a.length?a:t},le=function(e,t,a){var n=!0,r="";if(t.isRequred&&n&&(n=e.length>0&&n,r=ce(n,"Please, fill this field",r)),t.isEmail&&n){n=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)&&n,r=ce(n,"Email is incorrect",r)}return t.minLength&&n&&(n=e.length>3&&n,r=ce(n,"Min password length is 4 symbols",r)),t.maxLength&&n&&(n=e.length<t.maxLength&&n,r=ce(n,"Max length is "+t.maxLength+" symbols",r)),t.shoudBeEqual&&n&&(r=ce(n=e===a&&n,"Please, enter the valid email address",r)),[n,r]},se=a(261),ue=a.n(se),me=ue.a.create({baseURL:"https://pill-plate.herokuapp.com"}),de=me,pe=function(e){return{type:"SET_CURRENT_TOPIC",topicId:e}},ge=r.a.forwardRef((function(e,t){return r.a.createElement(J.a,Object.assign({direction:"up",ref:t},e))})),fe=Object(s.b)((function(e){return{userId:e.auth.id,socket:e.sckt.socket}}),(function(e){return{startCreatingTopic:function(t,a,n){e(function(e,t,a){return function(n,r){de.post("/topics",e).then((function(e){n(function(e,t){return{type:"ADD_TOPIC",topic:e,socket:t}}(e.data,t)),a()})).catch((function(e){return n({type:"TOPICS_ERROR"})}))}}(t,a,n))}}}))((function(e){var t=ie(),a=Object(n.useState)({title:{config:{name:"title",label:"Title"},validationRules:{isRequred:!0,maxLength:20},isValid:!1,validationMessage:"",value:""},notes:{config:{name:"notes",label:"Notes"},validationRules:{maxLength:100},isValid:!0,validationMessage:"",value:""}}),o=Object(u.a)(a,2),i=o[0],c=o[1],l=Object(n.useState)(!1),s=Object(u.a)(l,2),m=s[0],d=s[1],p=function(){d(!0)},f=function(){c((function(e){return Object(K.a)({},e,{title:Object(K.a)({},e.title,{isValid:!1,validationMessage:"",value:""}),notes:Object(K.a)({},e.notes,{isValid:!0,validationMessage:"",value:""})})}))},h=function(e,t){var a=t.target.value,n=le(a,i[e].validationRules,null),r=Object(u.a)(n,2),o=r[0],l=r[1];c((function(t){return Object(K.a)({},t,Object(g.a)({},e,Object(K.a)({},t[e],{value:a,isValid:o,validationMessage:l})))}))},b=[],E=!0;for(var v in i)b.push(r.a.createElement(Z.a,{key:v,className:t.topicInput,label:i[v].config.label,name:i[v].config.name,fullWidth:!0,color:"primary",value:i[v].value,onInput:h.bind(void 0,v),error:!i[v].isValid&&i[v].value.length>0,helperText:i[v].validationMessage})),E=i[v].isValid&&E;return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{open:e.open,TransitionComponent:ge,keepMounted:!0,maxWidth:"xs",onClose:function(){f(),e.handleClose()},"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement("div",{className:t.dialogColorHat}),r.a.createElement(ee.a,{id:"alert-dialog-slide-title",className:t.topicTitle},"Create Topic"),r.a.createElement(te.a,null,b),r.a.createElement(ae.a,null,r.a.createElement(ne.a,{className:t.closeBtn,onClick:e.handleClose},"Disagree"),r.a.createElement(ne.a,{disabled:!E,className:t.agreeBtn,onClick:function(){var t={creatorId:e.userId,name:i.title.value,note:i.notes.value};e.handleClose(),f(),e.startCreatingTopic(t,e.socket,p)}},"Agree"))),r.a.createElement(re.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:m,onClose:function(){d(!1)},message:"Topic was created"}))})),he=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),c=Object(u.a)(i,2),l=c[0],s=c[1],m=r.a.createElement(D.a,{onClick:function(){s(!0)}},r.a.createElement(P.a,null,r.a.createElement(H.a,null)));return r.a.createElement(r.a.Fragment,null,r.a.createElement(fe,{open:l,handleClose:function(){s(!1)}}),r.a.createElement("div",null,r.a.createElement(Y,null),r.a.createElement(E.a,null,r.a.createElement(_,{text:"Topics",to:"/pulp/topics",icon:a?r.a.createElement(N.a,null):r.a.createElement(L.a,null),addTopicBtn:m,collapseToggle:function(){o((function(e){return!e}))}}),r.a.createElement(v.a,{in:a,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0},r.a.createElement(_,{text:"Links",to:"/pulp/topics/links",icon:r.a.createElement(y.a,null),isNested:!0}),r.a.createElement(_,{text:"Photos",to:"/pulp/topics/photos",icon:r.a.createElement(x.a,null),isNested:!0}),r.a.createElement(_,{text:"Videos",to:"/pulp/topics/videos",icon:r.a.createElement(M.a,null),isNested:!0}),r.a.createElement(_,{text:"Files",to:"/pulp/topics/files",icon:r.a.createElement(I.a,null),isNested:!0}),r.a.createElement(_,{text:"Notes",to:"/pulp/topics/notes",icon:r.a.createElement(w.a,null),isNested:!0})))),r.a.createElement(O.a,null),r.a.createElement(E.a,null,r.a.createElement(_,{text:"Draft",to:"/pulp/draft",icon:r.a.createElement(B.a,null),collapseToggle:function(){o(!1)}}))))},be=function(e){var t=b(),a=e.container;return r.a.createElement("nav",{className:t.drawer,"aria-label":"mailbox folders"},r.a.createElement(d.a,{smUp:!0,implementation:"css"},r.a.createElement(p.a,{container:a,variant:"temporary",open:e.isMobile,onClose:e.handleDrawerToggle,classes:{paper:t.drawerPaper},ModalProps:{keepMounted:!0}},r.a.createElement(he,null))),r.a.createElement(d.a,{xsDown:!0,implementation:"css"},r.a.createElement(p.a,{classes:{paper:t.drawerPaper},variant:"permanent",open:!0},r.a.createElement(he,null))))},Ee=a(574),ve=a(575),Oe=a(576),ke=a(577),ye=a(573),Se=a(61),we=r.a.forwardRef((function(e,t){return r.a.createElement(c.b,Object.assign({ref:t},e))})),je=function(e){var t=b();return r.a.createElement(P.a,{edge:"start",onClick:e.logout,className:t.appBarButton},r.a.createElement(ye.a,{component:we,to:e.link,color:"inherit",underline:"none",className:t.appBarLink},e.icon,r.a.createElement(Se.a,{variant:"body1",noWrap:!0},e.text)))},xe=a(271),Te=a.n(xe),Ie=function(e){var t=b();return r.a.createElement(P.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:e.handleDrawerToggle,className:t.menuButton},r.a.createElement(Te.a,null))},Ae=function(e){return{type:"AUTH_ERROR",err:e}},Ne=function(){return function(e){de.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),e({type:"SIGN_IN_LOCALY"}),e(Ce())}},Ce=function(){return function(e,t){clearTimeout(t().auth.refreshTimerId);var a=1e3*(t().auth.expirationTime-Math.floor((new Date).getTime()/1e3))-3e4;a<0&&(a=15e3);var n=setTimeout((function(){var a={token:t().auth.token};try{e(Me(a))}catch(n){console.log(n)}}),a);e(function(e){return{type:"RESET_TIMEOUT_ID",id:e}}(n))}},Me=function(e){return function(t,a){de.post("/user/refresh-token",e).then((function(e){de.defaults.headers.common.Authorization="Bearer "+e.data,t(function(e){return{type:"REFRESH_TOKEN",token:e}}(e)),a().auth.id?t(Ce()):t(Ne())})).catch((function(e){t(Ae(e)),t({type:"LOGOUT"})}))}},Fe=function(e){var t=e.split(".");return t[t.length-1]},Be=function(e){return{type:"MESSAGE_ERROR",err:e}},Re=function(e){return{type:"EDIT_MESSAGE",message:e}},Le=function(e,t,a){return function(n,r){n({type:"START_MESSAGES_SAVING"});var o=new FormData,i=e.file.name,c="file";!function(e){switch(Fe(e).toLowerCase()){case"jpg":case"jpeg":case"gif":case"bmp":case"png":return!0;default:return!1}}(i)?!function(e){switch(Fe(e).toLowerCase()){case"m4v":case"avi":case"mpg":case"mp4":return!0;default:return!1}}(i)?(o.append("file",e.file,e.file.name),o.append("type","file")):(o.append("video",e.file,e.file.name),o.append("type","video"),c="video"):(o.append("image",e.file,e.file.name),o.append("type","image"),c="image"),o.append("creatorId",e.sender),o.append("date",Math.floor((new Date).getTime()/1e3));var l=r().tpc.openedTopicId;de.post("/topic/messages/"+c+"/"+l,o,{onUploadProgress:function(e){var t=Math.round(e.loaded/e.total*100);a(t)}}).then((function(e){n({type:"FINISH_MESSAGES_SAVING"}),t.emit("save-message",l,e.data)})).catch((function(e){n(Be(e))}))}},De=Object(s.b)((function(e){return{userId:e.auth.id}}),(function(e){return{logout:function(){e({type:"LOGOUT"})},clearSocket:function(){e({type:"DISCONNECT_SOCKET"})},clearMessages:function(){e({type:"LOGOUT_MESSAGES"})},clearTopics:function(){e({type:"LOGOUT_TOPICS"})}}}))((function(e){var t=b();return r.a.createElement(Ee.a,{position:"fixed",className:t.appBar,color:"inherit"},r.a.createElement(ve.a,null,r.a.createElement(Ie,{handleDrawerToggle:e.handleDrawerToggle}),r.a.createElement("div",{style:{marginLeft:"auto"}},r.a.createElement(je,{text:"Contact us",icon:r.a.createElement(Oe.a,null),link:"/pulp/contact-us"}),r.a.createElement(je,{text:"Logout",icon:r.a.createElement(ke.a,null),link:"/sign-in",logout:function(){e.logout(),e.clearSocket(),e.clearMessages(),e.clearTopics()}}))))})),Pe=a(162),Ve=a(163),He=a.n(Ve),ze=function(e){var t=function(e){return Object(Pe.b)(e,{stiffness:100,damping:20})},a={atEnter:{opacity:0,scale:.8},atLeave:{opacity:t(0),scale:t(.8)},atActive:{opacity:t(1),scale:t(1)}},n=He.a.pageWrapper;return e.classProp&&(n=He.a[e.classProp]),r.a.createElement(Pe.a,{atEnter:a.atEnter,atLeave:a.atLeave,atActive:a.atActive,mapStyles:function(e){return{opacity:e.opacity,transform:"scale(".concat(e.scale,")")}},className:n},e.children)},qe=a(12),Ue=a(80),We=a.n(Ue),Ye=Object(f.a)((function(e){var t;return{root:(t={height:"100%",width:"100%",paddingTop:"0",margin:"auto",overflow:"auto",background:"#FFFFFF",boxShadow:e.shadows[3]},Object(g.a)(t,e.breakpoints.down("sm"),{padding:e.spacing(.5)}),Object(g.a)(t,"&::-webkit-scrollbar-track",{borderRadius:"10px"}),Object(g.a)(t,"&::-webkit-scrollbar",{width:"8px",backgroundColor:"transparent"}),Object(g.a)(t,"&::-webkit-scrollbar-thumb",{borderRadius:"10px",backgroundColor:"#fff6ca",opacity:"0.3"}),Object(g.a)(t,e.breakpoints.up("md"),{width:"80%"}),Object(g.a)(t,e.breakpoints.up("lg"),{width:"60%"}),t),messagesBlock:{height:"100%",display:"flex",justifyContent:"center",flexDirection:"column"},textArea:{"&::-webkit-scrollbar-track":{borderRadius:"10px"},"&::-webkit-scrollbar":{width:"8px",backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{borderRadius:"10px",backgroundColor:"#fff6ca",opacity:"0.3"}},inputProp:{fontFamily:"Lato, sans-serif",fontSize:"14px","&:after":{borderBottomColor:e.palette.primary.dark}},dropSection:{height:"100%"},dropArea:{outline:"none",height:"100%",position:"relative"},dragDropArea:{outline:"none",height:"100%","& > svg":{verticalAlign:"bottom"}},freqEmoji:{margin:"5px",display:"inline-block","& > button":{outline:"none !important",cursor:"pointer !important",verticalAlign:"2px"},"& > button > span":{verticalAlign:"middle !important"}},addFileBtn:{cursor:"pointer",color:"#adadad",marginTop:"5px",marginRight:"25px","&:hover":{color:e.palette.primary.dark}},addImageBtn:{cursor:"pointer",color:"#adadad",marginTop:"6px",marginRight:"25px","&:hover":{color:e.palette.primary.dark}},toggleSmilesBtn:{background:"transparent !important",transition:".3s all","&:hover":{color:"darkgrey"}},addSmileBlock:{flexDirection:"column",justifyContent:"flex-end"},sendBth:{color:e.palette.primary.dark,fontWeight:"700","&:hover":{background:"transparent"}},messageSecondaryAction:{top:"9px",transform:"none","& > span":{color:"grey"}},messagesList:{overflow:"auto","&::-webkit-scrollbar-track":{borderRadius:"10px"},"&::-webkit-scrollbar":{width:"8px",backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{borderRadius:"10px",backgroundColor:"#fff6ca",opacity:"0.3"}},downloadLink:{color:"grey",textDecoration:"none","&:hover":{textDecoration:"underline"}},downloadIcon:{backgroundColor:"#4e4e4e",cursor:"pointer"},messageAuthorEmail:{fontFamily:"Nunito, sans-serif",fontSize:"14px",fontWeight:"600",margin:"0",color:"#5d5d5d",display:"inline"},capitalizeEmail:{textTransform:"capitalize",display:"inline"},messageLiItem:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),cursor:"pointer"},messageLiWithAuthor:{paddingTop:"0",paddingBottom:"0"},messageLiSelected:{background:"#fff8d7"},topLiFetching:{textAlign:"center",paddingTop:"30px"},actionsBlock:{position:"absolute",width:"100%",top:"0",zIndex:"1"},topicName:{fontSize:"18px",fontFamily:"Poppins, sans-serif"},membersCount:{fontSize:"12px",fontFamily:"Poppins, sans-serif",paddingLeft:"25px",color:"rgba(0,0,0,.4)",height:"min-content"},topicData:{boxShadow:e.shadows[1],"& > div":{alignItems:"center"}},topicNote:{fontSize:"12px",fontFamily:"Poppins, sans-serif",color:"rgba(0,0,0,.8)"},isChecked:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:e.palette.primary.dark,margin:"0"},avatarStyle:{background:e.palette.primary.dark},deleteButton:{margin:e.spacing(.5),fontFamily:"Lato, sans-serif"},editButton:{margin:e.spacing(.5),fontFamily:"Lato, sans-serif",color:"rgba(0,0,0,.4)"},messageActionsBlock:{marginLeft:"auto"},secondaryActions:{flexDirection:"column",background:"rgb(250, 250, 250)"},filterActionsBlock:{display:"flex",justifyContent:"space-around",marginTop:"20px"},expansionMenu:{background:e.palette.primary.main,borderRadius:"0"},filterChip:{boxShadow:e.shadows[1]}}})),Ge=Ye,Qe=a(580),Xe=a(74),_e=a.n(Xe),Ke=a(578),Je=a(608),Ze=function(e){var t=Ge(),a=e.author.split("@"),n=Object(u.a)(a,2),o=n[0],i=n[1];return r.a.createElement(X.a,{primary:e.showName?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:[t.capitalizeEmail,t.messageAuthorEmail].join(" ")},o),r.a.createElement("p",{className:t.messageAuthorEmail},"@"+i)):null,disableTypography:!0,secondary:e.content})},$e=function(e){return r.a.createElement(Ze,{showName:e.showName,author:e.message.creatorId.email,content:r.a.createElement("p",{style:{color:"black",margin:"0",marginTop:"5px"}},e.message.text)})},et=a(120),tt=function(e){var t=e.message.text.match(/\b(http|https)?:\/\/\S+/gi)||[],a=r.a.createElement(et.a,{url:t[0]}),n=e.message.text;return t.forEach((function(e){var t,a=n.indexOf(e),r=a+e.length;n=function(e,t){return e.replace(/./g,(function(e,a){return t[a]?t[a]+e:e}))}(n,(t={},Object(g.a)(t,a,'<a href="'.concat(e,'" target="_blank" rel="noopener noreferrer" style="color: cornflowerblue; word-break: break-word;" >')),Object(g.a)(t,r,"</a>"),t))})),r.a.createElement(Ze,{showName:e.showName,author:e.message.creatorId.email,content:r.a.createElement("div",{style:{color:"black",margin:"0",marginTop:"5px"}},r.a.createElement("p",{dangerouslySetInnerHTML:{__html:n}}),a)})},at=a(579),nt=function(e){var t=e.split("/");return t[t.length-1].slice(13)},rt=function(e){var t=Ge(),a=e.message.path;return r.a.createElement(Ze,{showName:e.showName,author:e.message.creatorId.email,content:r.a.createElement(E.a,{style:{paddingTop:"0"}},r.a.createElement(G.a,{alignItems:"flex-start",style:{padding:"0"}},r.a.createElement(Ke.a,null,r.a.createElement("a",{href:a},r.a.createElement(Je.a,{className:t.downloadIcon},r.a.createElement(at.a,null)))),r.a.createElement(X.a,{primary:r.a.createElement("p",{style:{fontFamily:"Nunito, sans-serif",fontSize:"14px",fontWeight:"600",margin:"0",cursor:"default"}},nt(a)),disableTypography:!0,secondary:r.a.createElement("div",{style:{paddingTop:"5px"}},r.a.createElement("a",{href:a,className:t.downloadLink,onClick:function(e){return e.stopPropagation()}},"Download"))})))})},ot=a(294),it=a(293),ct=a(292),lt=Object(f.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:Object(g.a)({backgroundColor:e.palette.background.paper,padding:e.spacing(1),maxHeight:"60vh",maxWidth:"50vw",minHeight:"25vh",minWidth:"35vw",display:"flex",justifyContent:"center",alignItems:"center",outline:"none"},e.breakpoints.down("sm"),{maxHeight:"70vh",maxWidth:"100vw"}),image:Object(g.a)({maxHeight:"58vh",maxWidth:"48vw"},e.breakpoints.down("sm"),{maxHeight:"68vh",maxWidth:"98vw"})}})),st=lt,ut=function(e){var t=st();return r.a.createElement("div",null,r.a.createElement(ot.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:e.open,onClose:e.toggleView,closeAfterTransition:!0,BackdropComponent:it.a,BackdropProps:{timeout:500}},r.a.createElement(ct.a,{in:e.open},r.a.createElement("div",{className:t.paper},r.a.createElement("img",{src:e.imageSrc,className:t.image,alt:"review"})))))},mt=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),o=a[0],i=a[1],c=function(e){e.stopPropagation(),i((function(e){return!e}))},l=e.message.path;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ut,{open:o,imageSrc:l,toggleView:c}),r.a.createElement(Ze,{showName:e.showName,author:e.message.creatorId.email,content:r.a.createElement("div",{style:{width:"70%",paddingTop:"10px"}},r.a.createElement("img",{src:l,style:{maxHeight:"30vh",maxWidth:"100%",cursor:"pointer"},onClick:c,alt:"saved"}))}))},dt=function(e){return r.a.createElement(Ze,{showName:e.showName,author:e.message.creatorId.email,content:r.a.createElement("div",{style:{width:"70%",paddingTop:"10px"}},r.a.createElement("video",{style:{maxHeight:"30vh",maxWidth:"100%"},onClick:function(e){return e.stopPropagation()},controls:!0},r.a.createElement("source",{src:e.message.path,type:"video/mp4"})))})},pt=function(e){var t,a=Ge(),n=new Date(1e3*e.message.date).toLocaleTimeString(),o="text"===(t=e.message).type?r.a.createElement($e,{message:t,showName:!0}):"link"===t.type?r.a.createElement(tt,{message:t,showName:!0}):"file"===t.type?r.a.createElement(rt,{message:t,showName:!0}):"image"===t.type?r.a.createElement(mt,{message:t,showName:!0}):r.a.createElement(dt,{message:t,showName:!0}),i=[a.messageLiItem,a.messageLiWithAuthor];return r.a.createElement(G.a,{alignItems:"flex-start",className:i.join(" "),ContainerProps:{className:"message"}},r.a.createElement(Ke.a,null,r.a.createElement(Je.a,{alt:"LETTER",className:a.avatarStyle},e.message.creatorId.email.slice(0,2))),o,r.a.createElement(D.a,{className:a.messageSecondaryAction},r.a.createElement(Se.a,{variant:"caption",display:"block",gutterBottom:!0},n)))},gt=function(e){var t=Ge(),a=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!e.fetching&&t&&e.fetchPreviousMessages()};Object(n.useEffect)((function(){a()}),[]);var o=null;return r.a.createElement(E.a,{className:[t.messagesList,"type-messages"].join(" ")},r.a.createElement(_e.a,{onChange:function(e){return a(e)},offset:{top:10},delayedCall:!0},r.a.createElement("li",{className:t.topLiFetching},e.fetching?r.a.createElement(Qe.a,{disableShrink:!0}):null)),e.filterMessages.map((function(e,t){var a=new Date(1e3*e.date).toLocaleDateString();if(o!==a){o=a;var n=new Date(1e3*e.date).toDateString();return r.a.createElement(r.a.Fragment,{key:e._id},r.a.createElement("li",{style:{textAlign:"center",color:"grey",paddingTop:"20px"}},n),r.a.createElement(pt,{message:e}))}return r.a.createElement(pt,{key:e._id,message:e})})))},ft=function(){return r.a.createElement("div",{style:{alignSelf:"center",color:"grey"}},"Messages not found")},ht=function(){return r.a.createElement("div",{style:{alignSelf:"center",position:"absolute",top:"50%",transform:"translateY(-50%)"}},r.a.createElement(Qe.a,{disableShrink:!0}))},bt=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((function(n,r){We()(t).animate({scrollTop:e},a,(function(){n()}))}))},Et=function(e){return We()(e).offset().top},vt=function(e){var t=Ge(),a=Object(n.useState)([]),o=Object(u.a)(a,2),i=o[0],c=o[1],l=Object(n.useState)(!1),s=Object(u.a)(l,2),m=s[0],d=s[1],p=Object(n.useState)(!1),g=Object(u.a)(p,2)[1],f=Object(n.useState)(0),h=Object(u.a)(f,2)[1],b=Object(n.useState)(!0),E=Object(u.a)(b,2),v=E[0],O=E[1];Object(n.useEffect)((function(){y(15).then((function(){k()}))}),[]);var k=function(){O(!1);var e=document.querySelector(".type-messages"),t=document.querySelector(".type-messages .message:last-child");t?bt(Et(t),e,300).then((function(){return g(!0)})):g(!0)},y=function(t){return new Promise((function(a,n){var r="?type="+e.fetchType+"&skip="+function(){var e=null;return h((function(t){return e=t,t})),e}()+"&limit="+t;de.get("/topic/messages/filter/"+e.idUser+r).then((function(e){S(e.data.reverse(),a)})).catch((function(e){d(!1),console.log(e),n(e)}))}))},S=function(e,t){e.length<15&&g(!1);var a=Object(qe.a)(function(){var e=[];return c((function(t){return e=t,t})),e}());c([].concat(Object(qe.a)(e),Object(qe.a)(a))),h((function(e){return e+15})),t()},w=r.a.createElement(ft,null);return i.length>0&&(w=r.a.createElement(gt,{filterMessages:i,fetchPreviousMessages:function(){if(function(){var e=null;return g((function(t){return e=t,t})),e}()&&!function(){var e=null;return d((function(t){return e=t,t})),e}()){var e=document.querySelectorAll(".type-messages .message")[1];if(e){var t=Et(e);d(!0),y(15).then((function(){e&&function(e,t){var a=document.querySelector(".type-messages"),n=Et(e);e?bt(n-t,a).then((function(){return d(!1)})):d(!1)}(e,t)}))}}},fetching:m})),v&&(w=r.a.createElement(ht,null)),r.a.createElement("div",{className:t.messagesBlock},w)},Ot=Object(f.a)((function(e){var t;return{root:(t={height:"100%",width:"100%",paddingTop:"0",margin:"auto",overflow:"auto",background:"#FFFFFF",boxShadow:e.shadows[3]},Object(g.a)(t,e.breakpoints.down("sm"),{padding:e.spacing(.5)}),Object(g.a)(t,"&::-webkit-scrollbar-track",{borderRadius:"10px"}),Object(g.a)(t,"&::-webkit-scrollbar",{width:"8px",backgroundColor:"transparent"}),Object(g.a)(t,"&::-webkit-scrollbar-thumb",{borderRadius:"10px",backgroundColor:"#fff6ca",opacity:"0.3"}),Object(g.a)(t,e.breakpoints.up("md"),{width:"80%"}),Object(g.a)(t,e.breakpoints.up("lg"),{width:"60%"}),t),messagesBlock:{height:"83%",display:"flex",justifyContent:"flex-end",flexDirection:"column"},inputBlock:{height:"17%",position:"relative",display:"flex",flexDirection:"column",justifyContent:"flex-end",padding:"0 "+e.spacing(2)+"px",paddingBottom:e.spacing(.5)},textArea:{"&::-webkit-scrollbar-track":{borderRadius:"10px"},"&::-webkit-scrollbar":{width:"8px",backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{borderRadius:"10px",backgroundColor:"#fff6ca",opacity:"0.3"}},inputProp:{fontFamily:"Lato, sans-serif",fontSize:"14px","&:after":{borderBottomColor:e.palette.primary.dark}},dropSection:{height:"100%"},dropArea:{outline:"none",height:"100%",position:"relative"},dragDropArea:{outline:"none",height:"100%","& > svg":{verticalAlign:"bottom"}},freqEmoji:{margin:"5px",display:"inline-block","& > button":{outline:"none !important",cursor:"pointer !important",verticalAlign:"2px"},"& > button > span":{verticalAlign:"middle !important"}},addFileBtn:{cursor:"pointer",color:"#adadad",marginTop:"5px",marginRight:"25px","&:hover":{color:e.palette.primary.dark}},addImageBtn:{cursor:"pointer",color:"#adadad",marginTop:"6px",marginRight:"25px","&:hover":{color:e.palette.primary.dark}},toggleSmilesBtn:{background:"transparent !important",transition:".3s all","&:hover":{color:"darkgrey"}},addSmileBlock:{flexDirection:"column",justifyContent:"flex-end"},sendBth:{color:e.palette.primary.dark,fontWeight:"700","&:hover":{background:"transparent"}},messageSecondaryAction:{top:"9px",transform:"none","& > span":{color:"grey"}},messagesList:{overflow:"auto",paddingTop:"57px","&::-webkit-scrollbar-track":{borderRadius:"10px"},"&::-webkit-scrollbar":{width:"8px",backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{borderRadius:"10px",backgroundColor:"#fff6ca",opacity:"0.3"}},downloadLink:{color:"grey",textDecoration:"none","&:hover":{textDecoration:"underline"}},downloadIcon:{backgroundColor:"#4e4e4e",cursor:"pointer"},messageAuthorEmail:{fontFamily:"Nunito, sans-serif",fontSize:"14px",fontWeight:"600",margin:"0",color:"#5d5d5d",display:"inline"},capitalizeEmail:{textTransform:"capitalize",display:"inline"},messageLiItem:{paddingLeft:e.spacing(6),paddingRight:e.spacing(3),cursor:"pointer"},messageLiWithAuthor:{paddingTop:"0",paddingBottom:"0"},messageLiSelected:{background:"#fff8d7"},topLiFetching:{textAlign:"center",paddingTop:"30px"},actionsBlock:{position:"absolute",width:"100%",top:"0",zIndex:"1"},topicName:{fontSize:"18px",fontFamily:"Poppins, sans-serif"},membersCount:{fontSize:"12px",fontFamily:"Poppins, sans-serif",paddingLeft:"25px",color:"rgba(0,0,0,.4)",height:"min-content"},topicData:{boxShadow:e.shadows[1],"& > div":{alignItems:"center"}},topicNote:{fontSize:"12px",fontFamily:"Poppins, sans-serif",color:"rgba(0,0,0,.8)"},isChecked:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:e.palette.primary.dark,margin:"0"},avatarStyle:{background:e.palette.primary.dark},deleteButton:{margin:e.spacing(.5),fontFamily:"Lato, sans-serif"},editButton:{margin:e.spacing(.5),fontFamily:"Lato, sans-serif",color:"rgba(0,0,0,.4)"},messageActionsBlock:{marginLeft:"auto"},secondaryActions:{flexDirection:"column",background:"rgb(250, 250, 250)"},filterActionsBlock:{display:"flex",justifyContent:"space-around",marginTop:"20px"},expansionMenu:{background:e.palette.primary.main,borderRadius:"0"},filterChip:{boxShadow:e.shadows[1]},notReadedDot:{fontSize:"12px",position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:e.palette.primary.dark,margin:"0"},newMessagesBlock:{textAlign:"center",color:"grey",paddingTop:"16px"}}})),kt=Object(s.b)((function(e){return{idUser:e.auth.id,token:e.auth.token}}))((function(e){var t=Ot();return r.a.createElement("div",{className:t.root},r.a.createElement(vt,{fetchType:"link",idUser:e.idUser,token:e.token}))})),yt=Object(s.b)((function(e){return{idUser:e.auth.id,token:e.auth.token}}))((function(e){var t=Ot();return r.a.createElement("div",{className:t.root},r.a.createElement(vt,{fetchType:"image",idUser:e.idUser,token:e.token}))})),St=Object(s.b)((function(e){return{idUser:e.auth.id,token:e.auth.token}}))((function(e){var t=Ot();return r.a.createElement("div",{className:t.root},r.a.createElement(vt,{fetchType:"video",idUser:e.idUser,token:e.token}))})),wt=Object(s.b)((function(e){return{idUser:e.auth.id,token:e.auth.token}}))((function(e){var t=Ot();return r.a.createElement("div",{className:t.root},r.a.createElement(vt,{fetchType:"file",idUser:e.idUser,token:e.token}))})),jt=Object(s.b)((function(e){return{idUser:e.auth.id,token:e.auth.token}}))((function(e){var t=Ot();return r.a.createElement("div",{className:t.root},r.a.createElement(vt,{fetchType:"text",idUser:e.idUser,token:e.token}))})),xt=a(123),Tt=a(583),It=a(584),At=(a(367),a(122)),Nt=a(279),Ct=a.n(Nt),Mt=(a(399),a(581)),Ft=a(582),Bt=function(e){var t=Ot(),a=Object(xt.b)({accept:e.imageDrop?"image/*":null,onDrop:function(t){e.dispatchFiles(t,e.imageDrop)}}),n=a.getRootProps,o=a.getInputProps;return r.a.createElement("div",Object.assign({},n({onDrop:function(e){return e.stopPropagation()}}),{className:t.dragDropArea}),r.a.createElement("input",o()),e.icon)},Rt=function(e){var t=Ot();return r.a.createElement("section",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(Bt,{icon:r.a.createElement(Mt.a,{className:t.addFileBtn}),changeProgress:e.changeProgress,dispatchFiles:e.dispatchFiles}),r.a.createElement(Bt,{icon:r.a.createElement(Ft.a,{className:t.addImageBtn}),changeProgress:e.changeProgress,dispatchFiles:e.dispatchFiles,imageDrop:!0}),r.a.createElement("div",{style:{overflow:"hidden",display:"flex",width:"100%"}},e.smiles.map((function(a){return r.a.createElement("div",{key:a,className:t.freqEmoji},r.a.createElement(At.a,{emoji:a,set:"twitter",size:20,onClick:e.addEmoji}))}))),r.a.createElement("div",{style:{marginLeft:"20px"}},r.a.createElement(ne.a,{className:t.sendBth,component:"span",onClick:e.sendOrEditMessage},"SEND")))},Lt=Object(s.b)((function(e){return{userId:e.auth.id,socket:e.sckt.socket,topic:e.msg.topics[e.tpc.openedTopicId]}}),(function(e){return{sendTextMessage:function(t,a,n){e(function(e,t,a){return function(n,r){var o={creatorId:e.sender,text:e.text,type:a,date:Math.floor((new Date).getTime()/1e3)},i=r().tpc.openedTopicId;de.post("/topic/messages/text/"+i,o).then((function(e){t.emit("save-message",i,e.data)})).catch((function(e){n(Be(e))}))}}(t,a,n))},editMessage:function(t,a,n){e(function(e,t,a){return function(n,r){var o=r().tpc.openedTopicId;de.patch("/topic/messages/single/text/"+a,e).then((function(e){t.emit("edit-message",o,e.data)})).catch((function(e){n(Be(e))}))}}(t,a,n))}}}))((function(e){var t=Ot(),a=Object(n.useState)(""),o=Object(u.a)(a,2),i=o[0],c=o[1],l=Object(n.useState)(!1),s=Object(u.a)(l,2),m=s[0],d=s[1],p=Object(n.useState)([]),g=Object(u.a)(p,2),f=g[0],h=g[1],b=Object(n.useRef)(null);Object(n.useEffect)((function(){h(Object(qe.a)(function(){var e=JSON.parse(localStorage.getItem("emoji-mart.frequently")),t=[];for(var a in e)t.push(a);return t.reverse().slice(0,15)}()))}),[]),Object(n.useEffect)((function(){if(e.editingMessage){var t=e.topic.messages.find((function(t){return t._id===e.editingMessage}));c(t.text),E()}}),[e.editingMessage]);var E=function(){b.current.focus()},v=function(){e.editingMessage?k():O()},O=function(){if(""!==i){var t={text:i,sender:e.userId};0===(i.match(/\b(http|https)?:\/\/\S+/gi)||[]).length?e.sendTextMessage(t,e.socket,"text"):e.sendTextMessage(t,e.socket,"link"),c("")}},k=function(){""!==i&&(e.editMessage({text:i},e.socket,e.editingMessage),c(""),e.clearSelectedMessages())};return r.a.createElement("div",{className:t.inputBlock},r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(Tt.a,{in:m},r.a.createElement(At.b,{set:"twitter",onSelect:function(e){c((function(t){return t+e.native})),E(),h((function(t){return Object(qe.a)(function(e,t){return e.length===(e=e.filter((function(e){return e!==t}))).length&&15===e.length&&e.splice(e.length-1,1),[t].concat(Object(qe.a)(e))}(Object(qe.a)(t),e.id))}))},color:"#FFE66D",sheetSize:20})),r.a.createElement(Z.a,{id:"filled-multiline-flexible",className:t.textArea,fullWidth:!0,multiline:!0,autoFocus:!0,inputRef:b,rows:2,rowsMax:4,placeholder:"Start to write...",value:i,onChange:function(e){var t=e.target.value;c(t)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),v())},InputLabelProps:{className:t.inputLabelProp},InputProps:{className:t.inputProp,endAdornment:r.a.createElement(It.a,{position:"end",className:t.addSmileBlock,onBlur:function(){return d(!1)}},r.a.createElement(P.a,{"aria-label":"toggle password visibility",onClick:function(){d((function(e){return!e}))},disableRipple:!0,disableFocusRipple:!0,disableTouchRipple:!0,className:t.toggleSmilesBtn},r.a.createElement(Ct.a,null)))}})),r.a.createElement(Rt,{smiles:f,addEmoji:function(e){c((function(t){return t+e.native})),E()},sendOrEditMessage:v,changeProgress:e.changeProgress,dispatchFiles:e.dispatchFiles,focusInput:E}))})),Dt=a(587),Pt=a(585),Vt=a(586),Ht=function(e){var t=Ot(),a=e.author.split("@"),n=Object(u.a)(a,2),o=n[0],i=n[1];return r.a.createElement(X.a,{primary:e.showName?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:[t.capitalizeEmail,t.messageAuthorEmail].join(" ")},o),r.a.createElement("p",{className:t.messageAuthorEmail},"@"+i)):null,disableTypography:!0,secondary:e.content})},zt=function(e){return r.a.createElement(Ht,{showName:e.showName,author:e.message.creatorId.email,content:r.a.createElement("p",{style:{color:"black",margin:"0",marginTop:"5px"}},e.message.text)})},qt=function(e){var t=e.message.text.match(/\b(http|https)?:\/\/\S+/gi)||[],a=r.a.createElement(et.a,{url:t[0]}),n=e.message.text;return t.forEach((function(e){var t,a=n.indexOf(e),r=a+e.length;n=function(e,t){return e.replace(/./g,(function(e,a){return t[a]?t[a]+e:e}))}(n,(t={},Object(g.a)(t,a,'<a href="'.concat(e,'" target="_blank" rel="noopener noreferrer" style="color: cornflowerblue; word-break: break-word;" >')),Object(g.a)(t,r,"</a>"),t))})),r.a.createElement(Ht,{showName:e.showName,author:e.message.creatorId.email,content:r.a.createElement("div",{style:{color:"black",margin:"0",marginTop:"5px"}},r.a.createElement("p",{dangerouslySetInnerHTML:{__html:n}}),a)})},Ut=function(e){var t=e.split("/");return t[t.length-1].slice(13)},Wt=function(e){var t=Ot(),a=e.message.path;return r.a.createElement(Ht,{showName:e.showName,author:e.message.creatorId.email,content:r.a.createElement(E.a,{style:{paddingTop:"0"}},r.a.createElement(G.a,{alignItems:"flex-start",style:{padding:"0"}},r.a.createElement(Ke.a,null,r.a.createElement("a",{href:a},r.a.createElement(Je.a,{className:t.downloadIcon},r.a.createElement(at.a,null)))),r.a.createElement(X.a,{primary:r.a.createElement("p",{style:{fontFamily:"Nunito, sans-serif",fontSize:"14px",fontWeight:"600",margin:"0",cursor:"default"}},Ut(a)),disableTypography:!0,secondary:r.a.createElement("div",{style:{paddingTop:"5px"}},r.a.createElement("a",{href:a,className:t.downloadLink,onClick:function(e){return e.stopPropagation()}},"Download"))})))})},Yt=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),o=a[0],i=a[1],c=function(e){e.stopPropagation(),i((function(e){return!e}))},l=e.message.path;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ut,{open:o,imageSrc:l,toggleView:c}),r.a.createElement(Ht,{showName:e.showName,author:e.message.creatorId.email,content:r.a.createElement("div",{style:{width:"70%",paddingTop:"10px"}},r.a.createElement("img",{src:l,style:{maxHeight:"30vh",maxWidth:"100%",cursor:"pointer"},onClick:c,alt:"saved"}))}))},Gt=function(e){return r.a.createElement(Ht,{showName:e.showName,author:e.message.creatorId.email,content:r.a.createElement("div",{style:{width:"70%",paddingTop:"10px"}},r.a.createElement("video",{style:{maxHeight:"30vh",maxWidth:"100%"},onClick:function(e){return e.stopPropagation()},controls:!0},r.a.createElement("source",{src:e.message.path,type:"video/mp4"})))})},Qt=function(e){var t=Ot(),a=new Date(1e3*e.message.date).toLocaleTimeString(),n=!1;(e.prevType!==e.message.type||e.prevAuthor!==e.message.creatorId._id||e.showAuthor)&&(n=!0);var o,i,c=(o=e.message,i=n,"text"===o.type?r.a.createElement(zt,{message:o,showName:i}):"link"===o.type?r.a.createElement(qt,{message:o,showName:i}):"file"===o.type?r.a.createElement(Wt,{message:o,showName:i}):"image"===o.type?r.a.createElement(Yt,{message:o,showName:i}):r.a.createElement(Gt,{message:o,showName:i})),l=function(e,t,a,n){var r=[e.messageLiItem];return t||r.push(e.messageLiWithAuthor),a.includes(n)&&r.push(e.messageLiSelected),r}(t,n,e.selectedMessagesId,e.message._id);return r.a.createElement(G.a,{alignItems:"flex-start",className:l.join(" "),onClick:e.changeSelectedMessage,ContainerProps:{className:"message"}},e.selectedMessagesId.includes(e.message._id)?r.a.createElement(Q.a,{className:t.isChecked},r.a.createElement(Pt.a,null)):null,e.message.wasReadedBy.includes(e.userId)?null:r.a.createElement(Q.a,{className:t.isChecked},r.a.createElement(_e.a,{onChange:function(){setTimeout((function(){e.addToReaded(e.userId,e.message._id)}),500)}},r.a.createElement(Vt.a,{className:t.notReadedDot}))),r.a.createElement(Ke.a,null,n?r.a.createElement(Je.a,{alt:"LETTER",className:t.avatarStyle},e.message.creatorId.email.slice(0,2)):r.a.createElement("div",null)),c,r.a.createElement(D.a,{className:t.messageSecondaryAction},r.a.createElement(Se.a,{variant:"caption",display:"block",gutterBottom:!0},a)))},Xt=Object(s.b)((function(e){return{topics:e.msg.topics,userId:e.auth.id,currTopicId:e.tpc.openedTopicId,savingMessages:e.msg.savingMessages}}),(function(e){return{addToReaded:function(t,a){e(function(e,t){return function(a){de.patch("/topic/messages/single/readers/"+t,{wasReadedBy:e}).then((function(e){a(Re(e.data))})).catch((function(e){a(Be(e))}))}}(t,a))}}}))((function(e){var t=Ot(),a=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!e.fetching&&t&&e.fetchPreviousMessages()};Object(n.useEffect)((function(){a()}),[]);var o=function(t,a){return a-t===e.newMessagesLabelPosition&&0!==e.newMessagesLabelPosition},i=function(e,a){return o(e,a)?r.a.createElement("li",{className:[t.newMessagesBlock,"not-readed-message"].join(" ")},"New messages"):null},c=null,l=e.topics[e.currTopicId].messages.length;return r.a.createElement(E.a,{className:[t.messagesList,"messages"].join(" ")},r.a.createElement(_e.a,{onChange:function(e){return a(e)},offset:{top:120},delayedCall:!0},r.a.createElement("li",{className:t.topLiFetching},e.fetching?r.a.createElement(Qe.a,{disableShrink:!0}):null)),e.topics[e.currTopicId].messages.map((function(t,a){if(n=t,!(!((s=e.filter).photos||s.links||s.videos||s.files)||"image"===n.type&&!0===s.photos||"link"===n.type&&!0===s.links||"video"===n.type&&!0===s.videos||"file"===n.type&&!0===s.files))return null;var n,s,m=new Date(1e3*t.date).toLocaleDateString();if(c!==m){c=m;var d=new Date(1e3*t.date).toDateString();return r.a.createElement(r.a.Fragment,{key:t._id},i(a,l),r.a.createElement("li",{style:{textAlign:"center",color:"grey",paddingTop:"20px"}},d),r.a.createElement(Qt,{message:t,userId:e.userId,addToReaded:e.addToReaded,selectedMessagesId:e.selectedMessagesId,showAuthor:o(a,l),changeSelectedMessage:e.changeSelectedMessage.bind(void 0,t._id)}))}var p=0!==a?[e.topics[e.currTopicId].messages[a-1].type,e.topics[e.currTopicId].messages[a-1].creatorId._id]:null,g=Object(u.a)(p,2),f=g[0],h=g[1];return r.a.createElement(r.a.Fragment,{key:t._id},i(a,l),r.a.createElement(Qt,{message:t,userId:e.userId,addToReaded:e.addToReaded,prevType:f,prevAuthor:h,selectedMessagesId:e.selectedMessagesId,showAuthor:o(a,l),changeSelectedMessage:e.changeSelectedMessage.bind(void 0,t._id)}))})),r.a.createElement("li",{style:{textAlign:"center",padding:"0 10%"},className:"message"},e.savingMessages?r.a.createElement(Dt.a,{variant:"determinate",value:e.loadingFileProgress}):null))})),_t=function(){return r.a.createElement("div",{style:{alignSelf:"center",color:"grey",position:"absolute",top:"50%",transform:"translateY(-50%)"}},"No messages yet...")},Kt=function(){return r.a.createElement("div",{style:{alignSelf:"center",position:"absolute",top:"50%",transform:"translateY(-50%)"}},r.a.createElement(Qe.a,{disableShrink:!0}))},Jt=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((function(n,r){We()(t).animate({scrollTop:e},a,(function(){n()}))}))},Zt=function(e){return We()(e).offset().top},$t=function(e){return e&&e.messages},ea=Object(s.b)((function(e){return{topic:e.msg.topics[e.tpc.openedTopicId],currTopicId:e.tpc.openedTopicId,savingMessages:e.msg.savingMessages,recivingMessage:e.msg.recivingMessage}}),(function(e){return{fetchMessages:function(t){e(function(e){return function(t){t({type:"START_MESSAGES_FETCHING"});var a="?skip="+e.skip+"&limit="+e.limit;de.get("/topic/messages/"+e.currTopicId+a).then((function(a){t({type:"FINISH_MESSAGES_FETCHING"}),a.data.length<15&&e.setAllowToFetch(!1),t(function(e,t){return{type:"FETCH_MESSAGES",messages:e,topicId:t}}(a.data.reverse(),e.currTopicId)),e.setSkip((function(e){return e+a.data.length})),e.resolve()})).catch((function(e){t(Be(e))}))}}(t))}}}))((function(e){var t=Ot(),a=Object(n.useState)(!1),o=Object(u.a)(a,2),i=o[0],c=o[1],l=Object(n.useState)(!1),s=Object(u.a)(l,2)[1],m=Object(n.useState)(0),d=Object(u.a)(m,2)[1],p=Object(n.useState)(0),g=Object(u.a)(p,2),f=g[0],h=g[1],b=Object(n.useState)(!0),E=Object(u.a)(b,2),v=E[0],O=E[1];Object(n.useEffect)((function(){e.currTopicId&&de.post("/topic/messages/single/readers/"+e.currTopicId,{userId:e.userId}).then((function(e){h(e.data);var t=e.data;(t+=5)<15&&(t+=15-t),w(t,!0).then((function(){y()}))}))}),[e.currTopicId]),Object(n.useEffect)((function(){!0===e.savingMessages?S():(h(0),e.changeProgress(0),setTimeout((function(){return S()}),300))}),[e.savingMessages]),Object(n.useEffect)((function(){!1===e.recivingMessage?(h(0),setTimeout((function(){return S()}),300)):d((function(e){return e+1}))}),[e.recivingMessage]);var k=function(){var e=null;return d((function(t){return e=t,t})),e},y=function(){O(!1);var e=document.querySelector(".messages"),t=document.querySelector(".messages .not-readed-message"),a=110;t||(a=0,t=document.querySelector(".messages .message:last-of-type")),setTimeout((function(){t?Jt(Zt(t)-a,e,300).then((function(){return s(!0)})):s(!0)}),500)},S=function(){var e=document.querySelector(".messages .message:last-of-type");e&&e.scrollIntoView()},w=function(t,a){return new Promise((function(n,r){if(a&&$t(e.topic))return d(e.topic.messages.length),void n();var o={skip:k(),limit:t,currTopicId:e.currTopicId,resolve:n,setAllowToFetch:s,setSkip:d};e.fetchMessages(o)}))},j=r.a.createElement(_t,null);return $t(e.topic)&&(j=r.a.createElement(Xt,{fetchPreviousMessages:function(){if(function(){var e=null;return s((function(t){return e=t,t})),e}()&&!function(){var e=null;return c((function(t){return e=t,t})),e}()){var e=document.querySelectorAll(".messages .message")[1];if(e){var t=Zt(e);c(!0),w(15).then((function(){e&&function(e,t){var a=document.querySelector(".messages"),n=Zt(e);e?Jt(n-t,a).then((function(){return c(!1)})):c(!1)}(e,t)}))}}},fetching:i,loadingFileProgress:e.loadingFileProgress,changeSelectedMessage:e.changeSelectedMessage,selectedMessagesId:e.selectedMessagesId,filter:e.filter,newMessagesLabelPosition:f})),v&&(j=r.a.createElement(Kt,null)),r.a.createElement("div",{className:t.messagesBlock},j)})),ta=a(610),aa=a(593),na=a(594),ra=a(280),oa=a.n(ra),ia=Object(s.b)((function(e){return{topic:e.msg.topics[e.tpc.openedTopicId],socket:e.sckt.socket}}),(function(e){return{removeMessage:function(t,a){e(function(e,t){return function(a,n){var r=n().tpc.openedTopicId;de.delete("/topic/messages/single/"+e).then((function(e){t.emit("delete-message",r,e.data)})).catch((function(e){a(Be(e))}))}}(t,a))}}}))((function(e){var t=Ot(),a=Object(n.useState)([]),o=Object(u.a)(a,2),i=o[0],c=o[1],l=r.a.createElement(ne.a,{key:"delete",size:"small",color:"secondary",className:t.deleteButton,onClick:function(t){t.stopPropagation(),e.selectedMessagesId.map((function(t){return e.removeMessage(t,e.socket)})),e.clearSelectedMessages()}},"Delete"),s=r.a.createElement(ne.a,{key:"edit",size:"small",className:t.editButton,onClick:function(t){t.stopPropagation(),e.editingMessageStart()}},"Edit");return Object(n.useEffect)((function(){var t,a,n=[];e.topic&&(t=e.selectedMessagesId,a=e.topic.messages,1===t.length&&t.reduce((function(e,t){var n=a.find((function(e){return e._id===t}));return n?"text"===n.type||"link"===n.type?e&&!0:e&&!1:e}),!0))&&n.push(s),e.topic&&function(e){return e.length>0}(e.selectedMessagesId)&&n.push(l),c([].concat(n))}),[e.topic,e.selectedMessagesId]),r.a.createElement("div",{className:t.messageActionsBlock},i)})),ca=a(609),la=a(588),sa=a(589),ua=a(590),ma=a(591),da=a(592),pa=function(e){var t=Ot(),a=function(t){var a=Object(K.a)({},e.filter);a.files=t,e.setFilter(Object(K.a)({},a))},n=function(t){var a=Object(K.a)({},e.filter);a.photos=t,e.setFilter(Object(K.a)({},a))},o=function(t){var a=Object(K.a)({},e.filter);a.videos=t,e.setFilter(Object(K.a)({},a))},i=function(t){var a=Object(K.a)({},e.filter);a.links=t,e.setFilter(Object(K.a)({},a))};return r.a.createElement("div",{className:t.filterActionsBlock},r.a.createElement(ca.a,{icon:r.a.createElement(la.a,null),label:"By Files",clickable:!0,className:t.filterChip,color:"primary",onClick:a.bind(void 0,!0),onDelete:a.bind(void 0,!1),deleteIcon:e.filter.files?null:r.a.createElement(sa.a,null),variant:(e.filter.files,"default")}),r.a.createElement(ca.a,{icon:r.a.createElement(ua.a,null),label:"By Photos",clickable:!0,className:t.filterChip,color:"primary",onClick:n.bind(void 0,!0),onDelete:n.bind(void 0,!1),deleteIcon:e.filter.photos?null:r.a.createElement(sa.a,null),variant:(e.filter.photos,"default")}),r.a.createElement(ca.a,{icon:r.a.createElement(ma.a,null),label:"By Videos",clickable:!0,className:t.filterChip,color:"primary",onClick:o.bind(void 0,!0),onDelete:o.bind(void 0,!1),deleteIcon:e.filter.videos?null:r.a.createElement(sa.a,null),variant:(e.filter.videos,"default")}),r.a.createElement(ca.a,{icon:r.a.createElement(da.a,null),label:"By Links",clickable:!0,className:t.filterChip,color:"primary",onClick:i.bind(void 0,!0),onDelete:i.bind(void 0,!1),deleteIcon:e.filter.links?null:r.a.createElement(sa.a,null),variant:(e.filter.links,"default")}))},ga=Object(s.b)((function(e){return{topics:e.tpc.topics,openedTopicId:e.tpc.openedTopicId}}))((function(e){var t=Ot(Ot),a=Object(n.useState)(!1),o=Object(u.a)(a,2),i=o[0],c=o[1],l=Object(n.useState)(""),s=Object(u.a)(l,2),m=s[0],d=s[1],p=Object(n.useState)(""),g=Object(u.a)(p,2),f=g[0],h=g[1],b=Object(n.useState)(""),E=Object(u.a)(b,2),v=E[0],O=E[1];Object(n.useEffect)((function(){if(e.openedTopicId){var t=function(e,t){var a=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var c=o.value;if(c._id===t)return c}}catch(l){n=!0,r=l}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}}(e.topics,e.openedTopicId);d(t.name),h(t.note),O(t.membersId.length)}}),[e.openedTopicId]);return r.a.createElement("div",{className:t.actionsBlock},r.a.createElement(ta.a,{expanded:i,onChange:function(e,t){c(!!t)},onBlur:function(){c(!1)},className:t.expansionMenu},r.a.createElement(aa.a,{expandIcon:r.a.createElement(oa.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header",className:t.topicData},r.a.createElement(Se.a,{className:t.topicName},m),r.a.createElement(Se.a,{className:t.membersCount},v+(v>1?" members":" member")),r.a.createElement(ia,{selectedMessagesId:e.selectedMessagesId,editingMessageStart:e.editingMessageStart,clearSelectedMessages:e.clearSelectedMessages})),r.a.createElement(na.a,{className:t.secondaryActions},r.a.createElement(Se.a,{className:t.topicNote},f),r.a.createElement(pa,{filter:e.filter,setFilter:e.setFilter}))))})),fa=Object(s.b)((function(e){return{openLoading:e.msg.loading,savingMessages:e.msg.savingMessages,socket:e.sckt.socket,userId:e.auth.id}}),(function(e){return{setCurrentTopic:function(t){e(pe(t))},uploadFile:function(t,a,n){e(Le(t,a,n))}}}))((function(e){var t=Ot(),a=Object(n.useState)(0),o=Object(u.a)(a,2),i=o[0],c=o[1],l=Object(n.useState)(null),s=Object(u.a)(l,2),m=s[0],d=s[1],p=Object(n.useState)([]),g=Object(u.a)(p,2),f=g[0],h=g[1],b=Object(n.useState)({files:!1,photos:!1,videos:!1,links:!1}),E=Object(u.a)(b,2),v=E[0],O=E[1],k=function(){1===f.length&&d(f[0])},y=function(e){if(f.includes(e)){var t=f.filter((function(t){return t!==e}));h(Object(qe.a)(t))}else{var a=Object(qe.a)(f);a.push(e),h(Object(qe.a)(a))}d(null)},S=function(){h([]),d(null)},w=function(e){c(e)},j=function(t){t.map((function(t){var a={file:t,sender:e.userId};return e.uploadFile(a,e.socket,w)}))},x=e.match.params.id;return Object(n.useEffect)((function(){e.setCurrentTopic(x)}),[]),r.a.createElement("div",{className:t.root},r.a.createElement(xt.a,{onDrop:function(t){j(t,e.imageDrop)}},(function(a){var n=a.getRootProps;return r.a.createElement("section",{className:t.dropSection},r.a.createElement("div",Object.assign({},n(),{className:t.dropArea}),r.a.createElement(ga,{selectedMessagesId:f,editingMessageStart:k,clearSelectedMessages:S,filter:v,setFilter:O}),r.a.createElement(ea,{loadingFileProgress:i,changeSelectedMessage:y,selectedMessagesId:f,changeProgress:w,userId:e.userId,filter:v}),r.a.createElement(Lt,{socketRoom:x,changeProgress:w,dispatchFiles:j,editingMessage:m,clearSelectedMessages:S})))})))})),ha=a(596),ba=Object(f.a)((function(e){return{root:{padding:e.spacing(3),height:"100%",width:"100%",overflow:"auto","&::-webkit-scrollbar-track":{borderRadius:"10px"},"&::-webkit-scrollbar":{width:"8px",backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{borderRadius:"10px",backgroundColor:"#fff6ca",opacity:"0.3"}},gridConatainer:{width:"100%",margin:"0",flexGrow:1},topic:{borderRadius:"5px",height:"180px",width:"100%",background:"#FFFFFF",boxShadow:e.shadows[3],"&:hover":{background:"#FCFCFC"}},topicInfo:{height:"inherit",width:"100%",padding:"10px 10px 5px",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"space-around"},topicLink:{textDecoration:"none",color:"#000000",fontFamily:"Lato, sans-serif"},topicName:{fontFamily:"Lato, sans-serif",fontSize:"28px",margin:"0",wordBreak:"break-word"},topicNote:{fontSize:"14px",color:"grey",overflow:"auto","&::-webkit-scrollbar-track":{borderRadius:"10px"},"&::-webkit-scrollbar":{width:"8px",backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{borderRadius:"10px",backgroundColor:"#fff6ca",opacity:"0.3"}},topicCreated:{color:"grey",fontSize:"12px",margin:"0"},topicHat:{height:"10px",width:"100%",position:"absolute",top:"0",background:"#FFE66D",borderTopLeftRadius:"5px",borderTopRightRadius:"5px"},topicMenuButton:{zIndex:"1",position:"absolute",top:"15px",right:"0",transition:"all .3s","&:hover":{background:"none",color:"#000000"}},unreadedCount:{position:"absolute",left:"20px",bottom:"20px"}}})),Ea=a(126),va=a(597),Oa=a(281),ka=a.n(Oa),ya=a(289),Sa=a(595),wa=Object(s.b)((function(e){return{socket:e.sckt.socket}}),(function(e){return{leaveTopic:function(t,a,n){e(function(e,t,a){return function(n,r){var o=r().auth.id;de.post("/topics/single/leave/"+e,{userId:o}).then((function(r){n(function(e,t){return{type:"DELETE_TOPIC",topicId:e,socket:t}}(e,a)),t()})).catch((function(e){return n({type:"TOPICS_ERROR"})}))}}(t,a,n))}}}))((function(e){var t=ba(),a=r.a.useState(null),n=Object(u.a)(a,2),o=n[0],i=n[1],c=Boolean(o),l=r.a.useState(!1),s=Object(u.a)(l,2),m=s[0],d=s[1],p=function(){d(!0)},g=function(){i(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",className:t.topicMenuButton,disableRipple:!0,onClick:function(e){i(e.currentTarget)}},r.a.createElement(ka.a,null)),r.a.createElement(ya.a,{id:"fade-menu",anchorEl:o,keepMounted:!0,open:c,onClose:g,TransitionComponent:ct.a},r.a.createElement(Sa.a,{onClick:function(){g(),e.shareDialogOpen()}},"Share topic"),r.a.createElement(Sa.a,{onClick:function(){g(),e.edtiDialogOpen()}},"Edit name"),r.a.createElement(Sa.a,{onClick:function(){g(),e.leaveTopic(e.topic._id,p,e.socket)}},"Leave")),r.a.createElement(re.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:m,onClose:function(){d(!1)},message:"Topic was leaved"}))})),ja=Object(l.h)((function(e){var t=ba(),a=Object(n.useState)(0),o=Object(u.a)(a,2),i=o[0],c=o[1];return Object(n.useEffect)((function(){de.post("/topic/messages/single/readers/"+e.data._id,{userId:e.userId}).then((function(e){c(e.data)}))}),[]),Object(n.useEffect)((function(){if(e.newUnreadMessage){var t=e.newUnreadMessage.topicId;t===e.data._id&&c((function(e){return e+1})),console.log(t)}}),[e.newUnreadMessage]),r.a.createElement(Tt.a,{in:!0,style:{transitionDelay:200*e.delay+"ms",position:"relative"}},r.a.createElement(ha.a,{item:!0,xs:12,sm:6,md:4,lg:3},r.a.createElement(wa,{edtiDialogOpen:e.edtiDialogOpen,shareDialogOpen:e.shareDialogOpen,topic:e.data}),r.a.createElement(we,{className:t.topicLink,to:e.match.url+"/"+e.data._id},r.a.createElement(Ea.a,{className:t.topic},r.a.createElement("div",{className:t.topicHat}),r.a.createElement("div",{className:t.topicInfo},r.a.createElement("p",{className:t.topicName},e.data.name),e.data.note?r.a.createElement("p",{className:t.topicNote},e.data.note):null,r.a.createElement("p",{className:t.topicCreated},e.data.date),i>0?r.a.createElement(va.a,{className:t.unreadedCount,badgeContent:i,max:99,color:"primary"}):null)))))})),xa=r.a.forwardRef((function(e,t){return r.a.createElement(J.a,Object.assign({direction:"up",ref:t},e))})),Ta=Object(s.b)(null,(function(e){return{startEditingTopic:function(t){e(function(e){return function(t,a){var n={name:e.name,note:e.note};de.patch("/topics/single/"+e._id,n).catch((function(e){return t({type:"TOPICS_ERROR"})}))}}(t))},finishEditingTopic:function(t,a){e(function(e,t){return t(),{type:"EDIT_TOPIC",topic:e}}(t,a))}}}))((function(e){var t=ie(),a=Object(n.useState)({title:{config:{name:"title",label:"Title"},validationRules:{isRequred:!0,maxLength:20},isValid:!0,validationMessage:"",value:""},notes:{config:{name:"notes",label:"Notes"},validationRules:{maxLength:100},isValid:!0,validationMessage:"",value:""}}),o=Object(u.a)(a,2),i=o[0],c=o[1],l=Object(n.useState)(!1),s=Object(u.a)(l,2),m=s[0],d=s[1],p=function(){d(!0)};Object(n.useEffect)((function(){null===e.topic?f():h()}),[e.topic]);var f=function(){c((function(e){return Object(K.a)({},e,{title:Object(K.a)({},e.title,{isValid:!0,validationMessage:"",value:""}),notes:Object(K.a)({},e.notes,{isValid:!0,validationMessage:"",value:""})})}))},h=function(){c((function(t){return Object(K.a)({},t,{title:Object(K.a)({},t.title,{value:e.topic.name}),notes:Object(K.a)({},t.notes,{value:e.topic.note})})}))},b=function(e,t){var a=t.target.value,n=le(a,i[e].validationRules,null),r=Object(u.a)(n,2),o=r[0],l=r[1];c((function(t){return Object(K.a)({},t,Object(g.a)({},e,Object(K.a)({},t[e],{value:a,isValid:o,validationMessage:l})))}))},E=[],v=!0;for(var O in i)E.push(r.a.createElement(Z.a,{key:O,className:t.topicInput,label:i[O].config.label,name:i[O].config.name,fullWidth:!0,color:"primary",value:i[O].value,onInput:b.bind(void 0,O),error:!i[O].isValid&&i[O].value.length>0,helperText:i[O].validationMessage})),v=i[O].isValid&&v;return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{open:e.open,TransitionComponent:xa,keepMounted:!0,maxWidth:"xs",onClose:e.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement("div",{className:t.dialogColorHat}),r.a.createElement(ee.a,{id:"alert-dialog-slide-title",className:t.topicTitle},"Edit Topic"),r.a.createElement(te.a,null,E),r.a.createElement(ae.a,null,r.a.createElement(ne.a,{className:t.closeBtn,onClick:e.handleClose},"Disagree"),r.a.createElement(ne.a,{disabled:!v,className:t.agreeBtn,onClick:function(){var t={_id:e.topic._id,name:i.title.value,note:i.notes.value,date:(new Date).toLocaleDateString()};e.handleClose(),e.startEditingTopic(t),e.finishEditingTopic(t,p)}},"Agree"))),r.a.createElement(re.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:m,onClose:function(){d(!1)},message:"Topic was edited"}))})),Ia=r.a.forwardRef((function(e,t){return r.a.createElement(J.a,Object.assign({direction:"up",ref:t},e))})),Aa=function(e){var t=ie(),a=Object(n.useState)({email:{config:{name:"email",label:"Email"},validationRules:{isRequred:!0,isEmail:!0},isValid:!1,validationMessage:"",value:""}}),o=Object(u.a)(a,2),i=o[0],c=o[1],l=Object(n.useState)(!1),s=Object(u.a)(l,2),m=s[0],d=s[1],p=Object(n.useState)(null),f=Object(u.a)(p,2),h=f[0],b=f[1];Object(n.useEffect)((function(){null===e.topic?E():v()}),[e.topic]);var E=function(){c((function(e){return Object(K.a)({},e,{email:Object(K.a)({},e.email,{isValid:!1,validationMessage:"",value:""})})}))},v=function(){c((function(e){return Object(K.a)({},e,{email:Object(K.a)({},e.email,{value:""})})}))},O=function(e,t){de.patch("/topics/single/share/"+e,t).then((function(e){d(!0),b("Topic shared successfully")})).catch((function(e){console.log(e),d(!0),b(e.response.data.message)}))},k=function(e,t){var a=t.target.value,n=le(a,i[e].validationRules,null),r=Object(u.a)(n,2),o=r[0],l=r[1];c((function(t){return Object(K.a)({},t,Object(g.a)({},e,Object(K.a)({},t[e],{value:a,isValid:o,validationMessage:l})))}))},y=[],S=!0;for(var w in i)y.push(r.a.createElement(Z.a,{key:w,className:t.topicInput,label:i[w].config.label,name:i[w].config.name,fullWidth:!0,color:"primary",value:i[w].value,onInput:k.bind(void 0,w),error:!i[w].isValid&&i[w].value.length>0,helperText:i[w].validationMessage})),S=i[w].isValid&&S;return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{open:e.open,TransitionComponent:Ia,keepMounted:!0,maxWidth:"sm",onClose:e.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement("div",{className:t.dialogColorHat}),r.a.createElement(ee.a,{id:"alert-dialog-slide-title",className:t.topicTitle},"Share Topic"),r.a.createElement(te.a,null,y),r.a.createElement(ae.a,null,r.a.createElement(ne.a,{className:t.closeBtn,onClick:e.handleClose},"Cancel"),r.a.createElement(ne.a,{disabled:!S,className:t.agreeBtn,onClick:function(){var t={currentMembers:e.topic.membersId,email:i.email.value};e.handleClose(),O(e.topic._id,t)}},"Share"))),r.a.createElement(re.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:m,onClose:function(){d(!1),b(null)},message:h}))},Na=Object(s.b)((function(e){return{socket:e.sckt.socket,topics:e.tpc.topics,wasFetched:e.tpc.wasFetched,userId:e.auth.id}}),(function(e){return{getTopicsList:function(t){e(function(e){return function(t,a){t({type:"START_FETCHING"});var n=a().auth.id;de.get("/topics/"+n).then((function(a){t(function(e,t){return{type:"FINISH_FETCHING",topics:e,socket:t}}(a.data,e))})).catch((function(e){return t({type:"TOPICS_ERROR"})}))}}(t))},reciveMessage:function(t){e(function(e){return function(t){t({type:"START_MESSAGES_RECIVE"}),t(function(e){return{type:"MESSAGE_SAVE",message:e}}(e)),t({type:"FINISH_MESSAGES_RECIVE"})}}(t))},changeMessage:function(t){e(Re(t))},deleteMessage:function(t){e(function(e){return{type:"REMOVE_MESSAGE",message:e}}(t))},setCurrentTopic:function(t){e(pe(t))}}}))((function(e){var t=ba(),a=Object(n.useState)(!1),o=Object(u.a)(a,2),i=o[0],c=o[1],l=Object(n.useState)(!1),s=Object(u.a)(l,2),m=s[0],d=s[1],p=Object(n.useState)(null),g=Object(u.a)(p,2),f=g[0],h=g[1],b=Object(n.useState)(null),E=Object(u.a)(b,2),v=E[0],O=E[1];Object(n.useEffect)((function(){e.wasFetched||(e.getTopicsList(e.socket),e.socket.on("recive-message",(function(t){e.reciveMessage(t),O(t)})),e.socket.on("recive-edited-message",(function(t){e.changeMessage(t)})),e.socket.on("recive-delete-message",(function(t){e.deleteMessage(t)}))),e.setCurrentTopic(null)}),[]);var k=function(e){h(e),c(!0)},y=function(e){h(e),d(!0)},S=function(){c(!1),d(!1),h(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ta,{open:i,handleClose:S,topic:f}),r.a.createElement(Aa,{open:m,handleClose:S,topic:f}),r.a.createElement("div",{className:t.root},r.a.createElement(ha.a,{container:!0,spacing:3,className:t.gridConatainer},e.topics.map((function(t,a){return r.a.createElement(ja,{key:a,data:t,delay:a,userId:e.userId,newUnreadMessage:v,edtiDialogOpen:k.bind(void 0,t),shareDialogOpen:y.bind(void 0,t)})})))))})),Ca=function(e){return r.a.createElement(l.d,null,r.a.createElement(l.b,{path:e.match.url+"/links",component:kt,exact:!0}),r.a.createElement(l.b,{path:e.match.url+"/photos",component:yt,exact:!0}),r.a.createElement(l.b,{path:e.match.url+"/videos",component:St,exact:!0}),r.a.createElement(l.b,{path:e.match.url+"/files",component:wt,exact:!0}),r.a.createElement(l.b,{path:e.match.url+"/notes",component:jt,exact:!0}),r.a.createElement(l.b,{path:e.match.url+"/:id",component:fa,exact:!0}),r.a.createElement(l.b,{path:e.match.url,component:Na}))},Ma=a(282),Fa=a.n(Ma),Ba=Object(f.a)((function(e){return{root:{height:"100%",width:"100%",display:"flex",justifyContent:"center",flexDirection:"column"},imageBlock:{height:"60%",textAlign:"center"},image:{height:"100%"},title:{textAlign:"center",fontSize:"35px",fontFamily:'"Poppins", sans-serif',color:"rgba(0, 0, 0, 0.26)"}}})),Ra=function(){var e=Ba();return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.imageBlock},r.a.createElement("img",{src:Fa.a,className:e.image,alt:"coming soon"})),r.a.createElement("div",{className:e.title},"COMING SOON"))},La=a(283),Da=a.n(La),Pa=Object(f.a)((function(e){return{root:{height:"100%",width:"100%",display:"flex",justifyContent:"center",flexDirection:"column"},imageBlock:{height:"60%",textAlign:"center"},image:{height:"100%"},title:{textAlign:"center",fontSize:"35px",fontFamily:'"Poppins", sans-serif',color:"rgba(0, 0, 0, 0.26)"}}})),Va=function(){var e=Pa();return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.imageBlock},r.a.createElement("img",{src:Da.a,className:e.image,alt:"select topic"})),r.a.createElement("div",{className:e.title},"SAVE YOUR IDEAS"))},Ha=Object(s.b)(null,(function(e){return{finishLoading:function(){e({type:"LOAD_FINISH"})},connectSocket:function(){e({type:"CONNECT_SOCKET"})}}}))((function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),o=a[0],i=a[1];Object(n.useEffect)((function(){e.finishLoading(),e.connectSocket()}),[]);var c=b(),s=function(){i(!o)};return r.a.createElement("div",{className:c.root},r.a.createElement(m.a,null),r.a.createElement(De,{handleDrawerToggle:s}),r.a.createElement(be,{isMobile:o,handleDrawerToggle:s}),r.a.createElement("main",{className:c.content},r.a.createElement("div",{className:c.toolbar}),r.a.createElement(ze,{classProp:"pageComponentWrapper"},r.a.createElement(l.b,{path:e.match.url+"/topics",component:Ca}),r.a.createElement(l.b,{path:e.match.url+"/draft",component:Ra}),r.a.createElement(l.b,{path:e.match.url,component:Va}))))})),za=a(599),qa=a(605),Ua=a(604),Wa=Object(f.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{},wrapper:{background:"white",boxShadow:e.shadows[2]},buttonWrapper:{position:"relative",margin:e.spacing(3,0,2)},redirectLink:{color:e.palette.primary.dark},errorAlert:{marginTop:"10px"},buttonProgress:{color:e.palette.primary.main,position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}})),Ya=Object(s.b)((function(e){return{errorMessage:e.auth.errorMessage,userId:e.auth.id,authStart:e.auth.authStart}}),(function(e){return{onSignIn:function(t,a){var n,r;e((n=t,r=a,function(e){e({type:"AUTH_START"}),de.post("/user/signin",n).then((function(t){de.defaults.headers.common.Authorization="Bearer "+t.data,e(function(e,t){return{type:"SIGN_IN",token:e,remember:t}}(t,r)),e(Ce())})).catch((function(t){e(Ae(t))}))}))},finishLoading:function(){e({type:"LOAD_FINISH"})}}}))((function(e){var t=Wa(),a=Object(n.useState)(!1),o=Object(u.a)(a,2),i=o[0],c=o[1],s=Object(n.useState)({email:{config:{name:"email",label:"Email"},validationRules:{isRequred:!0,isEmail:!0,shoudBeUniqe:!0},isValid:!1,validationMessage:"",value:""},password:{config:{type:"password",name:"password",label:"Password"},validationRules:{isRequred:!0,minLength:!0},isValid:!1,validationMessage:"",value:""}}),m=Object(u.a)(s,2),d=m[0],p=m[1];Object(n.useEffect)((function(){e.finishLoading()}),[]);var f=function(e,t){var a=t.target.value,n=le(a,d[e].validationRules,d.email.value),r=Object(u.a)(n,2),o=r[0],i=r[1];p((function(t){return Object(K.a)({},t,Object(g.a)({},e,Object(K.a)({},t[e],{value:a,isValid:o,validationMessage:i})))}))},h=[],b=!0;for(var E in d)h.push(r.a.createElement(ha.a,{item:!0,key:E,xs:12},r.a.createElement(Z.a,{label:d[E].config.label,name:d[E].config.name,type:d[E].config.type,variant:"outlined",fullWidth:!0,color:"primary",value:d[E].value,onInput:f.bind(void 0,E),error:!d[E].isValid&&d[E].value.length>0,helperText:d[E].validationMessage}))),b=d[E].isValid&&b;return e.userId?r.a.createElement(l.a,{to:"/pulp"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Se.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:t.form,noValidate:!0},r.a.createElement(ha.a,{container:!0,spacing:2},h),null!==e.errorMessage?r.a.createElement(Ua.a,{severity:"error",className:t.errorAlert},e.errorMessage):null,r.a.createElement(za.a,{control:r.a.createElement(qa.a,{value:"remember",color:"primary",onChange:function(){c((function(e){return!e}))}}),label:"Remember me"}),r.a.createElement("div",{className:t.buttonWrapper},r.a.createElement(ne.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:!b||e.authStart,className:t.submit,onClick:function(t){t.preventDefault();var a={email:d.email.value,password:d.password.value};try{e.onSignIn(a,i)}catch(n){console.log(n)}}},r.a.createElement(Se.a,{variant:"subtitle1"},"Sign In")),e.authStart&&r.a.createElement(Qe.a,{size:24,className:t.buttonProgress})),r.a.createElement(ha.a,{container:!0},r.a.createElement(ha.a,{item:!0,xs:!0},r.a.createElement(ye.a,{href:"#",variant:"body2",className:t.redirectLink},"Forgot password?")),r.a.createElement(ha.a,{item:!0},r.a.createElement(ye.a,{component:we,to:"/sign-up",variant:"body2",className:t.redirectLink},"Don't have an account? Sign Up")))))})),Ga=a(600),Qa=a(603),Xa=a(284),_a=a.n(Xa),Ka=function(){return r.a.createElement(Se.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(ye.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")},Ja=function(e){var t=Wa();return r.a.createElement(Ga.a,{component:"main",maxWidth:"xs",className:t.wrapper},r.a.createElement(m.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(Je.a,{className:t.avatar,pt:2},r.a.createElement(_a.a,null)),e.children),r.a.createElement(Qa.a,{mt:5,pb:2},r.a.createElement(Ka,null)))},Za=function(){return r.a.createElement(Ja,null,r.a.createElement(Ya,null))},$a=Object(s.b)((function(e){return{errorMessage:e.auth.errorMessage,userId:e.auth.id,authStart:e.auth.authStart}}),(function(e){return{onSignUp:function(t){return e((a=t,function(e){e({type:"AUTH_START"}),de.post("/user/signup",a).then((function(t){de.defaults.headers.common.Authorization="Bearer "+t.data,e(function(e){return{type:"SIGN_UP",token:e}}(t)),e(Ce())})).catch((function(t){e(Ae(t))}))}));var a},finishLoading:function(){e({type:"LOAD_FINISH"})}}}))((function(e){var t=Wa(),a=Object(n.useState)(!1),o=Object(u.a)(a,2),i=o[0],c=o[1],s=Object(n.useState)(null),m=Object(u.a)(s,2),d=m[0],p=m[1],f=Object(n.useState)({email:{config:{name:"email",label:"Email"},validationRules:{isRequred:!0,isEmail:!0,shoudBeUniqe:!0},isValid:!1,validationMessage:"",value:""},emailConfirm:{config:{name:"email1",label:"Confirm Email"},validationRules:{isRequred:!0,shoudBeEqual:!0},isValid:!1,validationMessage:"",value:""},password:{config:{type:"password",name:"password",label:"Password"},validationRules:{isRequred:!0,minLength:!0},isValid:!1,validationMessage:"",value:""}}),h=Object(u.a)(f,2),b=h[0],E=h[1];Object(n.useEffect)((function(){if(i){clearTimeout(d);var e=setTimeout((function(){var e={email:b.email.value};de.post("/user/email-exists",e).then((function(e){e.data&&E((function(e){return Object(K.a)({},e,{email:Object(K.a)({},e.email,{isValid:!1,validationMessage:"Email already exist"})})}))})).catch((function(e){return console.log(e)}))}),800);p(e)}}),[b.email.value]),Object(n.useEffect)((function(){e.finishLoading()}),[]);var v=function(e,t){var a=t.target.value,n=le(a,b[e].validationRules,b.email.value),r=Object(u.a)(n,2),o=r[0],i=r[1];O(e,o),E((function(t){return Object(K.a)({},t,Object(g.a)({},e,Object(K.a)({},t[e],{value:a,isValid:o,validationMessage:i})))}))},O=function(e,t){"email"===e&&c(t)},k=[],y=!0;for(var S in b)k.push(r.a.createElement(ha.a,{item:!0,key:S,xs:12},r.a.createElement(Z.a,{label:b[S].config.label,name:b[S].config.name,type:b[S].config.type,variant:"outlined",fullWidth:!0,color:"primary",value:b[S].value,onInput:v.bind(void 0,S),error:!b[S].isValid&&b[S].value.length>0,helperText:b[S].validationMessage}))),y=b[S].isValid&&y;return e.userId?r.a.createElement(l.a,{to:"/pulp"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Se.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:t.form,noValidate:!0},r.a.createElement(ha.a,{container:!0,spacing:2},k),null!==e.errorMessage?r.a.createElement(Ua.a,{severity:"error",className:t.errorAlert},e.errorMessage):null,r.a.createElement("div",{className:t.buttonWrapper},r.a.createElement(ne.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:!y||e.authStart,className:t.submit,onClick:function(t){t.preventDefault();var a={email:b.email.value,password:b.password.value};try{e.onSignUp(a)}catch(n){console.log(n)}}},r.a.createElement(Se.a,{variant:"subtitle1"},"Sign Up")),e.authStart&&r.a.createElement(Qe.a,{size:24,className:t.buttonProgress})),r.a.createElement(ha.a,{container:!0,justify:"flex-end"},r.a.createElement(ha.a,{item:!0},r.a.createElement(ye.a,{component:we,to:"/sign-in",variant:"body2",className:t.redirectLink},"Already have an account? Sign in")))))})),en=function(){return r.a.createElement(Ja,null,r.a.createElement($a,null))},tn=Object(f.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,background:"#FFFFFF"}}})),an=Object(s.b)((function(e){return{isLoading:e.auth.loading}}))((function(e){var t=tn();return r.a.createElement(it.a,{className:t.backdrop,open:e.isLoading},r.a.createElement(Qe.a,{color:"primary"}))})),nn=Object(s.b)((function(e){return{userId:e.auth.id}}),(function(e){return{signInByLocalData:function(){e(Ne())},refreshTokenAndSignIn:function(t){e(Me(t))}}}))((function(e){return Object(n.useEffect)((function(){if(localStorage.getItem("token")){var t=localStorage.getItem("expirationTime")-30;if(+Math.floor((new Date).getTime()/1e3)>=t){var a={token:localStorage.getItem("token")};e.refreshTokenAndSignIn(a)}else e.signInByLocalData()}}),[]),e.userId?r.a.createElement(r.a.Fragment,null,r.a.createElement(an,null),r.a.createElement(ze,null,r.a.createElement(l.b,{path:"/pulp",component:Ha}),r.a.createElement(l.b,{path:"/",render:function(){return r.a.createElement(l.a,{to:"/pulp"})}}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(an,null),r.a.createElement(ze,null,r.a.createElement(l.b,{path:"/sign-in",component:Za,exact:!0}),r.a.createElement(l.b,{path:"/sign-up",component:en,exact:!0}),r.a.createElement(l.b,{path:"/",render:function(){return r.a.createElement(l.a,{to:"/sign-in"})}})))}));a(400);var rn=function(){return r.a.createElement(c.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(nn,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var on=a(287),cn=a.n(on),ln=a(288),sn=a(601),un=a(65),mn=a(285),dn=a(125),pn=a.n(dn),gn={id:null,email:null,token:null,expirationTime:null,errorMessage:null,authStart:!1,loading:!0,refreshTimerId:null},fn=function(e){localStorage.setItem("id",e.id),localStorage.setItem("email",e.email),localStorage.setItem("token",e.token),localStorage.setItem("expirationTime",e.expirationTime)},hn=function(){localStorage.clear()},bn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return{errorMessage:null,authStart:!0,loading:!1};case"SIGN_IN":var a=pn.a.decode(t.token.data),n={id:a.id,email:a.email,token:t.token.data,expirationTime:a.exp};return t.remember&&fn(n),Object(K.a)({},n,{loading:!0});case"SIGN_UP":var r=pn.a.decode(t.token.data),o={id:r.id,email:r.email,token:t.token.data,expirationTime:r.exp};return Object(K.a)({},o,{loading:!0});case"AUTH_ERROR":return void 0===t.err.response?{errorMessage:"Service is unavailable. Please, try later...",authStart:!1,loading:!1}:{errorMessage:t.err.response.data.message,authStart:!1,loading:!1};case"LOAD_FINISH":return Object(K.a)({},e,{loading:!1});case"REFRESH_TOKEN":var i=pn.a.decode(t.token.data),c={id:i.id,email:i.email,token:t.token.data,expirationTime:i.exp};return fn(c),Object(K.a)({},c,{loading:!1});case"SIGN_IN_LOCALY":var l={id:localStorage.getItem("id"),email:localStorage.getItem("email"),token:localStorage.getItem("token"),expirationTime:localStorage.getItem("expirationTime")};return Object(K.a)({},l,{loading:!1});case"RESET_TIMEOUT_ID":return Object(K.a)({},e,{refreshTimerId:t.id});case"LOGOUT":return hn(),Object(K.a)({},gn);default:return e}},En={topics:[],openedTopicId:null,loading:!1,error:!1,wasFetched:!1},vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_FETCHING":return Object(K.a)({},e,{loading:!0,error:!1});case"GET_TOPICS":return Object(K.a)({},e);case"TOPICS_ERROR":return Object(K.a)({},e,{loading:!1,error:!0});case"FINISH_FETCHING":var a=t.topics.map((function(e){var a=new Date(1e3*e.date).toLocaleDateString();return e.date=a,t.socket.emit("join-to-topic",e._id),e}));return{loading:!1,error:!1,topics:Object(qe.a)(a),wasFetched:!0};case"ADD_TOPIC":var n=new Date(1e3*t.topic.date).toLocaleDateString();return t.socket.emit("join-to-topic",t.topic._id),Object(K.a)({},e,{topics:[].concat(Object(qe.a)(e.topics),[Object(K.a)({},t.topic,{date:n})])});case"EDIT_TOPIC":var r=e.topics.filter((function(e){return e._id===t.topic._id})),o=e.topics.filter((function(e){return e._id!==t.topic._id}));return Object(K.a)({},e,{topics:[Object(K.a)({},r[0],{},t.topic)].concat(Object(qe.a)(o))});case"SET_CURRENT_TOPIC":return Object(K.a)({},e,{openedTopicId:t.topicId});case"DELETE_TOPIC":return t.socket.emit("leave-the-topic",t.topicId),Object(K.a)({},e,{topics:e.topics.filter((function(e){return e._id!==t.topicId}))});case"LOGOUT_TOPICS":return Object(K.a)({},En);default:return e}},On=a(286),kn=a.n(On),yn={socket:null},Sn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONNECT_SOCKET":if(null!==e.socket)break;var a=kn.a.connect("https://pill-plate.herokuapp.com");return{socket:a};case"DISCONNECT_SOCKET":return e.socket.close(),Object(K.a)({},yn);default:return e}},wn={savingMessages:!1,recivingMessage:!1,topics:{}},jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_MESSAGES_SAVING":return Object(K.a)({},e,{savingMessages:!0});case"FINISH_MESSAGES_SAVING":return Object(K.a)({},e,{savingMessages:!1});case"START_MESSAGES_RECIVE":return Object(K.a)({},e,{recivingMessage:!0});case"FINISH_MESSAGES_RECIVE":return Object(K.a)({},e,{recivingMessage:!1});case"MESSAGE_SAVE":var a=[Object(K.a)({},t.message)];return e.topics[t.message.topicId]&&e.topics[t.message.topicId].messages&&(a=[].concat(Object(qe.a)(e.topics[t.message.topicId].messages),[Object(K.a)({},t.message)])),Object(K.a)({},e,{topics:Object(K.a)({},e.topics,Object(g.a)({},t.message.topicId,Object(K.a)({},e.topics[t.message.topicId],{messages:Object(qe.a)(a)})))});case"FETCH_MESSAGES":if(0===t.messages.length)return e;var n=Object(qe.a)(t.messages);return e.topics[t.topicId]&&e.topics[t.topicId].messages&&(n=[].concat(Object(qe.a)(t.messages),Object(qe.a)(e.topics[t.topicId].messages))),Object(K.a)({},e,{topics:Object(K.a)({},e.topics,Object(g.a)({},t.topicId,Object(K.a)({},e.topics[t.topicId],{messages:Object(qe.a)(n)})))});case"EDIT_MESSAGE":var r=t.message.topicId,o=e.topics[r].messages.map((function(e){return e._id===t.message._id&&(e.wasReadedBy=Object(qe.a)(t.message.wasReadedBy),e.text=t.message.text),e}));return Object(K.a)({},e,{topics:Object(K.a)({},e.topics,Object(g.a)({},r,Object(K.a)({},e.topics[r],{messages:Object(qe.a)(o)})))});case"REMOVE_MESSAGE":var i=t.message.topicId;return Object(K.a)({},e,{topics:Object(K.a)({},e.topics,Object(g.a)({},i,Object(K.a)({},e.topics[i],{messages:e.topics[i].messages.filter((function(e){return e._id!==t.message._id}))})))});case"LOGOUT_MESSAGES":return Object(K.a)({},wn);default:return e}},xn=Object(un.c)({auth:bn,tpc:vn,sckt:Sn,msg:jn}),Tn=Object(ln.a)({palette:{primary:{light:"#ffec92",main:"#FFE66D",dark:"#F5B82E"},secondary:{light:"#ffd473",main:cn.a[400]}}}),In=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||un.d,An=Object(un.e)(xn,In(Object(un.a)(mn.a)));i.a.render(r.a.createElement(sn.a,{theme:Tn},r.a.createElement(s.a,{store:An},r.a.createElement(rn,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[305,1,2]]]);
//# sourceMappingURL=main.af0527f2.chunk.js.map